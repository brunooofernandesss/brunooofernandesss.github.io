<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>Metodologia de Revis√£o Sistem√°tica (PRISMA, PICO, Protocolos).</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      background-color: #f4f4f4;
    }

    .quiz-container {
      max-width: 800px;
      width: 100%;
    }

    h1 {
      color: #333;
      text-align: center;
      margin-bottom: 30px;
    }

    .card {
      background-color: white;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .question {
      font-weight: bold;
      margin-bottom: 10px;
      color: #333;
    }

    .options {
      margin-top: 15px;
    }

    /* Estilos unificados para todas as op√ß√µes (est√°ticas e din√¢micas) */
    .option, label.option, label, #newQuestionsContent label {
      display: flex; /* Para alinhar imagem e texto */
      align-items: center;
      margin-bottom: 10px;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.2s ease;
      position: relative; /* Para posicionar a tesoura */
    }

    /* FOR√áA a remo√ß√£o de inputs de radio em QUALQUER lugar */
    .option input[type="radio"], 
    label input[type="radio"],
    #newQuestionsContent input[type="radio"],
    #newQuestionsContent label input[type="radio"] {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        position: absolute !important;
        left: -9999px !important;
    }

    .option:hover, 
    label.option:hover, 
    label:hover,
    #newQuestionsContent label:hover {
      background-color: #e9e9e9;
    }

    .option.selected, 
    label.option.selected, 
    label.selected,
    #newQuestionsContent label.selected {
      background-color: #d1e7dd;
      border-color: #28a745;
    }

    .option.correct, 
    label.option.correct, 
    label.correct,
    #newQuestionsContent label.correct {
      background-color: #d4edda;
      border-color: #28a745;
    }

    .option.incorrect, 
    label.option.incorrect, 
    label.incorrect,
    #newQuestionsContent label.incorrect {
      background-color: #f8d7da;
      border-color: #dc3545;
    }

    .submit-btn {
      display: block;
      width: 100%;
      padding: 15px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 18px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      margin-top: 30px;
    }

    .submit-btn:hover {
      background-color: #0056b3;
    }

    .results {
      text-align: center;
      margin-top: 30px;
      font-size: 20px;
      font-weight: bold;
      color: #333;
    }

    .scissor-icon {
      margin-right: 10px; /* Espa√ßo entre a tesoura e o texto da op√ß√£o */
      width: 20px; /* Ajuste conforme o tamanho da sua imagem */
      height: 20px; /* Ajuste conforme o tamanho da sua imagem */
      opacity: 0.5; /* Transpar√™ncia como no original */
      cursor: pointer;
    }

    .scissor-icon.hidden {
      display: none;
    }

    .struck-through {
      text-decoration: line-through;
      color: #888;
    }

    .comment {
      margin-top: 10px;
      padding: 10px;
      background-color: #f0f0f0;
      border-left: 4px solid #007bff;
      font-style: italic;
      color: #555;
      display: none; /* Escondido por padr√£o */
    }
    .comment.show {
      display: block; /* Mostrado quando ativado */
    }

    /* Estilos para o bot√£o de navega√ß√£o de erro / diagn√≥stico */
    .error-nav-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #dc3545; /* Vermelho para erro */
      color: white;
      border: none;
      border-radius: 50%; /* Torna o bot√£o redondo */
      width: 60px;
      height: 60px;
      font-size: 24px;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      z-index: 1000;
      display: none; /* Escondido por padr√£o */
      flex-direction: column; /* Para empilhar o √≠cone e o contador */
      padding: 5px; /* Ajuste o padding para acomodar texto maior */
      box-sizing: border-box; /* Garante que padding n√£o aumente o tamanho total */
      text-align: center;
    }

    .error-nav-btn:hover {
      background-color: #c82333;
    }

    .error-nav-btn .arrow-icon {
      font-size: 30px; /* Tamanho da seta */
      line-height: 1; /* Ajuste para centralizar */
    }

    .error-nav-btn .button-text {
      font-size: 12px; /* Tamanho do texto abaixo da seta */
      line-height: 1;
      margin-top: 2px; /* Espa√ßo entre a seta e o texto */
    }

    /* Estilos para a se√ß√£o de diagn√≥stico de erros */
    .error-diagnosis-section {
        margin-top: 50px;
        padding: 30px;
        background-color: #ffe0b2; /* Um laranja claro ou similar */
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.15);
        display: none; /* Escondido por padr√£o */
        text-align: center;
        font-size: 1.1em;
        color: #333;
    }

    .error-diagnosis-section h2 {
        color: #e65100; /* Laranja mais escuro */
        margin-bottom: 20px;
        font-size: 1.8em;
    }

    .error-diagnosis-section ul {
        list-style: none; /* Remove marcadores de lista */
        padding: 0;
        margin: 0;
    }

    .error-diagnosis-section li {
        background-color: #ff9800; /* Laranja */
        color: white;
        padding: 8px 15px;
        margin: 8px 0;
        border-radius: 5px;
        display: inline-block; /* Para que os itens fiquem lado a lado */
        margin-right: 10px;
        font-weight: bold;
    }
    .error-diagnosis-section li:last-child {
        margin-right: 0;
    }
 .card-bloco {
      border: 1px solid #ddd;
      border-radius: 6px;
      padding: 10px;
      background: #fff;
      margin-bottom: 20px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }
  </style>
</head>
<body>
  <div class="quiz-container">
    <h1 style="text-align:center; margin-bottom: 30px;">Metodologia de Revis√£o Sistem√°tica (PRISMA, PICO, Protocolos).</h1>
    <div class="card-bloco" id="quiz"></div>
    <button class="submit-btn" id="verifyAnswersBtn">Verificar Respostas</button>

    <button class="generate-questions-btn submit-btn" id="generateNewQuestionsBtn" style="display:none;">
      Gerar Novas Perguntas
    </button>

    <div class="results card-bloco" id="results"></div>
    <div id="statusMessage" style="text-align: center; margin-top: 10px; font-weight: bold; color: #007bff;"></div>

    <div class="error-diagnosis-section card-bloco" id="errorDiagnosis">
      <h2>Diagn√≥stico de Erros</h2>
      <p>Parece que voc√™ precisa revisar os seguintes assuntos:</p>
      <ul id="topicsToReview"></ul>
    </div>

    <div class="generated-questions-section card-bloco" id="generatedQuestionsSection" style="display:none;">
      <h2>Novas Perguntas Geradas</h2>
      <div id="newQuestionsContent"></div>
    </div>
  </div>
  
  <button class="error-nav-btn" id="errorNavBtn" style="display:none;">
    <span class="arrow-icon"></span>
    <span class="button-text"></span>
  </button>

  <script>
    const quizContainer = document.getElementById("quiz");
    const resultsContainer = document.getElementById("results");
    const errorNavBtn = document.getElementById("errorNavBtn");
    const arrowIcon = errorNavBtn.querySelector(".arrow-icon");
    const buttonText = errorNavBtn.querySelector(".button-text");
    const errorDiagnosisSection = document.getElementById("errorDiagnosis");
    const topicsToReviewList = document.getElementById("topicsToReview");
    const generateNewQuestionsBtn = document.getElementById("generateNewQuestionsBtn");
    const generatedQuestionsSection = document.getElementById("generatedQuestionsSection");
    const newQuestionsContent = document.getElementById("newQuestionsContent");
    const statusMessage = document.getElementById("statusMessage");

    let wrongQuestionIndices = [];
    let errorCountByTopic = {};
    let totalAnsweredQuestionsByTopic = {};
    let currentWrongQuestionIndex = -1;
    let hasErrors = false;
    let isShowingErrors = false;
    let isShowingDiagnosis = false;

    // Inicializa a visibilidade das se√ß√µes no carregamento
    errorDiagnosisSection.style.display = 'none';
    topicsToReviewList.innerHTML = '';
    statusMessage.textContent = '';

    const questions = [     {         question: "Qual √© o objetivo principal de uma revis√£o sistem√°tica? [1]",         options: [             "Apresentar a opini√£o de um especialista sobre um tema.",             "Realizar uma busca seletiva da literatura para fundamentar uma filosofia.",             "Responder a uma importante quest√£o cl√≠nica, identificando, avaliando criticamente e integrando resultados de estudos relevantes.",             "Descrever o panorama geral da pesquisa sobre um determinado t√≥pico.",         ],         correctAnswer: "Responder a uma importante quest√£o cl√≠nica, identificando, avaliando criticamente e integrando resultados de estudos relevantes.",         comment: "O objetivo principal de uma revis√£o sistem√°tica √© responder a uma quest√£o cl√≠nica importante atrav√©s da an√°lise criteriosa e integra√ß√£o de estudos existentes que abordem essa quest√£o.",         topic: "Conceitos de Revis√£o Sistem√°tica"     },     {         question: "Qual √© o primeiro passo fundamental para desenvolver uma revis√£o sistem√°tica? [5]",         options: [             "Realizar uma busca preliminar de informa√ß√µes.",             "Formular uma quest√£o clara e focalizada (pergunta chave).",             "Criar um protocolo de pesquisa.",             "Coletar dados dos estudos prim√°rios.",         ],         correctAnswer: "Formular uma quest√£o clara e focalizada (pergunta chave).",         comment: "O primeiro passo para uma revis√£o sistem√°tica √© a formula√ß√£o de uma quest√£o clara e focalizada, conhecida como pergunta chave. Todas as etapas subsequentes dependem diretamente dela.",         topic: "Etapas da Revis√£o Sistem√°tica"     },     {         question: "O que √© a pergunta chave em uma revis√£o sistem√°tica e qual sua import√¢ncia? [5]",         options: [             "√â um resumo dos resultados esperados e serve para obter financiamento.",             "√â a d√∫vida cl√≠nica principal que permeia o estudo e direciona todas as etapas da revis√£o sistem√°tica.",             "√â a lista de refer√™ncias bibliogr√°ficas a serem consultadas durante a pesquisa.",             "√â a descri√ß√£o detalhada dos materiais e m√©todos a serem utilizados.",         ],         correctAnswer: "√â a d√∫vida cl√≠nica principal que permeia o estudo e direciona todas as etapas da revis√£o sistem√°tica.",         comment: "A pergunta chave √© o alicerce do estudo; crit√©rios de busca, elegibilidade e coleta de dados s√£o todos derivados dessa d√∫vida inicial.",         topic: "Pergunta de Pesquisa"     },     {         question: "Qual acr√¥nimo √© recomendado para elaborar a pergunta chave de uma revis√£o sistem√°tica, e o que cada letra representa? [6]",         options: [             "SWOT: Strengths, Weaknesses, Opportunities, Threats.",             "PICO: Paciente, Interven√ß√£o, Compara√ß√£o, Outcome (Desfecho).",             "SMART: Specific, Measurable, Achievable, Relevant, Time-bound.",             "FISH: Factors, Issues, Solutions, Help.",         ],         correctAnswer: "PICO: Paciente, Interven√ß√£o, Compara√ß√£o, Outcome (Desfecho).",         comment: "O acr√¥nimo PICO organiza a d√∫vida cl√≠nica em: Paciente/Popula√ß√£o (P), Interven√ß√£o (I), Compara√ß√£o/Controle (C) e Outcome/Desfecho (O).",         topic: "Estrat√©gia PICO"     },     {         question: "Em uma pergunta chave estruturada no acr√¥nimo PICO, o que a letra 'C' representa? [6]",         options: [             "Conclus√£o.",             "Crit√©rios de Elegibilidade.",             "Compara√ß√£o ou Grupo Controle.",             "Coleta de Dados.",         ],         correctAnswer: "Compara√ß√£o ou Grupo Controle.",         comment: "A letra 'C' representa o padr√£o-ouro ou o grupo que n√£o recebeu a interven√ß√£o, servindo de base para comparar a efic√°cia do tratamento testado.",         topic: "Estrat√©gia PICO"     },     {         question: "Em uma pergunta chave estruturada no acr√¥nimo PICO, o que a letra 'O' representa? [6]",         options: ["Or√ßamento.", "Objetivo.", "Outcome ou Desfecho no estudo.", "Organiza√ß√£o."],         correctAnswer: "Outcome ou Desfecho no estudo.",         comment: "O 'Outcome' √© o resultado cl√≠nico esperado, como cura, redu√ß√£o de dor, mortalidade ou ganho de fun√ß√£o.",         topic: "Estrat√©gia PICO"     },     {         question: "A estrat√©gia PICO √© comparada a um quebra-cabe√ßa porque... [7]",         options: [             "Tiver um t√≠tulo claro e conciso.",             "Todas as quatro pe√ßas (P, I, C, O) estiverem juntas.",             "A busca preliminar for exaustiva.",             "O protocolo de pesquisa estiver registrado em uma base de dados.",         ],         correctAnswer: "Todas as quatro pe√ßas (P, I, C, O) estiverem juntas.",         comment: "A pergunta s√≥ √© considerada completa e pass√≠vel de execu√ß√£o t√©cnica quando os quatro elementos s√£o definidos com precis√£o.",         topic: "Estrat√©gia PICO"     },     {         question: "As revis√µes sistem√°ticas podem ser classificadas quanto ao seu objetivo. Quais s√£o exemplos de tais categorias? [8]",         options: [             "Pesquisas laboratoriais, pesquisas em animais, estudos observacionais.",             "Avalia√ß√£o de uma interven√ß√£o, progn√≥stico, diagn√≥stico, etiologia, preven√ß√£o.",             "Busca preliminar, busca bibliogr√°fica, coleta de dados, an√°lise de qualidade.",             "Protocolo de pesquisa, crit√©rios de elegibilidade, an√°lise estat√≠stica.",         ],         correctAnswer: "Avalia√ß√£o de uma interven√ß√£o, progn√≥stico, diagn√≥stico, etiologia, preven√ß√£o.",         comment: "Essa classifica√ß√£o foca na natureza da d√∫vida cl√≠nica que a revis√£o pretende sanar para o profissional de sa√∫de.",         topic: "Objetivos da Revis√£o"     },     {         question: "Qual √© o terceiro passo fundamental no desenvolvimento de uma revis√£o sistem√°tica? [9]",         options: [             "Formula√ß√£o da pergunta chave.",             "Cria√ß√£o do protocolo de pesquisa.",             "Busca preliminar de informa√ß√µes.",             "Determina√ß√£o dos crit√©rios de elegibilidade.",         ],         correctAnswer: "Busca preliminar de informa√ß√µes.",         comment: "O terceiro passo √© a busca explorat√≥ria, essencial para verificar a viabilidade do estudo e a exist√™ncia de revis√µes similares.",         topic: "Etapas da Revis√£o Sistem√°tica"     },     {         question: "Qual √© o principal objetivo da busca preliminar de informa√ß√µes? [10]",         options: [             "Identificar todos os estudos prim√°rios relevantes para a pergunta chave.",             "Verificar se a pergunta chave j√° foi respondida por uma revis√£o sistem√°tica existente.",             "Definir os crit√©rios de inclus√£o e exclus√£o de estudos.",             "Coletar dados dos estudos potencialmente eleg√≠veis.",         ],         correctAnswer: "Verificar se a pergunta chave j√° foi respondida por uma revis√£o sistem√°tica existente.",         comment: "A busca preliminar evita a duplicidade de esfor√ßos desnecess√°rios e ajuda a refinar a pergunta se j√° houver respostas s√≥lidas na literatura.",         topic: "Busca Bibliogr√°fica"     },     {         question: "Durante a busca preliminar, o pesquisador deve focar em procurar quais tipos de trabalhos? [11]",         options: [             "Artigos de estudos cl√≠nicos randomizados.",             "Estudos de coorte e laboratoriais.",             "Trabalhos espec√≠ficos de revis√£o sistem√°tica.",             "Estudos transversais e caso-controle.",         ],         correctAnswer: "Trabalhos espec√≠ficos de revis√£o sistem√°tica.",         comment: "Diferente da busca definitiva, a preliminar foca em encontrar 'revis√µes de revis√µes' para mapear o conhecimento j√° sintetizado.",         topic: "Busca Bibliogr√°fica"     },     {         question: "Se uma revis√£o sistem√°tica similar for encontrada na busca preliminar, isso encerra o projeto? [12, 13]",         options: [             "Sim, pois a pergunta j√° foi respondida e n√£o h√° necessidade de uma nova revis√£o.",             "N√£o necessariamente, pois fatores como a atualiza√ß√£o, m√©todos e evid√™ncias geradas pela revis√£o existente podem justificar uma nova revis√£o ou complementa√ß√£o.",             "Sim, a menos que a revis√£o encontrada apresente pl√°gio.",             "N√£o, pois a busca preliminar n√£o √© exaustiva e pode ter deixado de fora revis√µes importantes.",         ],         correctAnswer: "N√£o necessariamente, pois fatores como a atualiza√ß√£o, m√©todos e evid√™ncias geradas pela revis√£o existente podem justificar uma nova revis√£o ou complementa√ß√£o.",         comment: "Muitas vezes revis√µes antigas precisam de atualiza√ß√£o com novos ensaios cl√≠nicos ou possuem falhas metodol√≥gicas que justificam um novo estudo.",         topic: "Viabilidade da Revis√£o"     },     {         question: "Como o pesquisador deve proceder ao decidir realizar uma revis√£o sobre um tema que j√° possui trabalhos pr√©vios? [13]",         options: [             "Copiar a metodologia da revis√£o existente e apenas atualizar os resultados.",             "Publicar a nova revis√£o sem mencionar os trabalhos anteriores.",             "Ter motivos razo√°veis para justificar a nova revis√£o e descrever essa justificativa.",             "Considerar a revis√£o existente como pl√°gio e n√£o a citar.",         ],         correctAnswer: "Ter motivos razo√°veis para justificar a nova revis√£o e descrever essa justificativa.",         comment: "A transpar√™ncia cient√≠fica exige que o autor aponte as revis√µes anteriores e explique por que a sua nova abordagem √© necess√°ria.",         topic: "√âtica e Transpar√™ncia"     },     {         question: "Qual √© o quarto passo fundamental para se desenvolver uma revis√£o sistem√°tica? [14]",         options: [             "Busca bibliogr√°fica.",             "Defini√ß√£o dos crit√©rios de elegibilidade.",             "Cria√ß√£o de um protocolo de pesquisa.",             "Coleta de dados.",         ],         correctAnswer: "Cria√ß√£o de um protocolo de pesquisa.",         comment: "O protocolo funciona como o 'projeto' ou 'planta' da revis√£o, definindo as regras antes de iniciar a execu√ß√£o.",         topic: "Protocolo de Pesquisa"     },     {         question: "Por que a reda√ß√£o de um protocolo de pesquisa √© o 'padr√£o ouro' na escrita cient√≠fica? [15]",         options: [             "Porque garante que o trabalho ser√° publicado em um peri√≥dico de alto impacto.",             "Porque torna a revis√£o sistem√°tica transparente e reprodut√≠vel, evitando vieses e altera√ß√£o de crit√©rios posteriores.",             "Porque elimina a necessidade de busca bibliogr√°fica e coleta de dados.",             "Porque permite que apenas um autor realize a revis√£o sistem√°tica.",         ],         correctAnswer: "Porque torna a revis√£o sistem√°tica transparente e reprodut√≠vel, evitando vieses e altera√ß√£o de crit√©rios posteriores.",         comment: "O protocolo impede o 'cherry-picking' (sele√ß√£o seletiva de resultados favor√°veis) e garante que o m√©todo n√£o seja alterado para for√ßar um resultado.",         topic: "Protocolo de Pesquisa"     },     {         question: "Onde o projeto de revis√£o sistem√°tica deve ser registrado oficialmente? [15]",         options: [             "Em um peri√≥dico cient√≠fico.",             "Em uma base de registros de revis√µes sistem√°ticas.",             "Em um gerenciador bibliogr√°fico.",             "Em um software de an√°lise estat√≠stica.",         ],         correctAnswer: "Em uma base de registros de revis√µes sistem√°ticas.",         comment: "Bases como o PROSPERO servem para registrar o protocolo antes do in√≠cio da coleta de dados, garantindo transpar√™ncia p√∫blica.",         topic: "Registro de Protocolo"     },     {         question: "O que a reda√ß√£o pr√©via de um protocolo impede durante o desenvolvimento do estudo? [16]",         options: [             "A publica√ß√£o dos resultados em um artigo cient√≠fico.",             "A colabora√ß√£o de outros pesquisadores.",             "A altera√ß√£o de crit√©rios em momentos posteriores e a ocorr√™ncia de esfor√ßos duplicados.",             "A an√°lise estat√≠stica dos dados.",         ],         correctAnswer: "A altera√ß√£o de crit√©rios em momentos posteriores e a ocorr√™ncia de esfor√ßos duplicados.",         comment: "O registro p√∫blico avisa a outros pesquisadores que o tema j√° est√° sendo estudado, evitando que dois grupos fa√ßam o mesmo trabalho simultaneamente.",         topic: "Protocolo de Pesquisa"     },     {         question: "Quais diretrizes s√£o refer√™ncias para a reda√ß√£o e registro de protocolos? [18]",         options: [             "PubMed, LILACS, SciELO.",             "Coleta de Dados, An√°lise de Qualidade, Meta-an√°lise.",             "Cochrane, Pr√≥spero, Prisma P.",             "PICO, PICOS, PRISMA.",         ],         correctAnswer: "Cochrane, Pr√≥spero, Prisma P.",         comment: "O PRISMA-P (Preferred Reporting Items for Systematic Review and Meta-Analysis Protocols) √© o guia espec√≠fico para protocolos.",         topic: "Checklists e Diretrizes"     },     {         question: "O que sugere a exist√™ncia de grandes diferen√ßas entre o protocolo registrado e o artigo final submetido? [17]",         options: [             "Falta de tempo dos autores para seguir o protocolo.",             "Falta de transpar√™ncia dos autores por oculta√ß√£o de dados possivelmente desfavor√°veis.",             "Aprimoramento da metodologia durante a execu√ß√£o do trabalho.",             "A relev√¢ncia da pergunta chave mudou ao longo do tempo.",         ],         correctAnswer: "Falta de transpar√™ncia dos autores por oculta√ß√£o de dados possivelmente desfavor√°veis.",         comment: "Mudan√ßas injustificadas nos crit√©rios ap√≥s ver os resultados dos estudos prim√°rios sugerem manipula√ß√£o para obter desfechos espec√≠ficos.",         topic: "Integridade Cient√≠fica"     },     {         question: "Qual √© o quinto passo fundamental para realizar uma revis√£o sistem√°tica? [19]",         options: [             "Cria√ß√£o do protocolo de pesquisa.",             "Busca bibliogr√°fica de dados.",             "Defini√ß√£o dos crit√©rios de elegibilidade.",             "Coleta de dados.",         ],         correctAnswer: "Busca bibliogr√°fica de dados.",         comment: "A busca definitiva √© a fase de 'minera√ß√£o' onde todos os estudos relevantes s√£o localizados seguindo a estrat√©gia PICO.",         topic: "Busca Bibliogr√°fica"     },     {         question: "Qual etapa representa cerca de 80% do n√≠vel de qualidade de uma revis√£o sistem√°tica? [19]",         options: [             "Formula√ß√£o da pergunta chave.",             "Cria√ß√£o do protocolo de pesquisa.",             "Busca bibliogr√°fica.",             "An√°lise estat√≠stica.",         ],         correctAnswer: "Busca bibliogr√°fica.",         comment: "Uma revis√£o sistem√°tica √© t√£o boa quanto a busca que a originou. Se estudos importantes ficarem de fora, a conclus√£o ser√° enviesada ou incompleta.",         topic: "Busca Bibliogr√°fica"     },     {         question: "A busca bibliogr√°fica rigorosa deve contemplar quais tipos de fontes? [19]",         options: [             "Apenas bases de dados eletr√¥nicas de artigos cient√≠ficos.",             "Somente a literatura cinzenta.",             "Bases de dados eletr√¥nicas e a literatura cinzenta.",             "Exclusivamente estudos cl√≠nicos randomizados.",         ],         correctAnswer: "Bases de dados eletr√¥nicas e a literatura cinzenta.",         comment: "Bases eletr√¥nicas (PubMed, Embase) s√£o essenciais, mas a literatura cinzenta (teses, anais de congresso) ajuda a reduzir o vi√©s de publica√ß√£o.",         topic: "Fontes de Dados"     },     {         question: "Al√©m das bases eletr√¥nicas, quais fontes ajudam a minimizar o vi√©s de publica√ß√£o? [19]",         options: [             "Redes sociais e blogs.",             "Busca manual, leitura de listas de refer√™ncias e literatura cinzenta.",             "Artigos de opini√£o de especialistas.",             "Livros did√°ticos e enciclop√©dias.",         ],         correctAnswer: "Busca manual, leitura de listas de refer√™ncias e literatura cinzenta.",         comment: "A busca manual e a leitura das refer√™ncias dos artigos inclu√≠dos ('snowballing') garantem que estudos n√£o indexados sejam capturados.",         topic: "Fontes de Dados"     },     {         question: "Qual a fun√ß√£o dos vocabul√°rios controlados (MeSH/DeCS) na defini√ß√£o das palavras-chave? [19]",         options: [             "Para limitar a busca a um n√∫mero reduzido de artigos.",             "Para garantir que a busca seja realizada apenas em uma base de dados.",             "Para identificar palavras que representem os assuntos da pesquisa e seus sin√¥nimos nas diferentes bases de dados.",             "Para excluir artigos que n√£o se encaixam na pergunta chave.",         ],         correctAnswer: "Para identificar palavras que representem os assuntos da pesquisa e seus sin√¥nimos nas diferentes bases de dados.",         comment: "Termos controlados garantem que, independentemente do termo usado pelo autor original, o artigo seja encontrado pelo assunto indexado.",         topic: "Estrat√©gia de Busca"     },     {         question: "Sobre os operadores booleanos na estrat√©gia de busca, qual a fun√ß√£o correta de cada um? [19]",         options: [             "ADD, SUBTRACT, MULTIPLY.",             "AND, OR, NOT.",             "IF, THEN, ELSE.",             "SUM, AVERAGE, COUNT.",         ],         correctAnswer: "AND, OR, NOT.",         comment: "OR agrupa sin√¥nimos (amplia); AND cruza conceitos diferentes do PICO (restringe); NOT exclui termos indesejados.",         topic: "Estrat√©gia de Busca"     },     {         question: "Qual √© o sexto passo fundamental para realizar a revis√£o sistem√°tica? [20]",         options: [             "Busca bibliogr√°fica.",             "Coleta de dados.",             "Defini√ß√£o de crit√©rios de elegibilidade.",             "An√°lise de qualidade dos estudos.",         ],         correctAnswer: "Defini√ß√£o de crit√©rios de elegibilidade.",         comment: "Estes crit√©rios (Inclus√£o/Exclus√£o) filtram os resultados brutos da busca para manter apenas o que √© cientificamente relevante para a pergunta.",         topic: "Crit√©rios de Elegibilidade"     },     {         question: "O que distingue a revis√£o sistem√°tica da narrativa quanto aos crit√©rios de sele√ß√£o? [21]",         options: [             "A revis√£o narrativa n√£o utiliza crit√©rios de elegibilidade.",             "A revis√£o sistem√°tica n√£o possui crit√©rios de elegibilidade.",             "A revis√£o sistem√°tica tem pr√©-defini√ß√£o de crit√©rios de elegibilidade (inclus√£o e exclus√£o), enquanto a revis√£o narrativa n√£o.",             "Ambas utilizam os mesmos crit√©rios de elegibilidade.",         ],         correctAnswer: "A revis√£o sistem√°tica tem pr√©-defini√ß√£o de crit√©rios de elegibilidade (inclus√£o e exclus√£o), enquanto a revis√£o narrativa n√£o.",         comment: "Na narrativa, o autor escolhe os artigos que deseja; na sistem√°tica, os crit√©rios s√£o fixos e aplicados imparcialmente.",         topic: "Sistem√°tica vs Narrativa"     },     {         question: "Os crit√©rios de elegibilidade abrangem quais descri√ß√µes do estudo? [21]",         options: [             "Apenas aos participantes do trabalho.",             "Apenas √†s interven√ß√µes e compara√ß√µes.",             "Apenas aos desfechos do estudo.",             "√Ä descri√ß√£o detalhada dos participantes, interven√ß√µes, compara√ß√µes e desfechos.",         ],         correctAnswer: "√Ä descri√ß√£o detalhada dos participantes, interven√ß√µes, compara√ß√µes e desfechos.",         comment: "Os crit√©rios de elegibilidade s√£o o espelho pr√°tico da estrat√©gia PICO definida inicialmente.",         topic: "Crit√©rios de Elegibilidade"     },     {         question: "Ap√≥s definidos, os crit√©rios de elegibilidade devem ser documentados no: [22]",         options: [             "Apenas na se√ß√£o de resultados do artigo final.",             "Apenas em um gerenciador bibliogr√°fico.",             "Em um protocolo de pesquisa.",             "Em uma base de dados de estudos prim√°rios.",         ],         correctAnswer: "Em um protocolo de pesquisa.",         comment: "A documenta√ß√£o pr√©via no protocolo garante que o pesquisador n√£o mude as 'regras do jogo' ap√≥s ver quais estudos foram encontrados.",         topic: "Protocolo de Pesquisa"     },     {         question: "O que o protocolo PRISMA recomenda para detalhar a sele√ß√£o de estudos na metodologia? [22]",         options: [             "Uma tabela com todos os estudos inclu√≠dos.",             "Um fluxograma padronizado.",             "Uma lista de palavras-chave.",             "Um gr√°fico de barras.",         ],         correctAnswer: "Um fluxograma padronizado.",         comment: "O fluxograma PRISMA mostra visualmente o caminho desde os milhares de artigos identificados at√© o n√∫mero final inclu√≠do.",         topic: "Diretriz PRISMA"     },     {         question: "No fluxograma PRISMA, o termo 'estudos identificados' refere-se a: [23]",         options: [             "Todos os trabalhos exclu√≠dos ap√≥s a leitura do texto completo.",             "Todos os estudos localizados nas diversas bases de dados ap√≥s a aplica√ß√£o das estrat√©gias de busca.",             "Todos os estudos inclu√≠dos na an√°lise final.",             "Todos os estudos potencialmente eleg√≠veis ap√≥s a leitura de t√≠tulo e resumo.",         ],         correctAnswer: "Todos os estudos localizados nas diversas bases de dados ap√≥s a aplica√ß√£o das estrat√©gias de busca.",         comment: "Este √© o topo do funil, representando o estado bruto dos resultados da busca bibliogr√°fica.",         topic: "Fluxograma PRISMA"     },     {         question: "No fluxograma PRISMA, os 'estudos inclu√≠dos' s√£o: [24]",         options: [             "Todos os estudos que n√£o se enquadram nos crit√©rios de elegibilidade.",             "Todos os estudos potencialmente eleg√≠veis ap√≥s a leitura de t√≠tulo e resumo.",             "Todos os trabalhos selecionados ap√≥s a leitura integral e que preenchem todos os crit√©rios de elegibilidade.",             "Todos os estudos exclu√≠dos ap√≥s a leitura de texto completo.",         ],         correctAnswer: "Todos os trabalhos selecionados ap√≥s a leitura integral e que preenchem todos os crit√©rios de elegibilidade.",         comment: "Estes s√£o os artigos que fornecer√£o os dados para a s√≠ntese qualitativa e, se poss√≠vel, quantitativa (meta-an√°lise).",         topic: "Fluxograma PRISMA"     },     {         question: "Qual √© o s√©timo passo fundamental para realizar uma revis√£o sistem√°tica? [25]",         options: [             "Defini√ß√£o dos crit√©rios de elegibilidade.",             "Busca bibliogr√°fica.",             "Coleta de dados.",             "An√°lise de qualidade.",         ],         correctAnswer: "Coleta de dados.",         comment: "Tamb√©m chamada de extra√ß√£o de dados, √© a fase onde se 'minera' a informa√ß√£o necess√°ria de dentro dos artigos selecionados.",         topic: "Etapas da Revis√£o Sistem√°tica"     },     {         question: "Como deve ser feita a extra√ß√£o ou coleta de dados para garantir o rigor? [25]",         options: [             "Atrav√©s da leitura integral de todos os artigos e anota√ß√£o livre das informa√ß√µes.",             "Atrav√©s de uma ficha ou formul√°rio padr√£o elaborado previamente.",             "Atrav√©s de um software de an√°lise estat√≠stica.",             "Atrav√©s da consulta aos autores dos estudos prim√°rios.",         ],         correctAnswer: "Atrav√©s de uma ficha ou formul√°rio padr√£o elaborado previamente.",         comment: "O uso de um formul√°rio padronizado garante que a mesma informa√ß√£o seja coletada de todos os estudos, permitindo a compara√ß√£o posterior.",         topic: "Coleta de Dados"     },     {         question: "Quem deve realizar a extra√ß√£o de dados e como resolver conflitos? [25]",         options: [             "Apenas um revisor, para garantir a consist√™ncia.",             "Dois revisores que trabalham independentemente; discrep√¢ncias s√£o resolvidas por um terceiro revisor ou reuni√£o de consenso.",             "Apenas o autor principal da revis√£o sistem√°tica.",             "Um estat√≠stico, para garantir a precis√£o dos dados.",         ],         correctAnswer: "Dois revisores que trabalham independentemente; discrep√¢ncias s√£o resolvidas por um terceiro revisor ou reuni√£o de consenso.",         comment: "O trabalho em dupla independente minimiza o erro humano e o vi√©s subjetivo na interpreta√ß√£o dos dados.",         topic: "Coleta de Dados"     },     {         question: "Qual √© o nono passo fundamental abordado no desenvolvimento da revis√£o? [26]",         options: [             "Coleta de dados.",             "An√°lise estat√≠stica (meta-an√°lise).",             "An√°lise de qualidade dos estudos.",             "Reda√ß√£o do relat√≥rio.",         ],         correctAnswer: "An√°lise de qualidade dos estudos.",         comment: "Avaliar o 'Risco de Vi√©s' √© vital para saber se podemos confiar nos resultados dos estudos que inclu√≠mos.",         topic: "Qualidade Metodol√≥gica"     },     {         question: "Por que avaliar a qualidade e o risco de vi√©s dos artigos inclu√≠dos? [26]",         options: [             "Para aumentar o n√∫mero de artigos inclu√≠dos na an√°lise.",             "Para justificar a exclus√£o de artigos da revis√£o.",             "Para determinar a confiabilidade das conclus√µes da revis√£o sistem√°tica.",             "Para facilitar a publica√ß√£o do trabalho em um peri√≥dico cient√≠fico.",         ],         correctAnswer: "Para determinar a confiabilidade das confiabilidade das conclus√µes da revis√£o sistem√°tica.",         comment: "Se os estudos originais forem ruins, a revis√£o sistem√°tica tamb√©m ter√° conclus√µes fracas. 'Lixo entra, lixo sai'.",         topic: "Qualidade Metodol√≥gica"     },     {         question: "Qual a diferen√ßa entre qualidade metodol√≥gica e risco de vi√©s? [26]",         options: [             "S√£o termos sin√¥nimos e se referem ao mesmo processo.",             "A avalia√ß√£o de qualidade metodol√≥gica quantifica o impacto da qualidade, enquanto a an√°lise do risco de vi√©s estima o seu efeito.",             "A avalia√ß√£o de qualidade metodol√≥gica se aplica a ensaios cl√≠nicos, enquanto a an√°lise de risco de vi√©s se aplica a estudos observacionais.",             "A avalia√ß√£o de qualidade √© subjetiva, enquanto a an√°lise de risco de vi√©s √© objetiva.",         ],         correctAnswer: "A avalia√ß√£o de qualidade metodol√≥gica quantifica o impacto da qualidade, enquanto a an√°lise do risco de vi√©s estima o seu efeito.",         comment: "Um estudo pode ter boa qualidade (foi bem relatado), mas alto risco de vi√©s (ex: falta de cegamento que distorce o resultado).",         topic: "Qualidade vs Vi√©s"     },     {         question: "Quais s√£o exemplos de ferramentas para avaliar risco de vi√©s ou certeza da evid√™ncia? [26]",         options: [             "PICO, PRISMA, MECIR.",             "Delphi, Jadad, Pedro, Newcastle-Ottawa, GRADE.",             "PubMed, LILACS, Web of Science.",             "EndNote, Mendeley, Zotero.",         ],         correctAnswer: "Delphi, Jadad, Pedro, Newcastle-Ottawa, GRADE.",         comment: "Ferramentas como Jadad/Pedro s√£o para ensaios cl√≠nicos, Newcastle-Ottawa para observacionais e GRADE para a evid√™ncia global.",         topic: "Ferramentas de Avalia√ß√£o"     },     {         question: "Escalas de qualidade t√™m o poder de excluir artigos da revis√£o? [26]",         options: [             "Sim, as escalas de qualidade determinam a conclus√£o final e quais artigos devem ser exclu√≠dos.",             "N√£o, as escalas de qualidade ajudam a dizer o qu√£o fortes ou confi√°veis s√£o as conclus√µes, mas a exclus√£o √© feita pelos crit√©rios de elegibilidade.",             "Sim, se a pontua√ß√£o de qualidade for baixa, o artigo deve ser exclu√≠do.",             "Apenas a meta-an√°lise tem o poder de mudar a conclus√£o do trabalho.",         ],         correctAnswer: "N√£o, as escalas de qualidade ajudam a dizer o qu√£o fortes ou confi√°veis s√£o as conclus√µes, mas a exclus√£o √© feita pelos crit√©rios de elegibilidade.",         comment: "Artigos de 'baixa qualidade' geralmente s√£o mantidos, mas o autor avisa ao leitor que a evid√™ncia resultante √© fraca ou incerta.",         topic: "Qualidade Metodol√≥gica"     } ];

    function buildQuiz() {
      const output = [];

      questions.forEach((currentQuestion, questionNumber) => {
        const options = [];
        for (let i = 0; i < currentQuestion.options.length; i++) {
          options.push(
            `<label class="option" data-question="${questionNumber}" data-value="${currentQuestion.options[i]}">
              <img src="tesouras.png" class="scissor-icon" onclick="event.stopPropagation(); this.parentNode.classList.toggle('struck-through');">
              ${currentQuestion.options[i]}
            </label>`
          );
        }

        output.push(
          `<div class="card" id="question-${questionNumber}" data-topic="${currentQuestion.topic}">
            <div class="question">${currentQuestion.question}</div>
            <div class="options">${options.join("")}</div>
            <div class="comment" id="comment-${questionNumber}"></div>
          </div>`
        );
      });

      quizContainer.innerHTML = output.join("");
    }

    function showResults() {
      wrongQuestionIndices = [];
      errorCountByTopic = {};
      totalAnsweredQuestionsByTopic = {};
      currentWrongQuestionIndex = -1;
      hasErrors = false;
      isShowingErrors = false;
      isShowingDiagnosis = false;

      errorDiagnosisSection.style.display = 'none';
      topicsToReviewList.innerHTML = '';
      statusMessage.textContent = '';

      // Busca por todas as perguntas: est√°ticas e din√¢micas
      const allQuestionCards = document.querySelectorAll('.quiz-container .card, #newQuestionsContent .card');
      let correctAnswersCount = 0;
      let totalQuestionsAnswered = 0;

      console.log('üîç Verificando', allQuestionCards.length, 'perguntas...');

      allQuestionCards.forEach((card, index) => {
        const questionEl = card.querySelector('.question') || card.querySelector('p');
        if (!questionEl) return;

        const questionText = questionEl.textContent.trim();
        const optionsContainer = card.querySelector('.options') || card;
        const allOptions = optionsContainer.querySelectorAll('.option, label.option, label');
        const userAnswerElement = optionsContainer.querySelector('.option.selected, label.selected');
        const commentDiv = card.querySelector('.comment');

        const questionTopic = card.dataset.topic || "T√≥pico n√£o informado";
        
        console.log(`üìù Pergunta ${index + 1}: T√≥pico = "${questionTopic}"`);
        console.log(`üîç Encontradas ${allOptions.length} alternativas`);
        
        // Remove classes anteriores
        allOptions.forEach(option => {
          option.classList.remove('correct', 'incorrect', 'selected');
        });
        if (commentDiv) commentDiv.classList.remove('show');

        let correctAnswerValue = null;
        let questionComment = null;

        // Verifica se √© pergunta est√°tica ou din√¢mica
        const isStatic = card.id && card.id.startsWith('question-');
        if (isStatic) {
          // Pergunta est√°tica - busca nos dados originais
          const questionData = questions.find(q => q.question.trim() === questionText);
          if (questionData) {
            correctAnswerValue = questionData.correctAnswer.trim();
            questionComment = questionData.comment;
          }
        } else {
          // Pergunta din√¢mica - busca pela op√ß√£o marcada como correta
          const correctOpt = optionsContainer.querySelector('.option[data-answer="true"], label[data-answer="true"]');
          if (correctOpt) {
            correctAnswerValue = correctOpt.dataset.value?.trim() || correctOpt.textContent.trim();
            console.log(`‚úÖ Resposta correta encontrada: "${correctAnswerValue}"`);
          } else {
            console.log('‚ùå Nenhuma resposta correta encontrada para pergunta din√¢mica');
          }
          
          // Busca coment√°rio no pr√≥prio card ou no div comment
          const commentElement = card.querySelector('.comment');
          if (commentElement && commentElement.textContent.trim()) {
            questionComment = commentElement.textContent.trim();
          }
        }

        // Processa resposta do usu√°rio e aplica colora√ß√£o
        let userAnswer = null;
        if (userAnswerElement) {
          userAnswerElement.classList.add('selected');
          userAnswer = userAnswerElement.dataset.value?.trim() || userAnswerElement.textContent.trim();
          totalQuestionsAnswered++;
          totalAnsweredQuestionsByTopic[questionTopic] = (totalAnsweredQuestionsByTopic[questionTopic] || 0) + 1;

          console.log(`üë§ Resposta do usu√°rio: "${userAnswer}"`);
          console.log(`üéØ Resposta correta: "${correctAnswerValue}"`);

          // Verifica se a resposta est√° correta
          if (userAnswer === correctAnswerValue) {
            correctAnswersCount++;
            console.log(`‚úÖ Resposta correta!`);
          } else {
            hasErrors = true;
            errorCountByTopic[questionTopic] = (errorCountByTopic[questionTopic] || 0) + 1;
            console.log(`‚ùå Resposta incorreta para t√≥pico: ${questionTopic}`);
          }
        }

        // Aplica colora√ß√£o: SEMPRE marca a correta de verde, e a errada de vermelho se foi marcada
        allOptions.forEach(option => {
          const optionValue = option.dataset.value?.trim() || option.textContent.trim();
          
          // Marca a resposta correta de verde SEMPRE
          if (optionValue === correctAnswerValue) {
            option.classList.add('correct');
            console.log(`üü¢ Marcando como correta: "${optionValue}"`);
          }
          
          // Se o usu√°rio marcou uma resposta E ela est√° errada, marca de vermelho
          if (userAnswer && optionValue === userAnswer && userAnswer !== correctAnswerValue) {
            option.classList.add('incorrect');
            console.log(`üî¥ Marcando como incorreta: "${optionValue}"`);
          }
        });

        // Mostra coment√°rio se dispon√≠vel
        if (commentDiv && questionComment) {
          commentDiv.textContent = questionComment;
          commentDiv.classList.add('show');
        }
      });

      // Exibe resultados
      resultsContainer.textContent = `Voc√™ acertou ${correctAnswersCount} de ${totalQuestionsAnswered} quest√µes respondidas.`;

      console.log('üìä Erros por t√≥pico:', errorCountByTopic);
      console.log('üìä Total por t√≥pico:', totalAnsweredQuestionsByTopic);

      // Gera diagn√≥stico de erros
      if (hasErrors) {
        for (const topic in errorCountByTopic) {
          const errors = errorCountByTopic[topic];
          const total = totalAnsweredQuestionsByTopic[topic] || 0;
          if (total > 0) {
            const percent = ((errors / total) * 100).toFixed(1);
            const li = document.createElement('li');
            li.textContent = `${topic}: ${percent}% de erros (${errors} de ${total} quest√µes respondidas)`;
            topicsToReviewList.appendChild(li);
          }
        }
      } else {
        const li = document.createElement('li');
        li.textContent = "ü•≥ Parab√©ns! Voc√™ n√£o teve erros nas quest√µes respondidas.";
        topicsToReviewList.appendChild(li);
      }

      errorDiagnosisSection.style.display = 'block';
      generatedQuestionsSection.style.display = 'block';
      generateNewQuestionsBtn.style.display = 'block';
      scrollToDiagnosis();
    }

    function scrollToQuestion(index) {
      const questionCard = document.getElementById(`question-${index}`);
      if (questionCard) {
        questionCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }
    }

    function scrollToDiagnosis() {
        errorDiagnosisSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    function scrollToGeneratedQuestions() {
        generatedQuestionsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // Event listener para sele√ß√£o de op√ß√µes (funciona para est√°ticas e din√¢micas)
    document.addEventListener("click", function (event) {
      const clickedElement = event.target;
      const optionElement = clickedElement.closest('.option');

      if (optionElement) {
          if (clickedElement.classList.contains("scissor-icon")) {
              event.stopPropagation();
              optionElement.classList.toggle("struck-through");
          }
          else {
              const parentCard = optionElement.closest('.card');
              const currentQuestionOptions = parentCard.querySelectorAll('.option');

              currentQuestionOptions.forEach(opt => opt.classList.remove("selected"));
              optionElement.classList.add("selected");
          }
      }
    });

    generateNewQuestionsBtn.addEventListener("click", async function() {
        statusMessage.textContent = '‚è≥ Gerando novas perguntas...';
        generateNewQuestionsBtn.disabled = true;

        const topics = Object.keys(errorCountByTopic).filter(topic => {
            const errorsInTopic = errorCountByTopic[topic] || 0;
            const totalAnsweredInTopic = totalAnsweredQuestionsByTopic[topic] || 0;
            return errorsInTopic > 0 && totalAnsweredInTopic > 0;
        });

        const topicsToSend = topics.length > 0 ? topics : ["fisiologia celular", "biologia"];

        try {
            const response = await fetch('https://www.quizia.xyz/quiz', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ topicos: topicsToSend }),
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();

            newQuestionsContent.innerHTML = '';
            if (data && data.html) {
                console.log('üì• HTML recebido do Flask:', data.html);
                
                // Insere o HTML diretamente sem reconstru√ß√£o complexa
                newQuestionsContent.innerHTML = data.html.replace(/```html|```/g, '');
                
                // Adiciona tesouras e ajusta formata√ß√£o apenas se necess√°rio
                newQuestionsContent.querySelectorAll('.card').forEach((card, cardIndex) => {
                    // Garante que o elemento de pergunta tenha a classe correta
                    const questionElement = card.querySelector('p');
                    if (questionElement && !questionElement.classList.contains('question')) {
                       questionElement.classList.add('question');
                    }

                    // Remove qualquer input de radio que possa existir e adiciona tesouras
                    card.querySelectorAll('label').forEach((label) => {
                        // Remove inputs de radio MAS preserva o atributo data-answer
                        const radioInput = label.querySelector('input[type="radio"]');
                        if (radioInput) {
                            // PRESERVA o atributo data-answer do input no label
                            if (radioInput.hasAttribute('data-answer')) {
                                label.setAttribute('data-answer', radioInput.getAttribute('data-answer'));
                            }
                            radioInput.remove();
                        }
                        
                        // Garante que tenha a classe option
                        if (!label.classList.contains('option')) {
                            label.classList.add('option');
                        }

                        // Garante que tenha data-value
                        if (!label.dataset.value) {
                            label.dataset.value = label.textContent.trim();
                        }

                        // Adiciona tesoura se n√£o existir
                        if (!label.querySelector('.scissor-icon')) {
                            const scissorIcon = document.createElement('img');
                            scissorIcon.src = 'tesouras.png';
                            scissorIcon.className = 'scissor-icon';
                            scissorIcon.onclick = function(e) {
                                e.stopPropagation();
                                label.classList.toggle('struck-through');
                            };
                            label.insertBefore(scissorIcon, label.firstChild);
                        }
                    });

                    console.log(`üè∑Ô∏è Card ${cardIndex}: data-topic = "${card.dataset.topic}"`);
                    
                    // Verifica se h√° op√ß√£o correta marcada
                    const correctOption = card.querySelector('label[data-answer="true"]');
                    if (correctOption) {
                        console.log(`‚úÖ Op√ß√£o correta encontrada: "${correctOption.dataset.value}"`);
                    } else {
                        console.log('‚ùå Nenhuma op√ß√£o correta encontrada');
                    }
                });
            } else {
                newQuestionsContent.innerHTML = "<p>N√£o foi poss√≠vel gerar novas perguntas para os t√≥picos selecionados.</p>";
            }
            
            generatedQuestionsSection.style.display = 'block';
            scrollToGeneratedQuestions();
            statusMessage.textContent = '‚úÖ Perguntas geradas com sucesso!';
            setTimeout(() => { statusMessage.textContent = '' }, 3000);

        } catch (error) {
            console.error('Erro ao gerar novas perguntas:', error);
            newQuestionsContent.innerHTML = `<p>Erro ao carregar novas perguntas: ${error.message}. Por favor, tente novamente.</p>`;
            generatedQuestionsSection.style.display = 'block';
            scrollToGeneratedQuestions();
            statusMessage.textContent = '‚ùå Erro na requisi√ß√£o: ' + error.message;
            setTimeout(() => { statusMessage.textContent = '' }, 5000);
        } finally {
            generateNewQuestionsBtn.disabled = false;
        }
    });

    // Inicializa√ß√£o
    buildQuiz();
    errorDiagnosisSection.style.display = 'none';
    generatedQuestionsSection.style.display = 'none';
    generateNewQuestionsBtn.style.display = 'none';

    // Event listener para o bot√£o de verificar respostas
    document.getElementById("verifyAnswersBtn").addEventListener("click", showResults);
  </script>
  <script src="conexao_firebase.js"></script><script src="navegacao.js"></script><script type="module" src="padrao_simulado.js"></script>

</body>
</html>
