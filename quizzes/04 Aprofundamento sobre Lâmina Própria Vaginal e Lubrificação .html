
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>04 Aprofundamento sobre L√¢mina Pr√≥pria Vaginal e Lubrifica√ß√£o </title>
    <style>
        body { font-family: sans-serif; margin: 0; padding: 20px; display: flex; justify-content: center; align-items: flex-start; min-height: 100vh; background-color: #f4f4f4; }
        .quiz-container { max-width: 800px; width: 100%; }
        h1 { color: #333; text-align: center; margin-bottom: 30px; }
        .card { background-color: white; border-radius: 8px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); }
        .question { font-weight: bold; margin-bottom: 10px; color: #333; }
        .options { margin-top: 15px; }
        
        /* Estilos das op√ß√µes */
        .option, label.option, label, #newQuestionsContent label { display: flex; align-items: center; margin-bottom: 10px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; cursor: pointer; transition: background-color 0.2s ease; position: relative; }
        
        /* Ocultar Radio inputs */
        .option input[type="radio"], label input[type="radio"], #newQuestionsContent input[type="radio"], #newQuestionsContent label input[type="radio"] { display: none !important; visibility: hidden !important; opacity: 0 !important; position: absolute !important; left: -9999px !important; }
        
        .option:hover, label.option:hover, label:hover, #newQuestionsContent label:hover { background-color: #e9e9e9; }
        .option.selected, label.option.selected, label.selected, #newQuestionsContent label.selected { background-color: #d1e7dd; border-color: #28a745; }
        .option.correct, label.option.correct, label.correct, #newQuestionsContent label.correct { background-color: #d4edda; border-color: #28a745; }
        .option.incorrect, label.option.incorrect, label.incorrect, #newQuestionsContent label.incorrect { background-color: #f8d7da; border-color: #dc3545; }
        
        .submit-btn { display: block; width: 100%; padding: 15px; background-color: #007bff; color: white; border: none; border-radius: 5px; font-size: 18px; cursor: pointer; transition: background-color 0.3s ease; margin-top: 30px; }
        .submit-btn:hover { background-color: #0056b3; }
        
        .results { text-align: center; margin-top: 30px; font-size: 20px; font-weight: bold; color: #333; }
        .scissor-icon { margin-right: 10px; width: 20px; height: 20px; opacity: 0.5; cursor: pointer; }
        .scissor-icon.hidden { display: none; }
        .struck-through { text-decoration: line-through; color: #888; }
        
        .comment { margin-top: 10px; padding: 10px; background-color: #f0f0f0; border-left: 4px solid #007bff; font-style: italic; color: #555; display: none; }
        .comment.show { display: block; }
        
        .card-bloco { border: 1px solid #ddd; border-radius: 6px; padding: 10px; background: #fff; margin-bottom: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        
        /* Diagn√≥stico e Erros */
        .error-diagnosis-section { margin-top: 50px; padding: 30px; background-color: #ffe0b2; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.15); display: none; text-align: center; font-size: 1.1em; color: #333; }
        .error-diagnosis-section h2 { color: #e65100; margin-bottom: 20px; font-size: 1.8em; }
        .error-diagnosis-section ul { list-style: none; padding: 0; margin: 0; }
        .error-diagnosis-section li { background-color: #ff9800; color: white; padding: 8px 15px; margin: 8px 0; border-radius: 5px; display: inline-block; margin-right: 10px; font-weight: bold; }
    </style>
</head>
<body>

    <div class="quiz-container" id="quiz-container">
        <h1>04 Aprofundamento sobre L√¢mina Pr√≥pria Vaginal e Lubrifica√ß√£o </h1>
        
        <div id="quiz"></div>
        
        <button class="submit-btn" id="verifyAnswersBtn">Verificar Respostas</button>
        <button class="generate-questions-btn submit-btn" id="generateNewQuestionsBtn" style="display:none;">Gerar Novas Perguntas</button>
        
        <div class="results card-bloco" id="results"></div>
        <div id="statusMessage" style="text-align: center; margin-top: 10px; font-weight: bold; color: #007bff;"></div>
        
        <div class="error-diagnosis-section card-bloco" id="errorDiagnosis">
            <h2>Diagn√≥stico de Erros</h2>
            <p>Parece que voc√™ precisa revisar os seguintes assuntos:</p>
            <ul id="topicsToReview"></ul>
        </div>
        
        <div class="generated-questions-section card-bloco" id="generatedQuestionsSection" style="display:none;">
            <h2>Novas Perguntas Geradas</h2>
            <div id="newQuestionsContent"></div>
        </div>
    </div>

<script>
    const quizContainer = document.getElementById("quiz");
    const resultsContainer = document.getElementById("results");
    const errorDiagnosisSection = document.getElementById("errorDiagnosis");
    const topicsToReviewList = document.getElementById("topicsToReview");
    const generateNewQuestionsBtn = document.getElementById("generateNewQuestionsBtn");
    const generatedQuestionsSection = document.getElementById("generatedQuestionsSection");
    const newQuestionsContent = document.getElementById("newQuestionsContent");
    const statusMessage = document.getElementById("statusMessage");

    let wrongQuestionIndices = [];
    let errorCountByTopic = {};  // CORRIGIDO: chaves duplas para objeto JS vazio
    let totalAnsweredQuestionsByTopic = {}; // CORRIGIDO
    let currentWrongQuestionIndex = -1;
    let hasErrors = false;

    // Inicializa display
    errorDiagnosisSection.style.display = 'none';
    topicsToReviewList.innerHTML = '';
    statusMessage.textContent = '';

    // AQUI entra a vari√°vel Python, ent√£o usamos chaves simples:
    const questions = [ {
  question: "Qual das seguintes n√£o √© uma fun√ß√£o primordial do sistema reprodutor feminino, conforme contextualizado na aula?",
  options: [
    "A) Produ√ß√£o de gametas (o√≥citos).",
    "B) Produ√ß√£o de horm√¥nios sexuais.",
    "C) Manuten√ß√£o e desenvolvimento do embri√£o/feto.",
    "D) Regula√ß√£o da temperatura corporal."
  ],
  correctAnswer: "D) Regula√ß√£o da temperatura corporal.",
  comment: "As fun√ß√µes primordiais do sistema reprodutor feminino s√£o a produ√ß√£o de gametas, a produ√ß√£o de horm√¥nios sexuais e a manuten√ß√£o e desenvolvimento do embri√£o/feto.",
  topic: "Introdu√ß√£o ao Sistema Genital Feminino"
},
{
  question: "O epit√©lio que reveste a camada mucosa da vagina √© classificado como:",
  options: [
    "A) Epit√©lio simples colunar.",
    "B) Epit√©lio estratificado pavimentoso queratinizado.",
    "C) Epit√©lio estratificado pavimentoso n√£o queratinizado.",
    "D) Epit√©lio de transi√ß√£o."
  ],
  correctAnswer: "C) Epit√©lio estratificado pavimentoso n√£o queratinizado.",
  comment: "A camada mucosa da vagina √© revestida por um epit√©lio estratificado pavimentoso n√£o queratinizado, o que a diferencia da pele por n√£o possuir a camada c√≥rnea.",
  topic: "Histologia da Vagina"
},
{
  question: "Qual subst√¢ncia se acumula nas c√©lulas superficiais do epit√©lio vaginal, conferindo-lhes um citoplasma p√°lido e sendo crucial para a microbiota local?",
  options: [
    "A) Queratina.",
    "B) Col√°geno.",
    "C) Glicog√™nio.",
    "D) Lip√≠dios."
  ],
  correctAnswer: "C) Glicog√™nio.",
  comment: "As c√©lulas superficiais do epit√©lio vaginal apresentam um citoplasma p√°lido devido ao ac√∫mulo de glicog√™nio, que √© metabolizado pela microbiota vaginal.",
  topic: "Histologia da Vagina"
},
{
  question: "A lubrifica√ß√£o vaginal prov√©m majoritariamente de quais fontes, visto que a vagina n√£o possui gl√¢ndulas pr√≥prias em sua l√¢mina pr√≥pria?",
  options: [
    "A) Gl√¢ndulas seb√°ceas e sudor√≠paras.",
    "B) Muco cervical e transuda√ß√£o.",
    "C) Secre√ß√£o das gl√¢ndulas de Bartholin exclusivamente.",
    "D) C√©lulas caliciformes do epit√©lio vaginal."
  ],
  correctAnswer: "B) Muco cervical e transuda√ß√£o.",
  comment: "A vagina n√£o possui gl√¢ndulas em sua l√¢mina pr√≥pria; a lubrifica√ß√£o prov√©m majoritariamente do muco cervical e da transuda√ß√£o.",
  topic: "Histologia da Vagina"
},
{
  question: "Qual microrganismo √© essencial na manuten√ß√£o do pH vaginal √°cido, metabolizando o glicog√™nio presente nas c√©lulas epiteliais para produzir √°cido l√°tico?",
  options: [
    "A) Candida albicans.",
    "B) Escherichia coli.",
    "C) Lactobacillus.",
    "D) Gardnerella vaginalis."
  ],
  correctAnswer: "C) Lactobacillus.",
  comment: "A microbiota vaginal normal, especialmente Lactobacillus, metaboliza o glicog√™nio, produzindo √°cido l√°tico e mantendo o pH vaginal √°cido.",
  topic: "Fisiologia do pH Vaginal e Microbiota"
},
{
  question: "Em qual das camadas uterinas √© poss√≠vel encontrar art√©rias arqueadas, indicando sua rica vasculariza√ß√£o?",
  options: [
    "A) Perim√©trio.",
    "B) Miom√©trio.",
    "C) Endom√©trio.",
    "D) L√¢mina Pr√≥pria do C√©rvix."
  ],
  correctAnswer: "B) Miom√©trio.",
  comment: "O miom√©trio √© uma camada muscular espessa, altamente vascularizada, e √© onde se encontram as art√©rias arqueadas.",
  topic: "Introdu√ß√£o ao √ötero"
},
{
  question: "Qual a camada mais externa do √∫tero, descrita como uma serosa ou advent√≠cia?",
  options: [
    "A) Miom√©trio.",
    "B) Endom√©trio.",
    "C) Perim√©trio.",
    "D) L√¢mina Pr√≥pria."
  ],
  correctAnswer: "C) Perim√©trio.",
  comment: "O perim√©trio √© a camada mais externa do √∫tero, podendo ser serosa ou advent√≠cia, dependendo da sua localiza√ß√£o.",
  topic: "Introdu√ß√£o ao √ötero"
},
{
  question: "Os Leiomiomas, ou miomas uterinos, s√£o tumores benignos que se originam da prolifera√ß√£o desordenada de quais c√©lulas e estroma?",
  options: [
    "A) C√©lulas epiteliais do endom√©trio e tecido glandular.",
    "B) C√©lulas musculares lisas do miom√©trio e estroma fibroso.",
    "C) C√©lulas da l√¢mina pr√≥pria da vagina e tecido conjuntivo denso.",
    "D) C√©lulas do epit√©lio germinativo do ov√°rio e tecido medular."
  ],
  correctAnswer: "B) C√©lulas musculares lisas do miom√©trio e estroma fibroso.",
  comment: "Leiomiomas s√£o tumores benignos que surgem da prolifera√ß√£o desordenada de c√©lulas musculares lisas do miom√©trio e do estroma fibroso associado.",
  topic: "Miom√©trio (Leiomiomas)"
},
{
  question: "Mulheres com miomas podem apresentar c√≥licas intensas e sangramento aumentado durante a menstrua√ß√£o devido a qual fator?",
  options: [
    "A) Superprodu√ß√£o de estrog√™nio pelos miomas.",
    "B) Dificuldade na hemostasia pela musculatura contra√≠da e distorcida.",
    "C) Aumento da produ√ß√£o de muco cervical.",
    "D) Acelera√ß√£o do processo de descama√ß√£o endometrial."
  ],
  correctAnswer: "B) Dificuldade na hemostasia pela musculatura contra√≠da e distorcida.",
  comment: "A musculatura uterina contra√≠da e distorcida pelos miomas dificulta a hemostasia, levando a c√≥licas intensas e sangramento aumentado.",
  topic: "Miom√©trio (Leiomiomas)"
},
{
  question: "Qual camada do endom√©trio n√£o descama durante a menstrua√ß√£o e serve como reserva de c√©lulas para a regenera√ß√£o do endom√©trio no pr√≥ximo ciclo?",
  options: [
    "A) Camada Funcional.",
    "B) Camada Basal.",
    "C) Perim√©trio.",
    "D) Miom√©trio."
  ],
  correctAnswer: "B) Camada Basal.",
  comment: "A camada basal √© a por√ß√£o mais profunda do endom√©trio, n√£o descama e cont√©m c√©lulas-tronco para a regenera√ß√£o da camada funcional.",
  topic: "Endom√©trio (Camadas e Fases)"
},
{
  question: "Durante qual fase do ciclo endometrial as gl√¢ndulas uterinas se tornam tortuosas (em formato de saca-rolhas) e ricas em secre√ß√£o (glicog√™nio) para nutrir um poss√≠vel embri√£o?",
  options: [
    "A) Fase Proliferativa.",
    "B) Fase Menstrual.",
    "C) Fase Secretora.",
    "D) Fase Isqu√™mica."
  ],
  correctAnswer: "C) Fase Secretora.",
  comment: "Na fase secretora, as gl√¢ndulas endometriais tornam-se tortuosas e produzem secre√ß√µes ricas em glicog√™nio, preparando o √∫tero para a implanta√ß√£o.",
  topic: "Endom√©trio (Camadas e Fases)"
},
{
  question: "O que caracteriza a Endometriose?",
  options: [
    "A) Prolifera√ß√£o desordenada de c√©lulas musculares no miom√©trio.",
    "B) Presen√ßa de tecido endometrial (gl√¢ndulas e estroma) fora da cavidade uterina.",
    "C) Infec√ß√£o bacteriana da vagina que altera o pH.",
    "D) Degenera√ß√£o do corpo l√∫teo antes da menstrua√ß√£o."
  ],
  correctAnswer: "B) Presen√ßa de tecido endometrial (gl√¢ndulas e estroma) fora da cavidade uterina.",
  comment: "A endometriose √© definida pela presen√ßa de tecido endometrial (gl√¢ndulas e estroma) em locais ect√≥picos, fora do √∫tero.",
  topic: "Endometriose"
},
{
  question: "Qual das seguintes n√£o √© uma consequ√™ncia da endometriose, conforme descrito no texto?",
  options: [
    "A) Inflama√ß√£o e dor p√©lvica intensa.",
    "B) Forma√ß√£o de ader√™ncias.",
    "C) Obstru√ß√£o das tubas uterinas.",
    "D) Aumento da produ√ß√£o de fol√≠culos ovarianos."
  ],
  correctAnswer: "D) Aumento da produ√ß√£o de fol√≠culos ovarianos.",
  comment: "A endometriose causa inflama√ß√£o, dor p√©lvica, ader√™ncias e pode levar √† infertilidade, mas n√£o est√° associada ao aumento da produ√ß√£o de fol√≠culos ovarianos.",
  topic: "Endometriose"
},
{
  question: "Qual horm√¥nio √© respons√°vel por recrutar fol√≠culos ovarianos durante a fase folicular do ciclo menstrual?",
  options: [
    "A) LH (Horm√¥nio Luteinizante).",
    "B) Progesterona.",
    "C) FSH (Horm√¥nio Fol√≠culo Estimulante).",
    "D) hCG (Gonadotrofina Cori√¥nica Humana)."
  ],
  correctAnswer: "C) FSH (Horm√¥nio Fol√≠culo Estimulante).",
  comment: "O FSH (Fol√≠culo Estimulante) √© o horm√¥nio que estimula o recrutamento e o crescimento dos fol√≠culos ovarianos na fase folicular.",
  topic: "Ciclo Menstrual (Eixos Hormonais)"
},
{
  question: "O pico de qual horm√¥nio, que ocorre por volta do 14¬∫ dia do ciclo, induz a ruptura do fol√≠culo maduro e a libera√ß√£o do o√≥cito?",
  options: [
    "A) Estrog√™nio.",
    "B) Progesterona.",
    "C) FSH.",
    "D) LH."
  ],
  correctAnswer: "D) LH.",
  comment: "O pico de LH (Horm√¥nio Luteinizante) √© o evento que desencadeia a ovula√ß√£o, ou seja, a ruptura do fol√≠culo e a libera√ß√£o do o√≥cito.",
  topic: "Ciclo Menstrual (Eixos Hormonais)"
},
{
  question: "Ap√≥s a ovula√ß√£o, o fol√≠culo rompido se transforma em Corpo L√∫teo, que passa a produzir qual horm√¥nio para manter o endom√©trio espesso e preparado para a implanta√ß√£o?",
  options: [
    "A) Estrog√™nio.",
    "B) Progesterona.",
    "C) FSH.",
    "D) Testosterona."
  ],
  correctAnswer: "B) Progesterona.",
  comment: "O Corpo L√∫teo produz Progesterona, que √© essencial para a manuten√ß√£o do endom√©trio na fase secretora, preparando-o para uma poss√≠vel gravidez.",
  topic: "Ciclo Menstrual (Eixos Hormonais)"
},
{
  question: "Se n√£o houver fecunda√ß√£o, a queda dr√°stica dos n√≠veis de qual horm√¥nio causa a vasoconstri√ß√£o das art√©rias espiraladas, isquemia e descama√ß√£o da camada funcional do endom√©trio?",
  options: [
    "A) Estrog√™nio.",
    "B) Progesterona.",
    "C) FSH.",
    "D) LH."
  ],
  correctAnswer: "B) Progesterona.",
  comment: "A regress√£o do corpo l√∫teo leva √† queda dos n√≠veis de progesterona, que √© o gatilho para a menstrua√ß√£o.",
  topic: "Ciclo Menstrual (Eixos Hormonais)"
},
{
  question: "Como os anticoncepcionais hormonais (p√≠lulas) impedem a ovula√ß√£o?",
  options: [
    "A) Estimulando a produ√ß√£o excessiva de FSH, esgotando os fol√≠culos.",
    "B) Bloqueando diretamente a ruptura do fol√≠culo maduro.",
    "C) Inibindo, por feedback negativo, a produ√ß√£o de FSH e LH pela hip√≥fise.",
    "D) Aumentando a vasculariza√ß√£o do endom√©trio, impedindo a implanta√ß√£o."
  ],
  correctAnswer: "C) Inibindo, por feedback negativo, a produ√ß√£o de FSH e LH pela hip√≥fise.",
  comment: "Os horm√¥nios sint√©ticos dos anticoncepcionais inibem a libera√ß√£o de FSH e LH, impedindo o recrutamento folicular e a ovula√ß√£o.",
  topic: "Anticoncepcionais Hormonais"
},
{
  question: "Qual horm√¥nio √© produzido pelo embri√£o (trofoblasto) e √© respons√°vel por 'salvar' o corpo l√∫teo, mantendo a produ√ß√£o de progesterona e impedindo a menstrua√ß√£o no in√≠cio da gravidez?",
  options: [
    "A) Estrog√™nio.",
    "B) Prolactina.",
    "C) Oxitocina.",
    "D) hCG (Gonadotrofina Cori√¥nica Humana)."
  ],
  correctAnswer: "D) hCG (Gonadotrofina Cori√¥nica Humana).",
  comment: "O hCG √© produzido pelo embri√£o e atua mantendo o corpo l√∫teo ativo, garantindo a produ√ß√£o de progesterona necess√°ria para a manuten√ß√£o da gravidez inicial.",
  topic: "Implanta√ß√£o e hCG"
},
{
  question: "Qual segmento das tubas uterinas √© geralmente o local onde ocorre a fecunda√ß√£o?",
  options: [
    "A) Istmo.",
    "B) Infund√≠bulo.",
    "C) Ampola.",
    "D) Por√ß√£o Intramural."
  ],
  correctAnswer: "C) Ampola.",
  comment: "A ampola √© o segmento mais dilatado da tuba uterina e √© o local mais comum para a ocorr√™ncia da fecunda√ß√£o.",
  topic: "Tubas Uterinas"
},
{
  question: "As c√©lulas ciliadas presentes no epit√©lio das tubas uterinas t√™m como principal fun√ß√£o:",
  options: [
    "A) Produzir fluido nutritivo para os gametas.",
    "B) Realizar movimentos perist√°lticos para o transporte.",
    "C) Bater em dire√ß√£o ao √∫tero, transportando o o√≥cito/zigoto.",
    "D) Captar o o√≥cito liberado pelo ov√°rio."
  ],
  correctAnswer: "C) Bater em dire√ß√£o ao √∫tero, transportando o o√≥cito/zigoto.",
  comment: "As c√©lulas ciliadas, com seus c√≠lios, criam um fluxo em dire√ß√£o ao √∫tero, auxiliando no transporte do o√≥cito ou zigoto.",
  topic: "Tubas Uterinas"
},
{
  question: "Se a implanta√ß√£o do embri√£o ocorrer na tuba uterina em vez do √∫tero, qual condi√ß√£o √© configurada?",
  options: [
    "A) Nida√ß√£o normal.",
    "B) Gravidez ect√≥pica.",
    "C) Endometriose tub√°ria.",
    "D) Mioma intramural."
  ],
  correctAnswer: "B) Gravidez ect√≥pica.",
  comment: "A implanta√ß√£o do embri√£o fora da cavidade uterina, como na tuba, √© caracterizada como uma gravidez ect√≥pica.",
  topic: "Tubas Uterinas"
},
{
  question: "Qual camada mais externa do ov√°rio √© referida como epit√©lio simples c√∫bico ou pavimentoso, cujo nome √© hist√≥rico e incorreto, pois n√£o d√° origem aos gametas?",
  options: [
    "A) T√∫nica Albug√≠nea.",
    "B) Epit√©lio Germinativo.",
    "C) Regi√£o Cortical.",
    "D) Regi√£o Medular."
  ],
  correctAnswer: "B) Epit√©lio Germinativo.",
  comment: "O Epit√©lio Germinativo √© a camada mais externa do ov√°rio, mas seu nome √© uma designa√ß√£o hist√≥rica e imprecisa, pois n√£o √© a origem dos gametas.",
  topic: "Anatomia do Ov√°rio"
},
{
  question: "A T√∫nica Albug√≠nea do ov√°rio √© descrita como uma:",
  options: [
    "A) Camada de c√©lulas epiteliais germinativas.",
    "B) Regi√£o funcional contendo fol√≠culos ovarianos.",
    "C) C√°psula de tecido conjuntivo denso, que confere cor esbranqui√ßada.",
    "D) Regi√£o central vascularizada e inervada."
  ],
  correctAnswer: "C) C√°psula de tecido conjuntivo denso, que confere cor esbranqui√ßada.",
  comment: "A T√∫nica Albug√≠nea √© uma c√°psula de tecido conjuntivo denso localizada abaixo do epit√©lio germinativo, conferindo a cor esbranqui√ßada ao ov√°rio.",
  topic: "Anatomia do Ov√°rio"
},
{
  question: "Qual regi√£o do ov√°rio √© a √°rea funcional onde se encontram os fol√≠culos ovarianos em diversos est√°gios de desenvolvimento, imersos em um estroma celular?",
  options: [
    "A) Regi√£o Medular.",
    "B) Hilo Ovariano.",
    "C) Regi√£o Cortical (C√≥rtex).",
    "D) T√∫nica Albug√≠nea."
  ],
  correctAnswer: "C) Regi√£o Cortical (C√≥rtex).",
  comment: "A regi√£o cortical (c√≥rtex) √© a √°rea funcional do ov√°rio onde os fol√≠culos ovarianos se desenvolvem.",
  topic: "Anatomia do Ov√°rio"
},
{
  question: "Qual √© a principal diferen√ßa entre cistos ovarianos (como no ov√°rio polic√≠stico) e tumores ovarianos?",
  options: [
    "A) Cistos s√£o sempre malignos, enquanto tumores s√£o benignos.",
    "B) Cistos s√£o forma√ß√µes cheias de l√≠quido, enquanto tumores s√£o prolifera√ß√µes celulares s√≥lidas an√¥malas.",
    "C) Cistos s√£o sempre causados por infec√ß√µes, e tumores por horm√¥nios.",
    "D) Cistos s√£o encontrados apenas na regi√£o medular, e tumores na cortical."
  ],
  correctAnswer: "B) Cistos s√£o forma√ß√µes cheias de l√≠quido, enquanto tumores s√£o prolifera√ß√µes celulares s√≥lidas an√¥malas.",
  comment: "Cistos s√£o estruturas cheias de l√≠quido, frequentemente fol√≠culos que n√£o ovularam, enquanto tumores s√£o prolifera√ß√µes celulares s√≥lidas e an√¥malas.",
  topic: "Cistos vs. Tumores"
},
{
  question: "Em que est√°gio da meiose as oog√¥nias iniciam seu desenvolvimento ainda na vida fetal, estacionando como o√≥citos prim√°rios?",
  options: [
    "A) Met√°fase I.",
    "B) An√°fase II.",
    "C) Pr√≥fase I.",
    "D) Tel√≥fase II."
  ],
  correctAnswer: "C) Pr√≥fase I.",
  comment: "As oog√¥nias se diferenciam em o√≥citos prim√°rios e estacionam na pr√≥fase I da meiose ainda durante a vida fetal.",
  topic: "Foliculog√™nese"
},
{
  question: "Qual tipo de fol√≠culo ovariano consiste em um o√≥cito prim√°rio rodeado por uma √∫nica camada de c√©lulas foliculares pavimentosas (achatadas) e fica 'adormecido' at√© a puberdade?",
  options: [
    "A) Fol√≠culo Prim√°rio Unilaminar.",
    "B) Fol√≠culo Prim√°rio Multilaminar.",
    "C) Fol√≠culo Primordial.",
    "D) Fol√≠culo Secund√°rio (Antral)."
  ],
  correctAnswer: "C) Fol√≠culo Primordial.",
  comment: "O fol√≠culo primordial √© a forma de reserva, contendo um o√≥cito prim√°rio e uma √∫nica camada de c√©lulas foliculares pavimentosas.",
  topic: "Foliculog√™nese (Desenvolvimento dos Fol√≠culos)"
},
{
  question: "No Fol√≠culo Prim√°rio Unilaminar, as c√©lulas foliculares se tornam c√∫bicas. Qual estrutura come√ßa a se formar entre o o√≥cito e essas c√©lulas, sendo essencial para o reconhecimento do espermatozoide?",
  options: [
    "A) Antro.",
    "B) Corona Radiata.",
    "C) Zona Pel√∫cida.",
    "D) Teca Interna."
  ],
  correctAnswer: "C) Zona Pel√∫cida.",
  comment: "A Zona Pel√∫cida, uma camada de glicoprote√≠nas, come√ßa a se formar no fol√≠culo prim√°rio unilaminar e √© crucial para o reconhecimento do espermatozoide.",
  topic: "Foliculog√™nese (Desenvolvimento dos Fol√≠culos)"
},
{
  question: "No est√°gio do Fol√≠culo Prim√°rio Multilaminar, as c√©lulas foliculares proliferam e s√£o agora chamadas de:",
  options: [
    "A) C√©lulas da Teca.",
    "B) Oog√¥nias.",
    "C) C√©lulas da Granulosa.",
    "D) C√©lulas Ciliadas."
  ],
  correctAnswer: "C) C√©lulas da Granulosa.",
  comment: "No fol√≠culo prim√°rio multilaminar, as c√©lulas foliculares proliferam e formam v√°rias camadas, sendo chamadas de c√©lulas da granulosa.",
  topic: "Foliculog√™nese (Desenvolvimento dos Fol√≠culos)"
},
{
  question: "Qual fol√≠culo √© caracterizado pelo surgimento de espa√ßos cheios de l√≠quido que coalescem para formar uma cavidade maior chamada Antro, e o o√≥cito √© deslocado para a periferia?",
  options: [
    "A) Fol√≠culo Primordial.",
    "B) Fol√≠culo Prim√°rio Unilaminar.",
    "C) Fol√≠culo Secund√°rio (Antral).",
    "D) Fol√≠culo Maduro (de Graaf)."
  ],
  correctAnswer: "C) Fol√≠culo Secund√°rio (Antral).",
  comment: "O fol√≠culo secund√°rio, ou antral, √© o primeiro a apresentar a forma√ß√£o do antro, uma cavidade cheia de l√≠quido folicular.",
  topic: "Foliculog√™nese (Desenvolvimento dos Fol√≠culos)"
},
{
  question: "No Fol√≠culo Secund√°rio, as tecas se diferenciam. A Teca Interna tem a fun√ß√£o de produzir:",
  options: [
    "A) C√©lulas foliculares pavimentosas.",
    "B) Muco cervical.",
    "C) Andr√≥genos/estrog√™nio.",
    "D) Progesterona para manter a gravidez."
  ],
  correctAnswer: "C) Andr√≥genos/estrog√™nio.",
  comment: "A Teca Interna do fol√≠culo secund√°rio √© celular e hormonalmente ativa, produzindo andr√≥genos que s√£o convertidos em estrog√™nios pelas c√©lulas da granulosa.",
  topic: "Foliculog√™nese (Desenvolvimento dos Fol√≠culos)"
},
{
  question: "Qual √© o est√°gio final do desenvolvimento folicular, que possui um antro volumoso, ocupa toda a espessura do c√≥rtex e est√° pronto para romper sob o pico de LH?",
  options: [
    "A) Fol√≠culo Prim√°rio Unilaminar.",
    "B) Fol√≠culo Secund√°rio (Antral).",
    "C) Fol√≠culo Maduro (de Graaf).",
    "D) Fol√≠culo Primordial."
  ],
  correctAnswer: "C) Fol√≠culo Maduro (de Graaf).",
  comment: "O fol√≠culo Maduro (de Graaf) √© o est√°gio final, completamente maduro e pronto para a ovula√ß√£o.",
  topic: "Foliculog√™nese (Desenvolvimento dos Fol√≠culos)"
},
{
  question: "Ap√≥s a ovula√ß√£o, as c√©lulas da granulosa e da teca que restaram no ov√°rio sofrem luteiniza√ß√£o e se transformam em uma gl√¢ndula end√≥crina tempor√°ria. Qual √© o nome dessa estrutura e qual horm√¥nio ela secreta?",
  options: [
    "A) Fol√≠culo de Graaf; Estrog√™nio.",
    "B) Corpo Albicans; FSH.",
    "C) Corpo L√∫teo; Progesterona.",
    "D) Corpo Amarelo; LH."
  ],
  correctAnswer: "C) Corpo L√∫teo; Progesterona.",
  comment: "Ap√≥s a ovula√ß√£o, o fol√≠culo residual se transforma em Corpo L√∫teo, que produz progesterona.",
  topic: "Ovula√ß√£o e Destinos do Fol√≠culo"
},
{
  question: "Se n√£o houver gravidez, o corpo l√∫teo degenera, sofrendo fibrose e hialiniza√ß√£o, transformando-se em uma cicatriz de col√°geno branca. Qual o nome dessa estrutura?",
  options: [
    "A) Corpo L√∫teo Grav√≠dico.",
    "B) Fol√≠culo At√©tico.",
    "C) Corpo Albicans.",
    "D) Cisto L√∫teo."
  ],
  correctAnswer: "C) Corpo Albicans.",
  comment: "O Corpo Albicans √© a cicatriz esbranqui√ßada que resulta da degenera√ß√£o do corpo l√∫teo quando n√£o h√° gravidez.",
  topic: "Ovula√ß√£o e Destinos do Fol√≠culo"
},
{
  question: "A maioria dos fol√≠culos que inicia o crescimento n√£o chega a ovular, degenerando. Esse processo de morte celular programada √© conhecido como:",
  options: [
    "A) Ovulog√™nese.",
    "B) Fecunda√ß√£o.",
    "C) Atresia folicular.",
    "D) Luteiniza√ß√£o."
  ],
  correctAnswer: "C) Atresia folicular.",
  comment: "Atresia folicular √© o processo de degenera√ß√£o e morte celular programada que ocorre na maioria dos fol√≠culos ovarianos.",
  topic: "Ovula√ß√£o e Destinos do Fol√≠culo"
},
{
  question: "O endom√©trio √© revestido por qual tipo de epit√©lio, que se invagina para formar gl√¢ndulas tubulares na l√¢mina pr√≥pria?",
  options: [
    "A) Epit√©lio estratificado pavimentoso n√£o queratinizado.",
    "B) Epit√©lio simples c√∫bico.",
    "C) Epit√©lio simples colunar.",
    "D) Epit√©lio de transi√ß√£o."
  ],
  correctAnswer: "C) Epit√©lio simples colunar.",
  comment: "O endom√©trio √© uma camada mucosa interna, revestida por epit√©lio simples colunar com gl√¢ndulas tubulares.",
  topic: "Introdu√ß√£o ao √ötero"
},
{
  question: "Qual das seguintes camadas do √∫tero √© formada por feixes de m√∫sculo liso em diversas dire√ß√µes, sendo espessa e altamente vascularizada?",
  options: [
    "A) Perim√©trio.",
    "B) Endom√©trio.",
    "C) Miom√©trio.",
    "D) L√¢mina Pr√≥pria."
  ],
  correctAnswer: "C) Miom√©trio.",
  comment: "O miom√©trio √© a camada muscular espessa do √∫tero, composta por m√∫sculo liso e rica em vasos sangu√≠neos.",
  topic: "Introdu√ß√£o ao √ötero"
},
{
  question: "A Candida albicans √© citada como um fungo que comp√µe a flora vaginal normal. Em que situa√ß√£o ela pode gerar a candid√≠ase patol√≥gica?",
  options: [
    "A) Em situa√ß√µes de alta imunidade.",
    "B) Em situa√ß√µes de baixa imunidade, levando ao supercrescimento.",
    "C) Quando o pH vaginal se torna excessivamente √°cido.",
    "D) Durante a fase secretora do ciclo menstrual."
  ],
  correctAnswer: "B) Em situa√ß√µes de baixa imunidade, levando ao supercrescimento.",
  comment: "Embora a Candida albicans fa√ßa parte da flora normal, condi√ß√µes de baixa imunidade podem levar ao seu supercrescimento e, consequentemente, √† candid√≠ase patol√≥gica.",
  topic: "Fisiologia do pH Vaginal e Microbiota"
},
{
  question: "Em que fase ovariana os fol√≠culos em crescimento produzem Estrog√™nio, que por sua vez estimula o espessamento do endom√©trio (fase proliferativa)?",
  options: [
    "A) Fase L√∫tea.",
    "B) Ovula√ß√£o.",
    "C) Fase Folicular.",
    "D) Menstrua√ß√£o."
  ],
  correctAnswer: "C) Fase Folicular.",
  comment: "Durante a fase folicular, os fol√≠culos em desenvolvimento produzem estrog√™nio, que estimula o crescimento e o espessamento do endom√©trio.",
  topic: "Ciclo Menstrual (Eixos Hormonais)"
} ];

    function buildQuiz() {
        const output = [];
        questions.forEach((currentQuestion, questionNumber) => {
            const options = [];
            for (let i = 0; i < currentQuestion.options.length; i++) {
                // Note o uso de ${...} para template literals do JS dentro da f-string
                options.push(
                    `<label class="option" data-question="${questionNumber}" data-value="${currentQuestion.options[i]}">
                        <img src="tesouras.png" class="scissor-icon" onclick="event.stopPropagation(); this.parentNode.classList.toggle('struck-through');">
                        ${currentQuestion.options[i]}
                    </label>`
                );
            }
            output.push(
                `<div class="card" id="question-${questionNumber}" data-topic="${currentQuestion.topic}">
                    <div class="question">${currentQuestion.question}</div>
                    <div class="options">${options.join("")}</div>
                    <div class="comment" id="comment-${questionNumber}"></div>
                </div>`
            );
        });
        quizContainer.innerHTML = output.join("");
    }

    function showResults() {
        wrongQuestionIndices = [];
        errorCountByTopic = {};
        totalAnsweredQuestionsByTopic = {};
        currentWrongQuestionIndex = -1;
        hasErrors = false;
        errorDiagnosisSection.style.display = 'none';
        topicsToReviewList.innerHTML = '';
        statusMessage.textContent = '';

        const allQuestionCards = document.querySelectorAll('.quiz-container .card, #newQuestionsContent .card');
        let correctAnswersCount = 0;
        let totalQuestionsAnswered = 0;

        allQuestionCards.forEach((card, index) => {
            const questionEl = card.querySelector('.question') || card.querySelector('p');
            if (!questionEl) return;
            
            const questionText = questionEl.textContent.trim();
            const optionsContainer = card.querySelector('.options') || card;
            const allOptions = optionsContainer.querySelectorAll('.option, label.option, label');
            const userAnswerElement = optionsContainer.querySelector('.option.selected, label.selected');
            const commentDiv = card.querySelector('.comment');
            const questionTopic = card.dataset.topic || "T√≥pico n√£o informado";

            // Limpa classes
            allOptions.forEach(option => { option.classList.remove('correct', 'incorrect', 'selected'); });
            if (commentDiv) commentDiv.classList.remove('show');

            let correctAnswerValue = null;
            let questionComment = null;

            // L√≥gica para Est√°ticas vs Din√¢micas
            const isStatic = card.id && card.id.startsWith('question-');
            if (isStatic) {
                const questionData = questions.find(q => q.question.trim() === questionText);
                if (questionData) {
                    correctAnswerValue = questionData.correctAnswer.trim();
                    questionComment = questionData.comment;
                }
            } else {
                const correctOpt = optionsContainer.querySelector('.option[data-answer="true"], label[data-answer="true"]');
                if (correctOpt) correctAnswerValue = correctOpt.dataset.value?.trim() || correctOpt.textContent.trim();
                
                const commentElement = card.querySelector('.comment');
                if (commentElement && commentElement.textContent.trim()) questionComment = commentElement.textContent.trim();
            }

            // Verifica resposta
            let userAnswer = null;
            if (userAnswerElement) {
                userAnswerElement.classList.add('selected');
                userAnswer = userAnswerElement.dataset.value?.trim() || userAnswerElement.textContent.trim();
                totalQuestionsAnswered++;
                totalAnsweredQuestionsByTopic[questionTopic] = (totalAnsweredQuestionsByTopic[questionTopic] || 0) + 1;

                if (userAnswer === correctAnswerValue) {
                    correctAnswersCount++;
                } else {
                    hasErrors = true;
                    errorCountByTopic[questionTopic] = (errorCountByTopic[questionTopic] || 0) + 1;
                }
            }

            // Pinta as op√ß√µes
            allOptions.forEach(option => {
                const optionValue = option.dataset.value?.trim() || option.textContent.trim();
                if (optionValue === correctAnswerValue) option.classList.add('correct');
                if (userAnswer && optionValue === userAnswer && userAnswer !== correctAnswerValue) option.classList.add('incorrect');
            });

            if (commentDiv && questionComment) {
                commentDiv.textContent = questionComment;
                commentDiv.classList.add('show');
            }
        });

        resultsContainer.textContent = `Voc√™ acertou ${correctAnswersCount} de ${totalQuestionsAnswered} quest√µes respondidas.`;

        // Diagn√≥stico
        if (hasErrors) {
            for (const topic in errorCountByTopic) {
                const errors = errorCountByTopic[topic];
                const total = totalAnsweredQuestionsByTopic[topic] || 0;
                if (total > 0) {
                    const percent = ((errors / total) * 100).toFixed(1);
                    const li = document.createElement('li');
                    li.textContent = `${topic}: ${percent}% de erros (${errors} de ${total} quest√µes)`;
                    topicsToReviewList.appendChild(li);
                }
            }
            errorDiagnosisSection.style.display = 'block';
            generatedQuestionsSection.style.display = 'block';
            generateNewQuestionsBtn.style.display = 'block';
            errorDiagnosisSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        } else {
            const li = document.createElement('li');
            li.textContent = "ü•≥ Parab√©ns! Voc√™ n√£o teve erros nas quest√µes respondidas.";
            topicsToReviewList.appendChild(li);
        }
    }

    // Listeners
    document.addEventListener("click", function (event) {
        const clickedElement = event.target;
        const optionElement = clickedElement.closest('.option');
        if (optionElement) {
            if (clickedElement.classList.contains("scissor-icon")) {
                event.stopPropagation();
                optionElement.classList.toggle("struck-through");
            } else {
                const parentCard = optionElement.closest('.card');
                const currentQuestionOptions = parentCard.querySelectorAll('.option');
                currentQuestionOptions.forEach(opt => opt.classList.remove("selected"));
                optionElement.classList.add("selected");
            }
        }
    });

    generateNewQuestionsBtn.addEventListener("click", async function() {
        statusMessage.textContent = '‚è≥ Gerando novas perguntas...';
        generateNewQuestionsBtn.disabled = true;
        
        const topics = Object.keys(errorCountByTopic).filter(topic => {
            const errorsInTopic = errorCountByTopic[topic] || 0;
            const totalAnsweredInTopic = totalAnsweredQuestionsByTopic[topic] || 0;
            return errorsInTopic > 0 && totalAnsweredInTopic > 0;
        });
        
        const topicsToSend = topics.length > 0 ? topics : ["fisiologia celular", "biologia"];

        try {
            const response = await fetch('https://www.quizia.xyz/quiz', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ topicos: topicsToSend }),
            });

            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
            
            const data = await response.json();
            newQuestionsContent.innerHTML = '';

            if (data && data.html) {
                newQuestionsContent.innerHTML = data.html.replace(/```html|```/g, '');
                
                newQuestionsContent.querySelectorAll('.card').forEach((card) => {
                    // L√≥gica de limpeza e adi√ß√£o de tesouras (mantida igual)
                    const questionElement = card.querySelector('p');
                    if (questionElement && !questionElement.classList.contains('question')) questionElement.classList.add('question');
                    
                    card.querySelectorAll('label').forEach((label) => {
                        const radioInput = label.querySelector('input[type="radio"]');
                        if (radioInput) {
                            if (radioInput.hasAttribute('data-answer')) label.setAttribute('data-answer', radioInput.getAttribute('data-answer'));
                            radioInput.remove();
                        }
                        if (!label.classList.contains('option')) label.classList.add('option');
                        if (!label.dataset.value) label.dataset.value = label.textContent.trim();
                        if (!label.querySelector('.scissor-icon')) {
                            const scissorIcon = document.createElement('img');
                            scissorIcon.src = 'tesouras.png';
                            scissorIcon.className = 'scissor-icon';
                            scissorIcon.onclick = function(e) { e.stopPropagation(); label.classList.toggle('struck-through'); };
                            label.insertBefore(scissorIcon, label.firstChild);
                        }
                    });
                });
            } else {
                newQuestionsContent.innerHTML = "<p>N√£o foi poss√≠vel gerar novas perguntas.</p>";
            }
            
            generatedQuestionsSection.style.display = 'block';
            generatedQuestionsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            statusMessage.textContent = '‚úÖ Perguntas geradas com sucesso!';
            setTimeout(() => { statusMessage.textContent = '' }, 3000);
            
        } catch (error) {
            console.error('Erro:', error);
            statusMessage.textContent = '‚ùå Erro: ' + error.message;
            setTimeout(() => { statusMessage.textContent = '' }, 5000);
        } finally {
            generateNewQuestionsBtn.disabled = false;
        }
    });

    buildQuiz();
    document.getElementById("verifyAnswersBtn").addEventListener("click", showResults);
</script>
<script src="conexao_firebase.js"></script><script src="navegacao.js"></script><script type="module" src="padrao_simulado.js"></script>
</body>
</html>
