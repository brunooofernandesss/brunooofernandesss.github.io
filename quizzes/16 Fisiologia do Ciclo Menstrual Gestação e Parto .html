
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>16 Fisiologia do Ciclo Menstrual Gesta√ß√£o e Parto </title>
    <style>
        body { font-family: sans-serif; margin: 0; padding: 20px; display: flex; justify-content: center; align-items: flex-start; min-height: 100vh; background-color: #f4f4f4; }
        .quiz-container { max-width: 800px; width: 100%; }
        h1 { color: #333; text-align: center; margin-bottom: 30px; }
        .card { background-color: white; border-radius: 8px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); }
        .question { font-weight: bold; margin-bottom: 10px; color: #333; }
        .options { margin-top: 15px; }
        
        /* Estilos das op√ß√µes */
        .option, label.option, label, #newQuestionsContent label { display: flex; align-items: center; margin-bottom: 10px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; cursor: pointer; transition: background-color 0.2s ease; position: relative; }
        
        /* Ocultar Radio inputs */
        .option input[type="radio"], label input[type="radio"], #newQuestionsContent input[type="radio"], #newQuestionsContent label input[type="radio"] { display: none !important; visibility: hidden !important; opacity: 0 !important; position: absolute !important; left: -9999px !important; }
        
        .option:hover, label.option:hover, label:hover, #newQuestionsContent label:hover { background-color: #e9e9e9; }
        .option.selected, label.option.selected, label.selected, #newQuestionsContent label.selected { background-color: #d1e7dd; border-color: #28a745; }
        .option.correct, label.option.correct, label.correct, #newQuestionsContent label.correct { background-color: #d4edda; border-color: #28a745; }
        .option.incorrect, label.option.incorrect, label.incorrect, #newQuestionsContent label.incorrect { background-color: #f8d7da; border-color: #dc3545; }
        
        .submit-btn { display: block; width: 100%; padding: 15px; background-color: #007bff; color: white; border: none; border-radius: 5px; font-size: 18px; cursor: pointer; transition: background-color 0.3s ease; margin-top: 30px; }
        .submit-btn:hover { background-color: #0056b3; }
        
        .results { text-align: center; margin-top: 30px; font-size: 20px; font-weight: bold; color: #333; }
        .scissor-icon { margin-right: 10px; width: 20px; height: 20px; opacity: 0.5; cursor: pointer; }
        .scissor-icon.hidden { display: none; }
        .struck-through { text-decoration: line-through; color: #888; }
        
        .comment { margin-top: 10px; padding: 10px; background-color: #f0f0f0; border-left: 4px solid #007bff; font-style: italic; color: #555; display: none; }
        .comment.show { display: block; }
        
        .card-bloco { border: 1px solid #ddd; border-radius: 6px; padding: 10px; background: #fff; margin-bottom: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        
        /* Diagn√≥stico e Erros */
        .error-diagnosis-section { margin-top: 50px; padding: 30px; background-color: #ffe0b2; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.15); display: none; text-align: center; font-size: 1.1em; color: #333; }
        .error-diagnosis-section h2 { color: #e65100; margin-bottom: 20px; font-size: 1.8em; }
        .error-diagnosis-section ul { list-style: none; padding: 0; margin: 0; }
        .error-diagnosis-section li { background-color: #ff9800; color: white; padding: 8px 15px; margin: 8px 0; border-radius: 5px; display: inline-block; margin-right: 10px; font-weight: bold; }
    </style>
</head>
<body>

    <div class="quiz-container" id="quiz-container">
        <h1>16 Fisiologia do Ciclo Menstrual Gesta√ß√£o e Parto </h1>
        
        <div id="quiz"></div>
        
        <button class="submit-btn" id="verifyAnswersBtn">Verificar Respostas</button>
        <button class="generate-questions-btn submit-btn" id="generateNewQuestionsBtn" style="display:none;">Gerar Novas Perguntas</button>
        
        <div class="results card-bloco" id="results"></div>
        <div id="statusMessage" style="text-align: center; margin-top: 10px; font-weight: bold; color: #007bff;"></div>
        
        <div class="error-diagnosis-section card-bloco" id="errorDiagnosis">
            <h2>Diagn√≥stico de Erros</h2>
            <p>Parece que voc√™ precisa revisar os seguintes assuntos:</p>
            <ul id="topicsToReview"></ul>
        </div>
        
        <div class="generated-questions-section card-bloco" id="generatedQuestionsSection" style="display:none;">
            <h2>Novas Perguntas Geradas</h2>
            <div id="newQuestionsContent"></div>
        </div>
    </div>

<script>
    const quizContainer = document.getElementById("quiz");
    const resultsContainer = document.getElementById("results");
    const errorDiagnosisSection = document.getElementById("errorDiagnosis");
    const topicsToReviewList = document.getElementById("topicsToReview");
    const generateNewQuestionsBtn = document.getElementById("generateNewQuestionsBtn");
    const generatedQuestionsSection = document.getElementById("generatedQuestionsSection");
    const newQuestionsContent = document.getElementById("newQuestionsContent");
    const statusMessage = document.getElementById("statusMessage");

    let wrongQuestionIndices = [];
    let errorCountByTopic = {};  // CORRIGIDO: chaves duplas para objeto JS vazio
    let totalAnsweredQuestionsByTopic = {}; // CORRIGIDO
    let currentWrongQuestionIndex = -1;
    let hasErrors = false;

    // Inicializa display
    errorDiagnosisSection.style.display = 'none';
    topicsToReviewList.innerHTML = '';
    statusMessage.textContent = '';

    // AQUI entra a vari√°vel Python, ent√£o usamos chaves simples:
    const questions = [ {
  question: "A placenta √© um √≥rg√£o misto. Quais s√£o as suas duas por√ß√µes distintas e de quais estruturas embrion√°rias e maternas elas se derivam?",
  options: [
    "A) Por√ß√£o fetal do saco vitel√≠nico e por√ß√£o materna do miom√©trio.",
    "B) Por√ß√£o fetal do c√≥rion viloso e por√ß√£o materna do endom√©trio uterino (dec√≠dua).",
    "C) Por√ß√£o fetal do √¢mnio e por√ß√£o materna do perim√©trio.",
    "D) Por√ß√£o fetal do alantoide e por√ß√£o materna do colo uterino."
  ],
  correctAnswer: "B) Por√ß√£o fetal do c√≥rion viloso e por√ß√£o materna do endom√©trio uterino (dec√≠dua).",
  comment: "A por√ß√£o fetal da placenta deriva do c√≥rion viloso (saco cori√¥nico), e a por√ß√£o materna √© formada pelo endom√©trio uterino modificado, conhecido como dec√≠dua.",
  topic: "Estrutura da Placenta"
},
{
  question: "Durante a implanta√ß√£o, o trofoblasto prolifera e se diferencia em duas camadas. Qual delas √© respons√°vel pela produ√ß√£o hormonal, como o hCG?",
  options: [
    "A) Citotrofoblasto.",
    "B) Mesoderma extraembrion√°rio.",
    "C) Sinciciotrofoblasto.",
    "D) Endom√©trio funcional."
  ],
  correctAnswer: "C) Sinciciotrofoblasto.",
  comment: "O sinciciotrofoblasto √© a camada externa do trofoblasto que invade o tecido materno e √© respons√°vel pela produ√ß√£o de horm√¥nios como o hCG.",
  topic: "Diferencia√ß√£o do Trofoblasto"
},
{
  question: "Qual o nome dado ao endom√©trio funcional de uma mulher gr√°vida que sofre a 'rea√ß√£o decidual'?",
  options: [
    "A) Miom√©trio.",
    "B) Perim√©trio.",
    "C) Dec√≠dua.",
    "D) Colo uterino."
  ],
  correctAnswer: "C) Dec√≠dua.",
  comment: "A dec√≠dua √© o nome espec√≠fico dado ao endom√©trio uterino que sofre altera√ß√µes morfol√≥gicas e funcionais durante a gravidez para sustentar o embri√£o.",
  topic: "Dec√≠dua"
},
{
  question: "Al√©m de nutrir o embri√£o, qual a outra fun√ß√£o vital da dec√≠dua em rela√ß√£o √† invas√£o do trofoblasto?",
  options: [
    "A) Estimular a prolifera√ß√£o excessiva do sinciciotrofoblasto.",
    "B) Conter a invas√£o do sinciciotrofoblasto, prevenindo o acretismo placent√°rio.",
    "C) Aumentar a permeabilidade do √∫tero para o trofoblasto.",
    "D) Produzir hCG para manter o corpo l√∫teo."
  ],
  correctAnswer: "B) Conter a invas√£o do sinciciotrofoblasto, prevenindo o acretismo placent√°rio.",
  comment: "A dec√≠dua desempenha um papel crucial na restri√ß√£o da invas√£o trofobl√°stica excessiva, protegendo o √∫tero de condi√ß√µes como o acretismo placent√°rio.",
  topic: "Fun√ß√µes da Dec√≠dua"
},
{
  question: "A dec√≠dua localizada profundamente ao concepto, onde se formar√° a por√ß√£o materna da placenta, √© denominada:",
  options: [
    "A) Dec√≠dua Parietal.",
    "B) Dec√≠dua Capsular.",
    "C) Dec√≠dua Basal.",
    "D) Dec√≠dua Apical."
  ],
  correctAnswer: "C) Dec√≠dua Basal.",
  comment: "A dec√≠dua basal √© a por√ß√£o do endom√©trio sob o conceito, diretamente envolvida na forma√ß√£o da placenta materna.",
  topic: "Classifica√ß√£o da Dec√≠dua"
},
{
  question: "A camada superficial que recobre o concepto, envolvendo-o como uma c√°psula, √© conhecida como:",
  options: [
    "A) Dec√≠dua Basal.",
    "B) Dec√≠dua Parietal.",
    "C) Dec√≠dua Capsular.",
    "D) Dec√≠dua Cori√¥nica."
  ],
  correctAnswer: "C) Dec√≠dua Capsular.",
  comment: "A dec√≠dua capsular envolve o embri√£o, separando-o da cavidade uterina.",
  topic: "Classifica√ß√£o da Dec√≠dua"
},
{
  question: "Nas fases iniciais da gravidez, qual sinal ultrassonogr√°fico, descrito como um anel branco e denso ao redor do saco gestacional, confirma a gravidez intrauterina vi√°vel?",
  options: [
    "A) Sinal de Chadwick.",
    "B) Sinal de Hegar.",
    "C) Sinal do duplo anel decidual.",
    "D) Sinal de Piskacek."
  ],
  correctAnswer: "C) Sinal do duplo anel decidual.",
  comment: "O sinal do duplo anel decidual √© um achado ultrassonogr√°fico precoce que indica uma gravidez intrauterina e, geralmente, vi√°vel, formado pelas dec√≠duas capsular e parietal.",
  topic: "Sinal Ultrassonogr√°fico"
},
{
  question: "A implanta√ß√£o na parte inferior do √∫tero, podendo cobrir o colo, √© uma condi√ß√£o cl√≠nica grave conhecida como:",
  options: [
    "A) Placenta acreta.",
    "B) Placenta pr√©via.",
    "C) Descolamento prematuro de placenta.",
    "D) Vaso pr√©vio."
  ],
  correctAnswer: "B) Placenta pr√©via.",
  comment: "Placenta pr√©via ocorre quando a placenta se implanta na parte inferior do √∫tero e pode cobrir parcial ou totalmente o colo uterino, causando sangramento no terceiro trimestre.",
  topic: "Complica√ß√µes da Implanta√ß√£o"
},
{
  question: "At√© a 8¬™ semana, as vilosidades cori√≥nicas cobrem todo o saco cori√¥nico. No entanto, as vilosidades associadas √† dec√≠dua capsular sofrem degenera√ß√£o e formam qual estrutura?",
  options: [
    "A) C√≥rion viloso (frondosum).",
    "B) Membrana amniocori√¥nica.",
    "C) C√≥rion liso (laeve).",
    "D) Placa cori√¥nica."
  ],
  correctAnswer: "C) C√≥rion liso (laeve).",
  comment: "As vilosidades sobre a dec√≠dua capsular degeneram devido √† compress√£o e redu√ß√£o do suprimento sangu√≠neo, formando o c√≥rion liso.",
  topic: "Evolu√ß√£o do C√≥rion"
},
{
  question: "Qual por√ß√£o do c√≥rion prolifera intensamente e constitui a por√ß√£o fetal da placenta funcional?",
  options: [
    "A) C√≥rion liso (laeve).",
    "B) C√≥rion capsular.",
    "C) C√≥rion parietal.",
    "D) C√≥rion viloso (frondosum)."
  ],
  correctAnswer: "D) C√≥rion viloso (frondosum).",
  comment: "As vilosidades associadas √† dec√≠dua basal proliferam e se ramificam intensamente, formando o c√≥rion viloso, que √© a parte fetal da placenta funcional.",
  topic: "Evolu√ß√£o do C√≥rion"
},
{
  question: "A expans√£o do saco amni√≥tico resulta na fus√£o do √¢mnio com o c√≥rion, formando qual membrana?",
  options: [
    "A) Membrana vitel√≠nica.",
    "B) Membrana amniocori√¥nica.",
    "C) Membrana decidual basal.",
    "D) Membrana placent√°ria."
  ],
  correctAnswer: "B) Membrana amniocori√¥nica.",
  comment: "A membrana amniocori√¥nica √© formada pela fus√£o do √¢mnio e do c√≥rion √† medida que o saco amni√≥tico se expande.",
  topic: "Fus√£o de Membranas"
},
{
  question: "Popularmente conhecida como a 'bolsa d'√°gua', qual estrutura se rompe durante o trabalho de parto, liberando o l√≠quido amni√≥tico?",
  options: [
    "A) Dec√≠dua parietal.",
    "B) C√≥rion liso.",
    "C) Membrana amniocori√¥nica.",
    "D) Dec√≠dua capsular."
  ],
  correctAnswer: "C) Membrana amniocori√¥nica.",
  comment: "A ruptura da membrana amniocori√¥nica √© um evento comum no trabalho de parto, resultando na sa√≠da do l√≠quido amni√≥tico.",
  topic: "Membranas Gestacionais"
},
{
  question: "Ap√≥s o parto, √© crucial que o m√©dico examine a placenta. O que ele deve garantir para prevenir hemorragias graves e infec√ß√µes puerperais?",
  options: [
    "A) Que a placenta tenha se enrolado no cord√£o umbilical.",
    "B) Que a placenta tenha sa√≠do inteira, com cotil√©dones √≠ntegros.",
    "C) Que a placenta esteja menor do que o esperado.",
    "D) Que a placenta tenha sido ingerida pela m√£e."
  ],
  correctAnswer: "B) Que a placenta tenha sa√≠do inteira, com cotil√©dones √≠ntegros.",
  comment: "A reten√ß√£o de fragmentos placent√°rios no √∫tero ap√≥s o parto √© uma causa importante de hemorragias e infec√ß√µes, por isso a integridade da placenta deve ser verificada.",
  topic: "Avalia√ß√£o P√≥s-Parto"
},
{
  question: "Qual face da placenta, em contato com o √∫tero, possui aspecto lobulado (cotil√©dones) e √© coberta por uma fina camada de dec√≠dua basal?",
  options: [
    "A) Face Fetal.",
    "B) Face Embrion√°ria.",
    "C) Face Materna.",
    "D) Face Cori√¥nica."
  ],
  correctAnswer: "C) Face Materna.",
  comment: "A face materna da placenta √© caracterizada por sua superf√≠cie lobulada, correspondendo aos cotil√©dones, e est√° em contato direto com o √∫tero.",
  topic: "Morfologia da Placenta"
},
{
  question: "Qual face da placenta, voltada para o feto, √© lisa e brilhante (coberta pelo √¢mnio), onde se insere o cord√£o umbilical e visualizam-se os vasos cori√¥nicos?",
  options: [
    "A) Face Materna.",
    "B) Face Endometrial.",
    "C) Face Decidual.",
    "D) Face Fetal."
  ],
  correctAnswer: "D) Face Fetal.",
  comment: "A face fetal da placenta √© coberta pelo √¢mnio, apresentando uma superf√≠cie lisa e brilhante, e √© onde o cord√£o umbilical se insere.",
  topic: "Morfologia da Placenta"
},
{
  question: "Como o sangue materno, rico em oxig√™nio e nutrientes, chega ao espa√ßo interviloso da placenta?",
  options: [
    "A) Atrav√©s das veias umbilicais.",
    "B) Atrav√©s das art√©rias espiraladas do endom√©trio.",
    "C) Atrav√©s das veias endometriais.",
    "D) Atrav√©s dos capilares fetais."
  ],
  correctAnswer: "B) Atrav√©s das art√©rias espiraladas do endom√©trio.",
  comment: "As art√©rias espiraladas injetam o sangue materno, sob press√£o, nos espa√ßos intervilosos, banhando as vilosidades cori√¥nicas.",
  topic: "Circula√ß√£o Materna Placent√°ria"
},
{
  question: "Onde ocorrem as trocas gasosas e metab√≥licas entre o sangue materno e fetal na placenta?",
  options: [
    "A) Dentro dos vasos umbilicais.",
    "B) No interior das vilosidades cori√¥nicas.",
    "C) No espa√ßo interviloso.",
    "D) Dentro das veias endometriais."
  ],
  correctAnswer: "C) No espa√ßo interviloso.",
  comment: "As trocas ocorrem no espa√ßo interviloso, onde o sangue materno banha externamente as vilosidades cori√¥nicas que cont√™m os capilares fetais.",
  topic: "Trocas Placent√°rias"
},
{
  question: "Quantas art√©rias umbilicais levam sangue pobre em oxig√™nio e rico em excretas do feto para a placenta?",
  options: [
    "A) Uma art√©ria umbilical.",
    "B) Duas art√©rias umbilicais.",
    "C) Tr√™s art√©rias umbilicais.",
    "D) Quatro art√©rias umbilicais."
  ],
  correctAnswer: "B) Duas art√©rias umbilicais.",
  comment: "O cord√£o umbilical tipicamente cont√©m duas art√©rias umbilicais que transportam sangue desoxigenado e com res√≠duos metab√≥licos do feto para a placenta.",
  topic: "Circula√ß√£o Fetal Placent√°ria"
},
{
  question: "Qual vaso umbilical retorna o sangue agora rico em oxig√™nio e nutrientes da placenta para o feto?",
  options: [
    "A) Art√©ria umbilical direita.",
    "B) Art√©ria umbilical esquerda.",
    "C) Veia umbilical.",
    "D) Veia vitel√≠nica."
  ],
  correctAnswer: "C) Veia umbilical.",
  comment: "A veia umbilical √∫nica √© respons√°vel por transportar o sangue oxigenado e nutritivo da placenta de volta para o feto.",
  topic: "Circula√ß√£o Fetal Placent√°ria"
},
{
  question: "Em condi√ß√µes normais, h√° mistura direta entre o sangue materno e o fetal?",
  options: [
    "A) Sim, sempre ocorre mistura direta.",
    "B) N√£o, eles s√£o separados pela membrana placent√°ria.",
    "C) Sim, mas apenas ap√≥s 20 semanas de gesta√ß√£o.",
    "D) N√£o, a menos que o feto aspire l√≠quido amni√≥tico."
  ],
  correctAnswer: "B) N√£o, eles s√£o separados pela membrana placent√°ria.",
  comment: "A barreira placent√°ria impede a mistura direta de sangue materno e fetal, embora microles√µes possam permitir uma passagem m√≠nima de c√©lulas ou pat√≥genos.",
  topic: "Barreira Placent√°ria"
},
{
  question: "At√© aproximadamente quantas semanas de gesta√ß√£o a barreira placent√°ria √© descrita como espessa, composta por sinciciotrofoblasto, citotrofoblasto, tecido conjuntivo e endot√©lio capilar?",
  options: [
    "A) 10 semanas.",
    "B) 15 semanas.",
    "C) 20 semanas.",
    "D) 25 semanas."
  ],
  correctAnswer: "C) 20 semanas.",
  comment: "A barreira placent√°ria √© mais espessa nas primeiras 20 semanas, apresentando todas as suas camadas constituintes.",
  topic: "Barreira Placent√°ria"
},
{
  question: "Ap√≥s 20 semanas de gesta√ß√£o, o que ocorre com o citotrofoblasto em grandes √°reas da barreira placent√°ria, tornando-a mais fina para facilitar as trocas?",
  options: [
    "A) Ele se prolifera intensamente.",
    "B) Ele se torna mais espesso.",
    "C) Ele desaparece em grandes √°reas.",
    "D) Ele se transforma em sinciciotrofoblasto."
  ],
  correctAnswer: "C) Ele desaparece em grandes √°reas.",
  comment: "O afinamento da barreira placent√°ria ap√≥s 20 semanas, com a degenera√ß√£o do citotrofoblasto em algumas regi√µes, otimiza as trocas materno-fetais.",
  topic: "Barreira Placent√°ria"
},
{
  question: "A barreira placent√°ria protege contra muitas bact√©rias, mas √© perme√°vel a quais agentes infecciosos?",
  options: [
    "A) Apenas bact√©rias gram-positivas.",
    "B) V√≠rus (como HIV, Rub√©ola, Zika) e algumas bact√©rias (S√≠filis).",
    "C) Apenas bact√©rias gram-negativas.",
    "D) Nenhuma infec√ß√£o, √© completamente impenetr√°vel."
  ],
  correctAnswer: "B) V√≠rus (como HIV, Rub√©ola, Zika) e algumas bact√©rias (S√≠filis).",
  comment: "Apesar de ser uma barreira protetora, a placenta √© vulner√°vel √† passagem de diversos v√≠rus e algumas bact√©rias espec√≠ficas, como o Treponema pallidum da S√≠filis.",
  topic: "Permeabilidade da Barreira Placent√°ria"
},
{
  question: "Qual tipo de anticorpo materno √© capaz de atravessar a barreira placent√°ria, conferindo imunidade passiva ao feto?",
  options: [
    "A) IgA.",
    "B) IgE.",
    "C) IgM.",
    "D) IgG."
  ],
  correctAnswer: "D) IgG.",
  comment: "Os anticorpos maternos da classe IgG s√£o os √∫nicos que conseguem atravessar a placenta, proporcionando imunidade passiva ao feto contra algumas doen√ßas.",
  topic: "Permeabilidade da Barreira Placent√°ria"
},
{
  question: "Em rela√ß√£o aos pulm√µes do feto, eles s√£o funcionais para a oxigena√ß√£o durante a vida intrauterina?",
  options: [
    "A) Sim, s√£o totalmente funcionais e realizam trocas gasosas.",
    "B) Sim, mas apenas a partir do segundo trimestre.",
    "C) N√£o, eles est√£o colabados e cheios de l√≠quido, dependendo da placenta para oxigena√ß√£o.",
    "D) N√£o, mas come√ßam a funcionar apenas nos √∫ltimos meses da gesta√ß√£o."
  ],
  correctAnswer: "C) N√£o, eles est√£o colabados e cheios de l√≠quido, dependendo da placenta para oxigena√ß√£o.",
  comment: "Os pulm√µes fetais n√£o funcionam para trocas gasosas; a placenta √© o √≥rg√£o respons√°vel pela oxigena√ß√£o do sangue fetal.",
  topic: "Fun√ß√£o Pulmonar Fetal"
},
{
  question: "Qual a inser√ß√£o do cord√£o umbilical considerada normal, geralmente no centro da placenta?",
  options: [
    "A) Inser√ß√£o marginal.",
    "B) Inser√ß√£o velamentosa.",
    "C) Inser√ß√£o central.",
    "D) Inser√ß√£o exc√™ntrica."
  ],
  correctAnswer: "C) Inser√ß√£o central.",
  comment: "A inser√ß√£o central √© a forma mais comum e ideal de fixa√ß√£o do cord√£o umbilical na placenta.",
  topic: "Cord√£o Umbilical"
},
{
  question: "O cord√£o umbilical tipicamente cont√©m quais vasos sangu√≠neos?",
  options: [
    "A) Uma art√©ria e uma veia.",
    "B) Duas art√©rias e duas veias.",
    "C) Duas art√©rias e uma veia.",
    "D) Uma art√©ria e duas veias."
  ],
  correctAnswer: "C) Duas art√©rias e uma veia.",
  comment: "A maioria dos cord√µes umbilicais possui duas art√©rias e uma veia, embora varia√ß√µes possam ocorrer.",
  topic: "Cord√£o Umbilical"
},
{
  question: "Qual tecido conjuntivo mucoso envolve e protege os vasos do cord√£o umbilical contra tor√ß√µes e compress√£o?",
  options: [
    "A) Tecido adiposo.",
    "B) Tecido fibroso.",
    "C) Geleia de Wharton.",
    "D) Mes√™nquima."
  ],
  correctAnswer: "C) Geleia de Wharton.",
  comment: "A Geleia de Wharton √© um tecido gelatinoso que preenche o cord√£o umbilical, protegendo seus vasos.",
  topic: "Cord√£o Umbilical"
},
{
  question: "Qual tipo de inser√ß√£o do cord√£o umbilical √© considerada perigosa, pois os vasos ficam desprotegidos e sujeitos a ruptura ou compress√£o?",
  options: [
    "A) Inser√ß√£o central.",
    "B) Inser√ß√£o marginal.",
    "C) Inser√ß√£o velamentosa.",
    "D) Inser√ß√£o lateral."
  ],
  correctAnswer: "C) Inser√ß√£o velamentosa.",
  comment: "Na inser√ß√£o velamentosa, os vasos umbilicais se ramificam na membrana amni√≥tica antes de atingir a placenta, deixando-os vulner√°veis.",
  topic: "Cord√£o Umbilical - Complica√ß√µes"
},
{
  question: "Cord√µes umbilicais muito longos (acima de 90 cm) podem causar qual tipo de complica√ß√£o?",
  options: [
    "A) Descolamento prematuro da placenta.",
    "B) Circular de cord√£o no pesco√ßo do feto ou forma√ß√£o de n√≥s.",
    "C) Inser√ß√£o velamentosa.",
    "D) Compress√£o dos vasos dentro da geleia de Wharton."
  ],
  correctAnswer: "B) Circular de cord√£o no pesco√ßo do feto ou forma√ß√£o de n√≥s.",
  comment: "Cord√µes muito longos aumentam o risco de se enrolarem no pesco√ßo do feto (circular de cord√£o) ou de formarem n√≥s, o que pode comprometer o fluxo sangu√≠neo.",
  topic: "Cord√£o Umbilical - Complica√ß√µes"
},
{
  question: "Nas primeiras semanas (2¬™ e 3¬™), qual √© a principal fun√ß√£o da ves√≠cula umbilical (saco vitelino)?",
  options: [
    "A) Desenvolvimento da bexiga urin√°ria.",
    "B) Produ√ß√£o de horm√¥nios.",
    "C) Transfer√™ncia de nutrientes antes do estabelecimento da circula√ß√£o placent√°ria.",
    "D) Armazenamento de l√≠quido amni√≥tico."
  ],
  correctAnswer: "C) Transfer√™ncia de nutrientes antes do estabelecimento da circula√ß√£o placent√°ria.",
  comment: "A ves√≠cula umbilical √© essencial para a nutri√ß√£o do embri√£o muito jovem, antes que a placenta esteja plenamente funcional.",
  topic: "Ves√≠cula Umbilical (Saco Vitelino)"
},
{
  question: "Al√©m da nutri√ß√£o inicial, qual outro papel importante a ves√≠cula umbilical desempenha como local de origem?",
  options: [
    "A) Das primeiras c√©lulas musculares.",
    "B) Das primeiras c√©lulas nervosas.",
    "C) Das primeiras c√©lulas sangu√≠neas e germinativas primordiais.",
    "D) Das primeiras c√©lulas √≥sseas."
  ],
  correctAnswer: "C) Das primeiras c√©lulas sangu√≠neas e germinativas primordiais.",
  comment: "A ves√≠cula umbilical √© um s√≠tio crucial para a hematopoiese inicial e para a origem das c√©lulas germinativas primordiais.",
  topic: "Ves√≠cula Umbilical (Saco Vitelino)"
},
{
  question: "O alantoide √© um divert√≠culo da ves√≠cula umbilical. Em qual estrutura urin√°ria ele est√° envolvido no desenvolvimento?",
  options: [
    "A) Ureteres.",
    "B) Rins.",
    "C) Bexiga urin√°ria.",
    "D) Uretra."
  ],
  correctAnswer: "C) Bexiga urin√°ria.",
  comment: "O alantoide contribui para o desenvolvimento da bexiga urin√°ria e, ap√≥s o nascimento, torna-se o √∫raco (ligamento umbilical mediano).",
  topic: "Alantoide"
},
{
  question: "Os vasos do alantoide se desenvolvem em quais vasos do cord√£o umbilical?",
  options: [
    "A) Art√©ria e veia pulmonares.",
    "B) Art√©ria e veia renais.",
    "C) Art√©rias e veia umbilicais.",
    "D) Art√©ria e veia vitel√≠nicas."
  ],
  correctAnswer: "C) Art√©rias e veia umbilicais.",
  comment: "Os vasos que se formam no mesoderma do alantoide se diferenciam nas art√©rias e veia umbilicais.",
  topic: "Alantoide"
},
{
  question: "Qual a principal fonte de renova√ß√£o do l√≠quido amni√≥tico a partir do in√≠cio do segundo trimestre?",
  options: [
    "A) Transudato materno atrav√©s da placenta.",
    "B) Secre√ß√£o das gl√¢ndulas uterinas.",
    "C) Urina fetal.",
    "D) Secre√ß√£o do epit√©lio amni√≥tico."
  ],
  correctAnswer: "C) Urina fetal.",
  comment: "A partir do segundo trimestre, a urina fetal torna-se a principal contribuinte para o volume e a renova√ß√£o do l√≠quido amni√≥tico.",
  topic: "L√≠quido Amni√≥tico"
},
{
  question: "Qual a fun√ß√£o do l√≠quido amni√≥tico que permite o crescimento sim√©trico e a movimenta√ß√£o livre do feto?",
  options: [
    "A) Controle de temperatura.",
    "B) Prote√ß√£o mec√¢nica.",
    "C) Evitar ader√™ncias fetais e permitir movimentos.",
    "D) Fonte de nutrientes."
  ],
  correctAnswer: "C) Evitar ader√™ncias fetais e permitir movimentos.",
  comment: "O l√≠quido amni√≥tico cria um espa√ßo que permite o crescimento harmonioso e os movimentos do feto, evitando a forma√ß√£o de ader√™ncias.",
  topic: "Fun√ß√µes do L√≠quido Amni√≥tico"
},
{
  question: "Por que o l√≠quido amni√≥tico √© essencial para o desenvolvimento pulmonar fetal?",
  options: [
    "A) Ele fornece oxig√™nio diretamente aos pulm√µes.",
    "B) O feto 'inspira' o l√≠quido para expandir os alv√©olos.",
    "C) Ele cont√©m enzimas que amadurecem os pulm√µes.",
    "D) Ele remove impurezas dos pulm√µes."
  ],
  correctAnswer: "B) O feto 'inspira' o l√≠quido para expandir os alv√©olos.",
  comment: "A aspira√ß√£o de l√≠quido amni√≥tico pelo feto √© fundamental para o desenvolvimento e a matura√ß√£o dos alv√©olos pulmonares.",
  topic: "Fun√ß√µes do L√≠quido Amni√≥tico"
},
{
  question: "O que √© o mec√¥nio em rela√ß√£o ao feto?",
  options: [
    "A) O l√≠quido amni√≥tico que o feto engole.",
    "B) A primeira urina fetal.",
    "C) As fezes do feto.",
    "D) O fluido produzido pelos pulm√µes fetais."
  ],
  correctAnswer: "C) As fezes do feto.",
  comment: "Mec√¥nio s√£o as primeiras fezes do feto, normalmente eliminadas ap√≥s o nascimento. Sua libera√ß√£o intrauterina √© um sinal de sofrimento fetal.",
  topic: "Mec√¥nio"
},
{
  question: "Se houver sofrimento fetal e o feto aspirar mec√¥nio liberado no l√≠quido amni√≥tico, qual complica√ß√£o grave pode ocorrer?",
  options: [
    "A) Hidropsia fetal.",
    "B) S√≠ndrome de Aspira√ß√£o de Mec√¥nio.",
    "C) Acretismo placent√°rio.",
    "D) Placenta pr√©via."
  ],
  correctAnswer: "B) S√≠ndrome de Aspira√ß√£o de Mec√¥nio.",
  comment: "A S√≠ndrome de Aspira√ß√£o de Mec√¥nio √© uma emerg√™ncia neonatal grave, caracterizada por pneumonia qu√≠mica e obstru√ß√£o das vias a√©reas devido √† aspira√ß√£o de mec√¥nio.",
  topic: "Mec√¥nio - Complica√ß√µes"
},
{
  question: "Qual procedimento invasivo √© utilizado para coleta de l√≠quido amni√≥tico, empregado para diagn√≥sticos gen√©ticos ou avalia√ß√£o de maturidade pulmonar fetal?",
  options: [
    "A) Bi√≥psia de vilo corial.",
    "B) Cordocentese.",
    "C) Amniocentese.",
    "D) Ultrassonografia morfol√≥gica."
  ],
  correctAnswer: "C) Amniocentese.",
  comment: "A amniocentese √© um procedimento diagn√≥stico que envolve a coleta de uma amostra de l√≠quido amni√≥tico, com indica√ß√µes para avalia√ß√£o gen√©tica e de maturidade pulmonar.",
  topic: "Procedimentos Diagn√≥sticos"
} ];

    function buildQuiz() {
        const output = [];
        questions.forEach((currentQuestion, questionNumber) => {
            const options = [];
            for (let i = 0; i < currentQuestion.options.length; i++) {
                // Note o uso de ${...} para template literals do JS dentro da f-string
                options.push(
                    `<label class="option" data-question="${questionNumber}" data-value="${currentQuestion.options[i]}">
                        <img src="tesouras.png" class="scissor-icon" onclick="event.stopPropagation(); this.parentNode.classList.toggle('struck-through');">
                        ${currentQuestion.options[i]}
                    </label>`
                );
            }
            output.push(
                `<div class="card" id="question-${questionNumber}" data-topic="${currentQuestion.topic}">
                    <div class="question">${currentQuestion.question}</div>
                    <div class="options">${options.join("")}</div>
                    <div class="comment" id="comment-${questionNumber}"></div>
                </div>`
            );
        });
        quizContainer.innerHTML = output.join("");
    }

    function showResults() {
        wrongQuestionIndices = [];
        errorCountByTopic = {};
        totalAnsweredQuestionsByTopic = {};
        currentWrongQuestionIndex = -1;
        hasErrors = false;
        errorDiagnosisSection.style.display = 'none';
        topicsToReviewList.innerHTML = '';
        statusMessage.textContent = '';

        const allQuestionCards = document.querySelectorAll('.quiz-container .card, #newQuestionsContent .card');
        let correctAnswersCount = 0;
        let totalQuestionsAnswered = 0;

        allQuestionCards.forEach((card, index) => {
            const questionEl = card.querySelector('.question') || card.querySelector('p');
            if (!questionEl) return;
            
            const questionText = questionEl.textContent.trim();
            const optionsContainer = card.querySelector('.options') || card;
            const allOptions = optionsContainer.querySelectorAll('.option, label.option, label');
            const userAnswerElement = optionsContainer.querySelector('.option.selected, label.selected');
            const commentDiv = card.querySelector('.comment');
            const questionTopic = card.dataset.topic || "T√≥pico n√£o informado";

            // Limpa classes
            allOptions.forEach(option => { option.classList.remove('correct', 'incorrect', 'selected'); });
            if (commentDiv) commentDiv.classList.remove('show');

            let correctAnswerValue = null;
            let questionComment = null;

            // L√≥gica para Est√°ticas vs Din√¢micas
            const isStatic = card.id && card.id.startsWith('question-');
            if (isStatic) {
                const questionData = questions.find(q => q.question.trim() === questionText);
                if (questionData) {
                    correctAnswerValue = questionData.correctAnswer.trim();
                    questionComment = questionData.comment;
                }
            } else {
                const correctOpt = optionsContainer.querySelector('.option[data-answer="true"], label[data-answer="true"]');
                if (correctOpt) correctAnswerValue = correctOpt.dataset.value?.trim() || correctOpt.textContent.trim();
                
                const commentElement = card.querySelector('.comment');
                if (commentElement && commentElement.textContent.trim()) questionComment = commentElement.textContent.trim();
            }

            // Verifica resposta
            let userAnswer = null;
            if (userAnswerElement) {
                userAnswerElement.classList.add('selected');
                userAnswer = userAnswerElement.dataset.value?.trim() || userAnswerElement.textContent.trim();
                totalQuestionsAnswered++;
                totalAnsweredQuestionsByTopic[questionTopic] = (totalAnsweredQuestionsByTopic[questionTopic] || 0) + 1;

                if (userAnswer === correctAnswerValue) {
                    correctAnswersCount++;
                } else {
                    hasErrors = true;
                    errorCountByTopic[questionTopic] = (errorCountByTopic[questionTopic] || 0) + 1;
                }
            }

            // Pinta as op√ß√µes
            allOptions.forEach(option => {
                const optionValue = option.dataset.value?.trim() || option.textContent.trim();
                if (optionValue === correctAnswerValue) option.classList.add('correct');
                if (userAnswer && optionValue === userAnswer && userAnswer !== correctAnswerValue) option.classList.add('incorrect');
            });

            if (commentDiv && questionComment) {
                commentDiv.textContent = questionComment;
                commentDiv.classList.add('show');
            }
        });

        resultsContainer.textContent = `Voc√™ acertou ${correctAnswersCount} de ${totalQuestionsAnswered} quest√µes respondidas.`;

        // Diagn√≥stico
        if (hasErrors) {
            for (const topic in errorCountByTopic) {
                const errors = errorCountByTopic[topic];
                const total = totalAnsweredQuestionsByTopic[topic] || 0;
                if (total > 0) {
                    const percent = ((errors / total) * 100).toFixed(1);
                    const li = document.createElement('li');
                    li.textContent = `${topic}: ${percent}% de erros (${errors} de ${total} quest√µes)`;
                    topicsToReviewList.appendChild(li);
                }
            }
            errorDiagnosisSection.style.display = 'block';
            generatedQuestionsSection.style.display = 'block';
            generateNewQuestionsBtn.style.display = 'block';
            errorDiagnosisSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        } else {
            const li = document.createElement('li');
            li.textContent = "ü•≥ Parab√©ns! Voc√™ n√£o teve erros nas quest√µes respondidas.";
            topicsToReviewList.appendChild(li);
        }
    }

    // Listeners
    document.addEventListener("click", function (event) {
        const clickedElement = event.target;
        const optionElement = clickedElement.closest('.option');
        if (optionElement) {
            if (clickedElement.classList.contains("scissor-icon")) {
                event.stopPropagation();
                optionElement.classList.toggle("struck-through");
            } else {
                const parentCard = optionElement.closest('.card');
                const currentQuestionOptions = parentCard.querySelectorAll('.option');
                currentQuestionOptions.forEach(opt => opt.classList.remove("selected"));
                optionElement.classList.add("selected");
            }
        }
    });

    generateNewQuestionsBtn.addEventListener("click", async function() {
        statusMessage.textContent = '‚è≥ Gerando novas perguntas...';
        generateNewQuestionsBtn.disabled = true;
        
        const topics = Object.keys(errorCountByTopic).filter(topic => {
            const errorsInTopic = errorCountByTopic[topic] || 0;
            const totalAnsweredInTopic = totalAnsweredQuestionsByTopic[topic] || 0;
            return errorsInTopic > 0 && totalAnsweredInTopic > 0;
        });
        
        const topicsToSend = topics.length > 0 ? topics : ["fisiologia celular", "biologia"];

        try {
            const response = await fetch('https://www.quizia.xyz/quiz', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ topicos: topicsToSend }),
            });

            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
            
            const data = await response.json();
            newQuestionsContent.innerHTML = '';

            if (data && data.html) {
                newQuestionsContent.innerHTML = data.html.replace(/```html|```/g, '');
                
                newQuestionsContent.querySelectorAll('.card').forEach((card) => {
                    // L√≥gica de limpeza e adi√ß√£o de tesouras (mantida igual)
                    const questionElement = card.querySelector('p');
                    if (questionElement && !questionElement.classList.contains('question')) questionElement.classList.add('question');
                    
                    card.querySelectorAll('label').forEach((label) => {
                        const radioInput = label.querySelector('input[type="radio"]');
                        if (radioInput) {
                            if (radioInput.hasAttribute('data-answer')) label.setAttribute('data-answer', radioInput.getAttribute('data-answer'));
                            radioInput.remove();
                        }
                        if (!label.classList.contains('option')) label.classList.add('option');
                        if (!label.dataset.value) label.dataset.value = label.textContent.trim();
                        if (!label.querySelector('.scissor-icon')) {
                            const scissorIcon = document.createElement('img');
                            scissorIcon.src = 'tesouras.png';
                            scissorIcon.className = 'scissor-icon';
                            scissorIcon.onclick = function(e) { e.stopPropagation(); label.classList.toggle('struck-through'); };
                            label.insertBefore(scissorIcon, label.firstChild);
                        }
                    });
                });
            } else {
                newQuestionsContent.innerHTML = "<p>N√£o foi poss√≠vel gerar novas perguntas.</p>";
            }
            
            generatedQuestionsSection.style.display = 'block';
            generatedQuestionsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            statusMessage.textContent = '‚úÖ Perguntas geradas com sucesso!';
            setTimeout(() => { statusMessage.textContent = '' }, 3000);
            
        } catch (error) {
            console.error('Erro:', error);
            statusMessage.textContent = '‚ùå Erro: ' + error.message;
            setTimeout(() => { statusMessage.textContent = '' }, 5000);
        } finally {
            generateNewQuestionsBtn.disabled = false;
        }
    });

    buildQuiz();
    document.getElementById("verifyAnswersBtn").addEventListener("click", showResults);
</script>
<script src="conexao_firebase.js"></script><script src="navegacao.js"></script><script type="module" src="padrao_simulado.js"></script>
</body>
</html>
