
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Com base na transcri√ß√£o do arquivo, que √© uma aul-10</title>
    <style>
        body { font-family: sans-serif; margin: 0; padding: 20px; display: flex; justify-content: center; align-items: flex-start; min-height: 100vh; background-color: #f4f4f4; }
        .quiz-container { max-width: 800px; width: 100%; }
        h1 { color: #333; text-align: center; margin-bottom: 30px; }
        .card { background-color: white; border-radius: 8px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); }
        .question { font-weight: bold; margin-bottom: 10px; color: #333; }
        .options { margin-top: 15px; }
        
        /* Estilos das op√ß√µes */
        .option, label.option, label, #newQuestionsContent label { display: flex; align-items: center; margin-bottom: 10px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; cursor: pointer; transition: background-color 0.2s ease; position: relative; }
        
        /* Ocultar Radio inputs */
        .option input[type="radio"], label input[type="radio"], #newQuestionsContent input[type="radio"], #newQuestionsContent label input[type="radio"] { display: none !important; visibility: hidden !important; opacity: 0 !important; position: absolute !important; left: -9999px !important; }
        
        .option:hover, label.option:hover, label:hover, #newQuestionsContent label:hover { background-color: #e9e9e9; }
        .option.selected, label.option.selected, label.selected, #newQuestionsContent label.selected { background-color: #d1e7dd; border-color: #28a745; }
        .option.correct, label.option.correct, label.correct, #newQuestionsContent label.correct { background-color: #d4edda; border-color: #28a745; }
        .option.incorrect, label.option.incorrect, label.incorrect, #newQuestionsContent label.incorrect { background-color: #f8d7da; border-color: #dc3545; }
        
        .submit-btn { display: block; width: 100%; padding: 15px; background-color: #007bff; color: white; border: none; border-radius: 5px; font-size: 18px; cursor: pointer; transition: background-color 0.3s ease; margin-top: 30px; }
        .submit-btn:hover { background-color: #0056b3; }
        
        .results { text-align: center; margin-top: 30px; font-size: 20px; font-weight: bold; color: #333; }
        .scissor-icon { margin-right: 10px; width: 20px; height: 20px; opacity: 0.5; cursor: pointer; }
        .scissor-icon.hidden { display: none; }
        .struck-through { text-decoration: line-through; color: #888; }
        
        .comment { margin-top: 10px; padding: 10px; background-color: #f0f0f0; border-left: 4px solid #007bff; font-style: italic; color: #555; display: none; }
        .comment.show { display: block; }
        
        .card-bloco { border: 1px solid #ddd; border-radius: 6px; padding: 10px; background: #fff; margin-bottom: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        
        /* Diagn√≥stico e Erros */
        .error-diagnosis-section { margin-top: 50px; padding: 30px; background-color: #ffe0b2; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.15); display: none; text-align: center; font-size: 1.1em; color: #333; }
        .error-diagnosis-section h2 { color: #e65100; margin-bottom: 20px; font-size: 1.8em; }
        .error-diagnosis-section ul { list-style: none; padding: 0; margin: 0; }
        .error-diagnosis-section li { background-color: #ff9800; color: white; padding: 8px 15px; margin: 8px 0; border-radius: 5px; display: inline-block; margin-right: 10px; font-weight: bold; }
    </style>
</head>
<body>

    <div class="quiz-container" id="quiz-container">
        <h1>Com base na transcri√ß√£o do arquivo, que √© uma aul-10</h1>
        
        <div id="quiz"></div>
        
        <button class="submit-btn" id="verifyAnswersBtn">Verificar Respostas</button>
        <button class="generate-questions-btn submit-btn" id="generateNewQuestionsBtn" style="display:none;">Gerar Novas Perguntas</button>
        
        <div class="results card-bloco" id="results"></div>
        <div id="statusMessage" style="text-align: center; margin-top: 10px; font-weight: bold; color: #007bff;"></div>
        
        <div class="error-diagnosis-section card-bloco" id="errorDiagnosis">
            <h2>Diagn√≥stico de Erros</h2>
            <p>Parece que voc√™ precisa revisar os seguintes assuntos:</p>
            <ul id="topicsToReview"></ul>
        </div>
        
        <div class="generated-questions-section card-bloco" id="generatedQuestionsSection" style="display:none;">
            <h2>Novas Perguntas Geradas</h2>
            <div id="newQuestionsContent"></div>
        </div>
    </div>

<script>
    const quizContainer = document.getElementById("quiz");
    const resultsContainer = document.getElementById("results");
    const errorDiagnosisSection = document.getElementById("errorDiagnosis");
    const topicsToReviewList = document.getElementById("topicsToReview");
    const generateNewQuestionsBtn = document.getElementById("generateNewQuestionsBtn");
    const generatedQuestionsSection = document.getElementById("generatedQuestionsSection");
    const newQuestionsContent = document.getElementById("newQuestionsContent");
    const statusMessage = document.getElementById("statusMessage");

    let wrongQuestionIndices = [];
    let errorCountByTopic = {};  // CORRIGIDO: chaves duplas para objeto JS vazio
    let totalAnsweredQuestionsByTopic = {}; // CORRIGIDO
    let currentWrongQuestionIndex = -1;
    let hasErrors = false;

    // Inicializa display
    errorDiagnosisSection.style.display = 'none';
    topicsToReviewList.innerHTML = '';
    statusMessage.textContent = '';

    // AQUI entra a vari√°vel Python, ent√£o usamos chaves simples:
    const questions = [ {
  question: "Quais s√£o os principais √≥rg√£os internos do sistema reprodutor feminino, de acordo com a aula da Dra. Fl√°via?",
  options: [
    "A) Vulva, clit√≥ris, ov√°rios e √∫tero",
    "B) Ov√°rios, tubas uterinas, √∫tero e vagina",
    "C) Monte de V√™nus, pequenos l√°bios, vagina e √∫tero",
    "D) Clit√≥ris, vagina, √∫tero e tubas uterinas"
  ],
  correctAnswer: "B) Ov√°rios, tubas uterinas, √∫tero e vagina",
  comment: "A aula define os √≥rg√£os internos como ov√°rios, tubas uterinas (trompas de Fal√≥pio), √∫tero e vagina.",
  topic: "Anatomia Feminina Interna"
},
{
  question: "Qual a distin√ß√£o correta entre 'vagina' e 'vulva' apresentada na aula?",
  options: [
    "A) Vagina √© a parte externa e vulva √© o canal interno.",
    "B) Vagina √© o canal muscular interno e vulva √© a parte externa.",
    "C) Vagina e vulva s√£o termos sin√¥nimos para a genit√°lia externa.",
    "D) Vulva se refere ao colo do √∫tero e vagina ao canal de parto."
  ],
  correctAnswer: "B) Vagina √© o canal muscular interno e vulva √© a parte externa.",
  comment: "A professora esclarece que 'vagina' refere-se ao canal muscular interno que conecta a vulva ao colo do √∫tero, enquanto 'vulva' √© a parte externa.",
  topic: "Nomenclatura Anat√¥mica Feminina"
},
{
  question: "Quais estruturas s√£o consideradas parte da vulva, segundo a descri√ß√£o da aula?",
  options: [
    "A) Ov√°rios, √∫tero e tubas uterinas",
    "B) Colo do √∫tero, canal vaginal e uretra",
    "C) Monte de V√™nus, grandes l√°bios, pequenos l√°bios, clit√≥ris e vest√≠bulo",
    "D) Clit√≥ris, vagina e gl√¢ndulas de Bartholin"
  ],
  correctAnswer: "C) Monte de V√™nus, grandes l√°bios, pequenos l√°bios, clit√≥ris e vest√≠bulo",
  comment: "As estruturas da vulva incluem o monte de V√™nus, grandes l√°bios, pequenos l√°bios, clit√≥ris e vest√≠bulo.",
  topic: "Anatomia da Vulva"
},
{
  question: "Qual a fun√ß√£o dos pelos pubianos no sistema reprodutor feminino, conforme a aula?",
  options: [
    "A) Atrair parceiros sexuais atrav√©s de ferom√¥nios.",
    "B) Atuar como barreira f√≠sica de prote√ß√£o para a microbiota vaginal.",
    "C) Regular a temperatura da regi√£o genital.",
    "D) Produzir lubrifica√ß√£o durante a rela√ß√£o sexual."
  ],
  correctAnswer: "B) Atuar como barreira f√≠sica de prote√ß√£o para a microbiota vaginal.",
  comment: "Os pelos pubianos atuam como uma barreira f√≠sica de prote√ß√£o para a microbiota vaginal, prevenindo a entrada de pat√≥genos.",
  topic: "Fun√ß√£o dos Pelos Pubianos"
},
{
  question: "O clit√≥ris √© descrito na aula como um √≥rg√£o er√©til. A qual √≥rg√£o masculino ele √© hom√≥logo e qual sua principal fun√ß√£o?",
  options: [
    "A) Ao escroto masculino, respons√°vel pela produ√ß√£o de espermatozoides.",
    "B) Ao p√™nis masculino, sendo altamente sens√≠vel e respons√°vel pelo prazer.",
    "C) √Ä pr√≥stata masculina, respons√°vel pela produ√ß√£o de l√≠quido seminal.",
    "D) Ao epid√≠dimo masculino, respons√°vel pela matura√ß√£o dos gametas."
  ],
  correctAnswer: "B) Ao p√™nis masculino, sendo altamente sens√≠vel e respons√°vel pelo prazer.",
  comment: "O clit√≥ris √© hom√≥logo ao p√™nis masculino, sendo um √≥rg√£o er√©til, altamente sens√≠vel e respons√°vel pelo prazer.",
  topic: "Homologia Sexual e Clit√≥ris"
},
{
  question: "O uso de testosterona por mulheres pode levar a qual altera√ß√£o no clit√≥ris, conforme mencionado na aula?",
  options: [
    "A) Diminui√ß√£o da sensibilidade clitoriana.",
    "B) Clitoromegalia (crescimento do clit√≥ris) devido √† presen√ßa de receptores para andr√≥genos.",
    "C) Atrofia clitoriana e perda da fun√ß√£o er√©til.",
    "D) Altera√ß√£o da cor e textura da pele clitoriana."
  ],
  correctAnswer: "B) Clitoromegalia (crescimento do clit√≥ris) devido √† presen√ßa de receptores para andr√≥genos.",
  comment: "O uso de testosterona por mulheres pode causar viriliza√ß√£o, incluindo o crescimento do clit√≥ris (clitoromegalia), pois este possui receptores para andr√≥genos.",
  topic: "Efeitos de Anabolizantes no Clit√≥ris"
},
{
  question: "Quais s√£o as duas principais fun√ß√µes dos ov√°rios mencionadas na aula?",
  options: [
    "A) Produ√ß√£o de espermatozoides e testosterona.",
    "B) Produ√ß√£o de estrog√™nio, progesterona e armazenamento de o√≥citos.",
    "C) Armazenamento de s√™men e produ√ß√£o de muco cervical.",
    "D) Fecunda√ß√£o e desenvolvimento embrion√°rio inicial."
  ],
  correctAnswer: "B) Produ√ß√£o de estrog√™nio, progesterona e armazenamento de o√≥citos.",
  comment: "Os ov√°rios produzem estrog√™nio e progesterona e armazenam os o√≥citos.",
  topic: "Fun√ß√µes dos Ov√°rios"
},
{
  question: "Qual caracter√≠stica define a reserva ovariana da mulher desde o nascimento?",
  options: [
    "A) √â constantemente renovada ao longo da vida.",
    "B) A mulher nasce com um n√∫mero fixo de o√≥citos, que n√£o s√£o renovados.",
    "C) A reserva ovariana aumenta significativamente na puberdade.",
    "D) Os o√≥citos s√£o produzidos continuamente, como os espermatozoides."
  ],
  correctAnswer: "B) A mulher nasce com um n√∫mero fixo de o√≥citos, que n√£o s√£o renovados.",
  comment: "A mulher nasce com um n√∫mero fixo de o√≥citos (1 a 2 milh√µes), que n√£o s√£o renovados, apenas maturados ou degenerados ao longo da vida.",
  topic: "Reserva Ovariana"
},
{
  question: "Qual a fun√ß√£o prim√°ria das tubas uterinas (trompas de Fal√≥pio) descrita na aula?",
  options: [
    "A) Produ√ß√£o de horm√¥nios sexuais femininos.",
    "B) Armazenamento de o√≥citos maduros.",
    "C) Captar o o√≥cito liberado e ser o local onde ocorre a fertiliza√ß√£o.",
    "D) Proteger o √∫tero contra infec√ß√µes bacterianas."
  ],
  correctAnswer: "C) Captar o o√≥cito liberado e ser o local onde ocorre a fertiliza√ß√£o.",
  comment: "As tubas uterinas captam o o√≥cito liberado atrav√©s das f√≠mbrias e s√£o o local onde ocorre a fertiliza√ß√£o.",
  topic: "Fun√ß√£o das Tubas Uterinas"
},
{
  question: "Como o √∫tero se prepara mensalmente para uma poss√≠vel gravidez, e o que ocorre se n√£o houver fecunda√ß√£o?",
  options: [
    "A) Ele se contrai para expelir o√≥citos; se n√£o houver fecunda√ß√£o, os o√≥citos s√£o reabsorvidos.",
    "B) Ele espessa o endom√©trio para receber um embri√£o; se n√£o houver fecunda√ß√£o, ocorre a menstrua√ß√£o.",
    "C) Ele produz mais muco cervical; se n√£o houver fecunda√ß√£o, o muco se solidifica.",
    "D) Ele aumenta seu tamanho; se n√£o houver fecunda√ß√£o, ele atrofia."
  ],
  correctAnswer: "B) Ele espessa o endom√©trio para receber um embri√£o; se n√£o houver fecunda√ß√£o, ocorre a menstrua√ß√£o.",
  comment: "O √∫tero prepara-se mensalmente (espessamento do endom√©trio) para receber um embri√£o. Se n√£o houver fecunda√ß√£o, ocorre a menstrua√ß√£o.",
  topic: "Ciclo Uterino e Menstrua√ß√£o"
},
{
  question: "No processo de sele√ß√£o folicular em cada ciclo menstrual, o que geralmente acontece?",
  options: [
    "A) Todos os fol√≠culos recrutados liberam um o√≥cito.",
    "B) Apenas um fol√≠culo se torna dominante e libera o o√≥cito, enquanto os outros sofrem atresia.",
    "C) A sele√ß√£o folicular ocorre apenas na menopausa.",
    "D) O n√∫mero de fol√≠culos recrutados √© fixo e todos amadurecem."
  ],
  correctAnswer: "B) Apenas um fol√≠culo se torna dominante e libera o o√≥cito, enquanto os outros sofrem atresia.",
  comment: "Em cada ciclo menstrual, v√°rios fol√≠culos s√£o recrutados e estimulados hormonalmente, mas geralmente apenas um se torna dominante e libera o o√≥cito.",
  topic: "Sele√ß√£o Folicular"
},
{
  question: "O que √© o processo de atresia no contexto da din√¢mica folicular?",
  options: [
    "A) A matura√ß√£o completa de todos os fol√≠culos ovarianos.",
    "B) A degenera√ß√£o e reabsor√ß√£o dos fol√≠culos que foram estimulados mas n√£o ovularam.",
    "C) A libera√ß√£o do o√≥cito do fol√≠culo maduro.",
    "D) O processo de fertiliza√ß√£o dentro da tuba uterina."
  ],
  correctAnswer: "B) A degenera√ß√£o e reabsor√ß√£o dos fol√≠culos que foram estimulados mas n√£o ovularam.",
  comment: "Os fol√≠culos que foram estimulados mas n√£o ovularam sofrem um processo de degenera√ß√£o chamado atresia e s√£o reabsorvidos pelo corpo.",
  topic: "Atresia Folicular"
},
{
  question: "Considerando a vida f√©rtil da mulher (aprox. 40 anos), qual o n√∫mero aproximado de ovula√ß√µes na vida, segundo a Dra. Fl√°via?",
  options: [
    "A) Cerca de 1 a 2 milh√µes de ovula√ß√µes.",
    "B) Aproximadamente 50 a 100 ovula√ß√µes.",
    "C) Cerca de 480 a 500 ovula√ß√µes.",
    "D) Mais de 1000 ovula√ß√µes."
  ],
  correctAnswer: "C) Cerca de 480 a 500 ovula√ß√µes.",
  comment: "Considerando a mulher menstrua dos ~11 aos ~50 anos (aprox. 40 anos de vida f√©rtil) e libera cerca de um o√≥cito por m√™s, ela ovular√° aproximadamente 480 a 500 vezes na vida.",
  topic: "Matem√°tica da Fertilidade"
},
{
  question: "Qual o impacto do envelhecimento da mulher na qualidade dos o√≥citos e na sele√ß√£o de quais o√≥citos s√£o liberados?",
  options: [
    "A) O corpo tende a liberar os melhores o√≥citos em idades mais avan√ßadas.",
    "B) A reserva ovariana aumenta com a idade, melhorando a qualidade dos o√≥citos.",
    "C) O corpo passa a liberar o√≥citos que poderiam ter sido descartados anteriormente devido a defeitos.",
    "D) N√£o h√° rela√ß√£o entre a idade da mulher e a qualidade dos o√≥citos liberados."
  ],
  correctAnswer: "C) O corpo passa a liberar o√≥citos que poderiam ter sido descartados anteriormente devido a defeitos.",
  comment: "√Ä medida que a mulher envelhece e a reserva ovariana diminui, o organismo passa a liberar o√≥citos que poderiam ter sido descartados anteriormente devido a defeitos.",
  topic: "Envelhecimento Oocit√°rio"
},
{
  question: "Qual o principal risco gen√©tico associado a o√≥citos envelhecidos, conforme a aula?",
  options: [
    "A) Muta√ß√£o g√™nica que leva √† anemia falciforme.",
    "B) Nondisjun√ß√£o cromoss√¥mica, resultando em aneuploidias como a S√≠ndrome de Down.",
    "C) Aumento da chance de g√™meos monozig√≥ticos.",
    "D) Diminui√ß√£o da viabilidade do espermatozoide."
  ],
  correctAnswer: "B) Nondisjun√ß√£o cromoss√¥mica, resultando em aneuploidias como a S√≠ndrome de Down.",
  comment: "O√≥citos envelhecidos t√™m maior risco de erros na divis√£o celular (meiose), como a nondisjun√ß√£o cromoss√¥mica, levando a aneuploidias como a Trissomia do 21 (S√≠ndrome de Down).",
  topic: "Riscos Gen√©ticos e Idade Materna"
},
{
  question: "Em que fase da meiose o o√≥cito prim√°rio estaciona at√© a puberdade na mulher?",
  options: [
    "A) Tel√≥fase I",
    "B) Pr√≥fase I",
    "C) Met√°fase II",
    "D) An√°fase II"
  ],
  correctAnswer: "B) Pr√≥fase I",
  comment: "As ovog√¥nias iniciam a meiose, estacionando na fase de o√≥cito prim√°rio (2n) na Pr√≥fase I at√© a puberdade.",
  topic: "Est√°gios da Meiose Feminina"
},
{
  question: "Na puberdade, sob est√≠mulo hormonal, o o√≥cito prim√°rio completa a Meiose I. Quais s√£o os produtos dessa divis√£o?",
  options: [
    "A) Um o√≥cito prim√°rio e um corp√∫sculo polar.",
    "B) Um o√≥cito secund√°rio (n) e o primeiro corp√∫sculo polar (descartado).",
    "C) Dois o√≥citos secund√°rios (n).",
    "D) Um zigoto (2n) e um corp√∫sculo polar."
  ],
  correctAnswer: "B) Um o√≥cito secund√°rio (n) e o primeiro corp√∫sculo polar (descartado).",
  comment: "Sob est√≠mulo hormonal (LH/FSH), o o√≥cito prim√°rio completa a Meiose I, gerando o o√≥cito secund√°rio (n) e o primeiro corp√∫sculo polar (que √© descartado).",
  topic: "Meiose I na Puberdade"
},
{
  question: "Em que est√°gio da meiose o o√≥cito √© liberado do ov√°rio durante a ovula√ß√£o?",
  options: [
    "A) O√≥cito prim√°rio em Pr√≥fase I.",
    "B) Ovog√¥nia em Mitose.",
    "C) O√≥cito secund√°rio em Met√°fase II.",
    "D) Zigoto ap√≥s a fecunda√ß√£o."
  ],
  correctAnswer: "C) O√≥cito secund√°rio em Met√°fase II.",
  comment: "O o√≥cito liberado √© o secund√°rio, estacionado na met√°fase II.",
  topic: "O√≥cito Ovulado"
},
{
  question: "O que √© necess√°rio para que a Meiose II se complete no o√≥cito feminino?",
  options: [
    "A) Atingir a puberdade.",
    "B) O est√≠mulo hormonal de LH/FSH.",
    "C) A entrada do espermatozoide.",
    "D) A implanta√ß√£o no √∫tero."
  ],
  correctAnswer: "C) A entrada do espermatozoide.",
  comment: "A Meiose II s√≥ se completa se houver a entrada do espermatozoide. Isso libera o segundo corp√∫sculo polar e forma o zigoto (2n).",
  topic: "Meiose II e Fecunda√ß√£o"
},
{
  question: "A menarca, que marca o in√≠cio da vida reprodutiva, √© frequentemente acompanhada por qual caracter√≠stica nos primeiros ciclos?",
  options: [
    "A) Ovula√ß√µes regulares e ciclos f√©rteis.",
    "B) Ciclos anovulat√≥rios (sem ovula√ß√£o).",
    "C) Gravidez imediata.",
    "D) Ciclos menstruais muito curtos."
  ],
  correctAnswer: "B) Ciclos anovulat√≥rios (sem ovula√ß√£o).",
  comment: "A menarca (primeira menstrua√ß√£o) marca o in√≠cio da vida reprodutiva, mas os primeiros ciclos podem ser anovulat√≥rios (sem ovula√ß√£o).",
  topic: "Puberdade e Menarca"
},
{
  question: "Por que a 'tabelinha' √© considerada um m√©todo contraceptivo pouco confi√°vel, de acordo com a aula?",
  options: [
    "A) Porque a ovula√ß√£o ocorre sempre no mesmo dia do ciclo.",
    "B) Porque o ciclo menstrual pode variar (21 a 35 dias), dificultando prever a ovula√ß√£o.",
    "C) Porque os espermatozoides n√£o sobrevivem no trato feminino.",
    "D) Porque a temperatura basal n√£o se altera durante o ciclo."
  ],
  correctAnswer: "B) Porque o ciclo menstrual pode variar (21 a 35 dias), dificultando prever a ovula√ß√£o.",
  comment: "A ovula√ß√£o ocorre, em teoria, 14 dias antes da menstrua√ß√£o, mas o ciclo pode variar (21 a 35 dias), tornando a 'tabelinha' um m√©todo contraceptivo pouco confi√°vel.",
  topic: "M√©todos Contraceptivos"
},
{
  question: "Qual a dura√ß√£o da sobrevida do espermatozoide no trato reprodutivo feminino mencionada na aula?",
  options: [
    "A) Cerca de 6 a 12 horas.",
    "B) Aproximadamente 24 horas.",
    "C) Cerca de 36 horas a 3-5 dias.",
    "D) Mais de uma semana."
  ],
  correctAnswer: "C) Cerca de 36 horas a 3-5 dias.",
  comment: "O espermatozoide pode sobreviver no trato reprodutivo feminino por cerca de 36 horas a 3-5 dias, enquanto o o√≥cito tem uma janela de viabilidade curta.",
  topic: "Sobreviv√™ncia dos Gametas"
},
{
  question: "Para prote√ß√£o contra pat√≥genos, o trato feminino √© considerado hostil aos espermatozoides. Quais s√£o as caracter√≠sticas que contribuem para essa hostilidade?",
  options: [
    "A) pH alcalino, sistema imune inativo e muco fluido.",
    "B) pH neutro, aus√™ncia de c√©lulas imunes e muco ausente.",
    "C) pH √°cido, sistema imune ativo e muco espesso.",
    "D) pH √°cido, sistema imune inativo e muco fluido."
  ],
  correctAnswer: "C) pH √°cido, sistema imune ativo e muco espesso.",
  comment: "O trato feminino √© hostil aos espermatozoides para prote√ß√£o contra pat√≥genos (pH √°cido, sistema imune, muco espesso).",
  topic: "Meios de Prote√ß√£o Feminina"
},
{
  question: "Durante o per√≠odo f√©rtil, o que acontece com o muco cervical para facilitar a passagem dos espermatozoides?",
  options: [
    "A) Torna-se mais espesso e denso.",
    "B) Torna-se mais fluido (filante).",
    "C) Desaparece completamente.",
    "D) N√£o sofre altera√ß√£o."
  ],
  correctAnswer: "B) Torna-se mais fluido (filante).",
  comment: "Durante o per√≠odo f√©rtil, o muco cervical torna-se mais fluido (filante) para facilitar a nata√ß√£o dos espermatozoides.",
  topic: "Muco Cervical e Fertilidade"
},
{
  question: "Qual a caracter√≠stica do pH do s√™men que ajuda na fertiliza√ß√£o?",
  options: [
    "A) √â √°cido para complementar o pH vaginal.",
    "B) √â neutro, sem impacto no pH vaginal.",
    "C) √â alcalino para neutralizar a acidez vaginal.",
    "D) √â vari√°vel e n√£o tem fun√ß√£o espec√≠fica."
  ],
  correctAnswer: "C) √â alcalino para neutralizar a acidez vaginal.",
  comment: "O s√™men √© alcalino para neutralizar a acidez vaginal.",
  topic: "pH do S√™men"
},
{
  question: "Qual √© o principal fator de risco para anomalias cromoss√¥micas como a S√≠ndrome de Down, Edwards e Patau, de acordo com a aula?",
  options: [
    "A) Estilo de vida do pai.",
    "B) Idade materna avan√ßada.",
    "C) Dieta rica em vitaminas.",
    "D) Uso de suplementos durante a gravidez."
  ],
  correctAnswer: "B) Idade materna avan√ßada.",
  comment: "A idade materna √© o principal fator para anomalias cromoss√¥micas (ex: S√≠ndrome de Down, Edwards, Patau), devido ao mau funcionamento do fuso mei√≥tico das c√©lulas mais velhas.",
  topic: "Fatores de Risco para Anomalias Cromoss√¥micas"
},
{
  question: "Quais fatores de estilo de vida s√£o mencionados como impactantes negativamente na produ√ß√£o hormonal e qualidade dos gametas?",
  options: [
    "A) Pr√°tica regular de exerc√≠cios e dieta equilibrada.",
    "B) Tabagismo, drogas, obesidade, m√° alimenta√ß√£o e desidrata√ß√£o.",
    "C) Consumo moderado de √°lcool e caf√©.",
    "D) Exposi√ß√£o √† luz solar e sono adequado."
  ],
  correctAnswer: "B) Tabagismo, drogas, obesidade, m√° alimenta√ß√£o e desidrata√ß√£o.",
  comment: "Tabagismo, drogas, obesidade, m√° alimenta√ß√£o e desidrata√ß√£o impactam negativamente a produ√ß√£o hormonal e a qualidade dos gametas (epigen√©tica).",
  topic: "Impacto do Estilo de Vida na Fertilidade"
},
{
  question: "O que √© endometriose, segundo a defini√ß√£o apresentada na aula, e qual a teoria da menstrua√ß√£o retr√≥grada?",
  options: [
    "A) √â a presen√ßa de tecido ovariano fora do √∫tero, causada por ovula√ß√£o m√∫ltipla.",
    "B) √â a presen√ßa de tecido endometrial fora do √∫tero, com a teoria de sangue menstrual refluindo pelas tubas.",
    "C) √â uma inflama√ß√£o do √∫tero causada por infec√ß√£o bacteriana, sem rela√ß√£o com o endom√©trio.",
    "D) √â a degenera√ß√£o do endom√©trio antes da menstrua√ß√£o, com refluxo de muco cervical."
  ],
  correctAnswer: "B) √â a presen√ßa de tecido endometrial fora do √∫tero, com a teoria de sangue menstrual refluindo pelas tubas.",
  comment: "Endometriose √© a presen√ßa de tecido endometrial fora do √∫tero. A teoria da menstrua√ß√£o retr√≥grada sugere que o sangue menstrual reflui pelas tubas e leva c√©lulas endometriais para outros √≥rg√£os.",
  topic: "Endometriose e Menstrua√ß√£o Retr√≥grada"
},
{
  question: "Qual o termo t√©cnico correto para o gameta feminino liberado, de acordo com a Dra. Fl√°via?",
  options: [
    "A) Ovog√¥nia.",
    "B) √ìvulo (popularmente usado).",
    "C) O√≥cito prim√°rio.",
    "D) O√≥cito secund√°rio (tecnicamente correto)."
  ],
  correctAnswer: "D) O√≥cito secund√°rio (tecnicamente correto).",
  comment: "A professora refor√ßa que o termo t√©cnico correto para o gameta feminino liberado √© o√≥cito secund√°rio, embora '√≥vulo' seja usado popularmente.",
  topic: "Terminologia do Gameta Feminino"
},
{
  question: "Qual a principal fun√ß√£o do sistema reprodutor masculino, conforme a aula?",
  options: [
    "A) Produ√ß√£o de estrog√™nio e progesterona.",
    "B) Produ√ß√£o de espermatozoides e transporte para o trato feminino.",
    "C) Armazenamento de o√≥citos e fertiliza√ß√£o.",
    "D) Produ√ß√£o de √≥vulos e desenvolvimento embrion√°rio."
  ],
  correctAnswer: "B) Produ√ß√£o de espermatozoides e transporte para o trato feminino.",
  comment: "A fun√ß√£o do sistema reprodutor masculino √© a produ√ß√£o de espermatozoides (test√≠culos) e transporte (vias esperm√°ticas) para o trato feminino.",
  topic: "Fun√ß√£o do Sistema Reprodutor Masculino"
},
{
  question: "Quais s√£o as duas fun√ß√µes principais dos test√≠culos?",
  options: [
    "A) Armazenamento de s√™men e produ√ß√£o de muco.",
    "B) Produ√ß√£o de espermatozoides e testosterona.",
    "C) Transporte de espermatozoides e lubrifica√ß√£o.",
    "D) Armazenamento de urina e regula√ß√£o do pH."
  ],
  correctAnswer: "B) Produ√ß√£o de espermatozoides e testosterona.",
  comment: "Os test√≠culos s√£o as g√¥nadas que produzem espermatozoides (t√∫bulos semin√≠feros) e testosterona.",
  topic: "Fun√ß√£o dos Test√≠culos"
},
{
  question: "Qual a fun√ß√£o do epid√≠dimo no sistema reprodutor masculino?",
  options: [
    "A) Produzir o plasma seminal.",
    "B) Armazenar e amadurecer os espermatozoides, que adquirem motilidade.",
    "C) Transportar os espermatozoides do test√≠culo para a uretra.",
    "D) Produzir testosterona."
  ],
  correctAnswer: "B) Armazenar e amadurecer os espermatozoides, que adquirem motilidade.",
  comment: "O epid√≠dimo √© o local de armazenamento e matura√ß√£o final dos espermatozoides, onde adquirem motilidade.",
  topic: "Fun√ß√£o do Epid√≠dimo"
},
{
  question: "Qual a contribui√ß√£o das gl√¢ndulas acess√≥rias masculinas (ves√≠culas seminais, pr√≥stata e gl√¢ndulas bulbouretrais)?",
  options: [
    "A) Produ√ß√£o de espermatozoides.",
    "B) Produ√ß√£o de testosterona.",
    "C) Produ√ß√£o do plasma seminal (nutri√ß√£o, prote√ß√£o e pH alcalino).",
    "D) Armazenamento de espermatozoides."
  ],
  correctAnswer: "C) Produ√ß√£o do plasma seminal (nutri√ß√£o, prote√ß√£o e pH alcalino).",
  comment: "As gl√¢ndulas acess√≥rias (ves√≠culas seminais, pr√≥stata e gl√¢ndulas bulbouretrais - Cowper) produzem o plasma seminal (nutri√ß√£o, prote√ß√£o e pH alcalino).",
  topic: "Gl√¢ndulas Acess√≥rias Masculinas"
},
{
  question: "Qual a principal diferen√ßa entre a uretra masculina e feminina, conforme a aula?",
  options: [
    "A) Na mulher, a uretra √© mais longa.",
    "B) No homem, a uretra √© exclusiva para a urina; na mulher, para urina e s√™men.",
    "C) Na mulher, a uretra √© comum para urina e s√™men; no homem, tem canais separados.",
    "D) No homem, a uretra √© um canal comum para sa√≠da de urina e s√™men; na mulher, tem canais separados."
  ],
  correctAnswer: "D) No homem, a uretra √© um canal comum para sa√≠da de urina e s√™men; na mulher, tem canais separados.",
  comment: "A uretra masculina √© um canal comum para sa√≠da de urina e s√™men, diferente da mulher, que tem canais separados para urina e para o sistema reprodutor.",
  topic: "Anatomia Comparada da Uretra"
},
{
  question: "O que caracteriza o hermafroditismo verdadeiro, segundo a aula?",
  options: [
    "A) Indiv√≠duos geneticamente masculinos com genit√°lia externa feminina.",
    "B) Indiv√≠duos com tecido ovariano e testicular (ovotestis), geralmente n√£o funcionais.",
    "C) Condi√ß√£o comum de autofecunda√ß√£o em humanos.",
    "D) Indiv√≠duos geneticamente femininos com alta produ√ß√£o de testosterona."
  ],
  correctAnswer: "B) Indiv√≠duos com tecido ovariano e testicular (ovotestis), geralmente n√£o funcionais.",
  comment: "Hermafrodita Verdadeiro √© uma condi√ß√£o rar√≠ssima onde o indiv√≠duo possui tecido ovariano e testicular (ovotestis), geralmente n√£o funcionais e sem autofecunda√ß√£o.",
  topic: "Hermafroditismo Verdadeiro"
},
{
  question: "Qual a causa comum do pseudo-hermafroditismo em indiv√≠duos XX (geneticamente femininos) mencionado na aula?",
  options: [
    "A) Falha na produ√ß√£o de estrog√™nio pelos ov√°rios.",
    "B) Exposi√ß√£o a altos n√≠veis de andr√≥genos na vida intrauterina, produzidos pela gl√¢ndula suprarrenal.",
    "C) Presen√ßa de um cromossomo Y extra.",
    "D) Defici√™ncia na produ√ß√£o de espermatozoides."
  ],
  correctAnswer: "B) Exposi√ß√£o a altos n√≠veis de andr√≥genos na vida intrauterina, produzidos pela gl√¢ndula suprarrenal.",
  comment: "Pseudo-hermafroditismo (ex: Hiperplasia Adrenal Cong√™nita) geralmente ocorre em indiv√≠duos XX que foram expostos a altos n√≠veis de andr√≥genos na vida intrauterina (produzidos pela gl√¢ndula suprarrenal/adrenal).",
  topic: "Pseudo-hermafroditismo"
},
{
  question: "Qual a principal diferen√ßa da espermatog√™nese masculina em rela√ß√£o √† ovog√™nese feminina?",
  options: [
    "A) A espermatog√™nese produz gametas apenas uma vez na vida.",
    "B) O homem produz gametas continuamente a partir da puberdade.",
    "C) A espermatog√™nese resulta em apenas um gameta funcional por ciclo.",
    "D) A espermatog√™nese √© um processo que termina antes do nascimento."
  ],
  correctAnswer: "B) O homem produz gametas continuamente a partir da puberdade.",
  comment: "Ao contr√°rio da mulher, o homem produz gametas continuamente a partir da puberdade.",
  topic: "Espermatog√™nese"
},
{
  question: "Ao final do processo de espermatog√™nese, quantas espermatozoides funcionais s√£o geradas a partir de uma espermatog√¥nia?",
  options: [
    "A) Apenas um espermatozoide.",
    "B) Dois espermatozoides.",
    "C) Tr√™s espermatozoides.",
    "D) Quatro espermatozoides."
  ],
  correctAnswer: "D) Quatro espermatozoides.",
  comment: "Uma espermatog√¥nia gera quatro espermatozoides funcionais.",
  topic: "Resultado da Espermatog√™nese"
},
{
  question: "Qual a fun√ß√£o do acrossomo na cabe√ßa do espermatozoide?",
  options: [
    "A) Proporcionar energia para a motilidade.",
    "B) Conter o n√∫cleo haploide do espermatozoide.",
    "C) Armazenar mitoc√¥ndrias para a cauda.",
    "D) Liberar enzimas para penetrar a zona pel√∫cida do o√≥cito."
  ],
  correctAnswer: "D) Liberar enzimas para penetrar a zona pel√∫cida do o√≥cito.",
  comment: "A cabe√ßa do espermatozoide cont√©m o n√∫cleo haploide e o acrossomo com enzimas, que s√£o liberadas para penetrar a zona pel√∫cida do o√≥cito durante a fertiliza√ß√£o.",
  topic: "Estrutura do Espermatozoide"
},
{
  question: "O que caracteriza os g√™meos dizig√≥ticos (bivitelinos/fraternos)?",
  options: [
    "A) Um o√≥cito fecundado por um espermatozoide que se divide posteriormente.",
    "B) Dois o√≥citos fecundados por dois espermatozoides, resultando em irm√£os geneticamente diferentes.",
    "C) S√£o clones gen√©ticos e sempre compartilham a mesma placenta.",
    "D) Resultam da divis√£o tardia e incompleta de um √∫nico zigoto."
  ],
  correctAnswer: "B) Dois o√≥citos fecundados por dois espermatozoides, resultando em irm√£os geneticamente diferentes.",
  comment: "G√™meos Dizig√≥ticos (Bivitelinos/Fraternos) nascem de dois o√≥citos fecundados por dois espermatozoides, sendo como irm√£os comuns e geneticamente diferentes.",
  topic: "Tipos de G√™meos - Dizig√≥ticos"
} ];

    function buildQuiz() {
        const output = [];
        questions.forEach((currentQuestion, questionNumber) => {
            const options = [];
            for (let i = 0; i < currentQuestion.options.length; i++) {
                // Note o uso de ${...} para template literals do JS dentro da f-string
                options.push(
                    `<label class="option" data-question="${questionNumber}" data-value="${currentQuestion.options[i]}">
                        <img src="tesouras.png" class="scissor-icon" onclick="event.stopPropagation(); this.parentNode.classList.toggle('struck-through');">
                        ${currentQuestion.options[i]}
                    </label>`
                );
            }
            output.push(
                `<div class="card" id="question-${questionNumber}" data-topic="${currentQuestion.topic}">
                    <div class="question">${currentQuestion.question}</div>
                    <div class="options">${options.join("")}</div>
                    <div class="comment" id="comment-${questionNumber}"></div>
                </div>`
            );
        });
        quizContainer.innerHTML = output.join("");
    }

    function showResults() {
        wrongQuestionIndices = [];
        errorCountByTopic = {};
        totalAnsweredQuestionsByTopic = {};
        currentWrongQuestionIndex = -1;
        hasErrors = false;
        errorDiagnosisSection.style.display = 'none';
        topicsToReviewList.innerHTML = '';
        statusMessage.textContent = '';

        const allQuestionCards = document.querySelectorAll('.quiz-container .card, #newQuestionsContent .card');
        let correctAnswersCount = 0;
        let totalQuestionsAnswered = 0;

        allQuestionCards.forEach((card, index) => {
            const questionEl = card.querySelector('.question') || card.querySelector('p');
            if (!questionEl) return;
            
            const questionText = questionEl.textContent.trim();
            const optionsContainer = card.querySelector('.options') || card;
            const allOptions = optionsContainer.querySelectorAll('.option, label.option, label');
            const userAnswerElement = optionsContainer.querySelector('.option.selected, label.selected');
            const commentDiv = card.querySelector('.comment');
            const questionTopic = card.dataset.topic || "T√≥pico n√£o informado";

            // Limpa classes
            allOptions.forEach(option => { option.classList.remove('correct', 'incorrect', 'selected'); });
            if (commentDiv) commentDiv.classList.remove('show');

            let correctAnswerValue = null;
            let questionComment = null;

            // L√≥gica para Est√°ticas vs Din√¢micas
            const isStatic = card.id && card.id.startsWith('question-');
            if (isStatic) {
                const questionData = questions.find(q => q.question.trim() === questionText);
                if (questionData) {
                    correctAnswerValue = questionData.correctAnswer.trim();
                    questionComment = questionData.comment;
                }
            } else {
                const correctOpt = optionsContainer.querySelector('.option[data-answer="true"], label[data-answer="true"]');
                if (correctOpt) correctAnswerValue = correctOpt.dataset.value?.trim() || correctOpt.textContent.trim();
                
                const commentElement = card.querySelector('.comment');
                if (commentElement && commentElement.textContent.trim()) questionComment = commentElement.textContent.trim();
            }

            // Verifica resposta
            let userAnswer = null;
            if (userAnswerElement) {
                userAnswerElement.classList.add('selected');
                userAnswer = userAnswerElement.dataset.value?.trim() || userAnswerElement.textContent.trim();
                totalQuestionsAnswered++;
                totalAnsweredQuestionsByTopic[questionTopic] = (totalAnsweredQuestionsByTopic[questionTopic] || 0) + 1;

                if (userAnswer === correctAnswerValue) {
                    correctAnswersCount++;
                } else {
                    hasErrors = true;
                    errorCountByTopic[questionTopic] = (errorCountByTopic[questionTopic] || 0) + 1;
                }
            }

            // Pinta as op√ß√µes
            allOptions.forEach(option => {
                const optionValue = option.dataset.value?.trim() || option.textContent.trim();
                if (optionValue === correctAnswerValue) option.classList.add('correct');
                if (userAnswer && optionValue === userAnswer && userAnswer !== correctAnswerValue) option.classList.add('incorrect');
            });

            if (commentDiv && questionComment) {
                commentDiv.textContent = questionComment;
                commentDiv.classList.add('show');
            }
        });

        resultsContainer.textContent = `Voc√™ acertou ${correctAnswersCount} de ${totalQuestionsAnswered} quest√µes respondidas.`;

        // Diagn√≥stico
        if (hasErrors) {
            for (const topic in errorCountByTopic) {
                const errors = errorCountByTopic[topic];
                const total = totalAnsweredQuestionsByTopic[topic] || 0;
                if (total > 0) {
                    const percent = ((errors / total) * 100).toFixed(1);
                    const li = document.createElement('li');
                    li.textContent = `${topic}: ${percent}% de erros (${errors} de ${total} quest√µes)`;
                    topicsToReviewList.appendChild(li);
                }
            }
            errorDiagnosisSection.style.display = 'block';
            generatedQuestionsSection.style.display = 'block';
            generateNewQuestionsBtn.style.display = 'block';
            errorDiagnosisSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        } else {
            const li = document.createElement('li');
            li.textContent = "ü•≥ Parab√©ns! Voc√™ n√£o teve erros nas quest√µes respondidas.";
            topicsToReviewList.appendChild(li);
        }
    }

    // Listeners
    document.addEventListener("click", function (event) {
        const clickedElement = event.target;
        const optionElement = clickedElement.closest('.option');
        if (optionElement) {
            if (clickedElement.classList.contains("scissor-icon")) {
                event.stopPropagation();
                optionElement.classList.toggle("struck-through");
            } else {
                const parentCard = optionElement.closest('.card');
                const currentQuestionOptions = parentCard.querySelectorAll('.option');
                currentQuestionOptions.forEach(opt => opt.classList.remove("selected"));
                optionElement.classList.add("selected");
            }
        }
    });

    generateNewQuestionsBtn.addEventListener("click", async function() {
        statusMessage.textContent = '‚è≥ Gerando novas perguntas...';
        generateNewQuestionsBtn.disabled = true;
        
        const topics = Object.keys(errorCountByTopic).filter(topic => {
            const errorsInTopic = errorCountByTopic[topic] || 0;
            const totalAnsweredInTopic = totalAnsweredQuestionsByTopic[topic] || 0;
            return errorsInTopic > 0 && totalAnsweredInTopic > 0;
        });
        
        const topicsToSend = topics.length > 0 ? topics : ["fisiologia celular", "biologia"];

        try {
            const response = await fetch('https://www.quizia.xyz/quiz', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ topicos: topicsToSend }),
            });

            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
            
            const data = await response.json();
            newQuestionsContent.innerHTML = '';

            if (data && data.html) {
                newQuestionsContent.innerHTML = data.html.replace(/```html|```/g, '');
                
                newQuestionsContent.querySelectorAll('.card').forEach((card) => {
                    // L√≥gica de limpeza e adi√ß√£o de tesouras (mantida igual)
                    const questionElement = card.querySelector('p');
                    if (questionElement && !questionElement.classList.contains('question')) questionElement.classList.add('question');
                    
                    card.querySelectorAll('label').forEach((label) => {
                        const radioInput = label.querySelector('input[type="radio"]');
                        if (radioInput) {
                            if (radioInput.hasAttribute('data-answer')) label.setAttribute('data-answer', radioInput.getAttribute('data-answer'));
                            radioInput.remove();
                        }
                        if (!label.classList.contains('option')) label.classList.add('option');
                        if (!label.dataset.value) label.dataset.value = label.textContent.trim();
                        if (!label.querySelector('.scissor-icon')) {
                            const scissorIcon = document.createElement('img');
                            scissorIcon.src = 'tesouras.png';
                            scissorIcon.className = 'scissor-icon';
                            scissorIcon.onclick = function(e) { e.stopPropagation(); label.classList.toggle('struck-through'); };
                            label.insertBefore(scissorIcon, label.firstChild);
                        }
                    });
                });
            } else {
                newQuestionsContent.innerHTML = "<p>N√£o foi poss√≠vel gerar novas perguntas.</p>";
            }
            
            generatedQuestionsSection.style.display = 'block';
            generatedQuestionsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            statusMessage.textContent = '‚úÖ Perguntas geradas com sucesso!';
            setTimeout(() => { statusMessage.textContent = '' }, 3000);
            
        } catch (error) {
            console.error('Erro:', error);
            statusMessage.textContent = '‚ùå Erro: ' + error.message;
            setTimeout(() => { statusMessage.textContent = '' }, 5000);
        } finally {
            generateNewQuestionsBtn.disabled = false;
        }
    });

    buildQuiz();
    document.getElementById("verifyAnswersBtn").addEventListener("click", showResults);
</script>
</body>
</html>
