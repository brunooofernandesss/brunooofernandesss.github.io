
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Com base na transcri√ß√£o do arquivo, que √© uma aul-13</title>
    <style>
        body { font-family: sans-serif; margin: 0; padding: 20px; display: flex; justify-content: center; align-items: flex-start; min-height: 100vh; background-color: #f4f4f4; }
        .quiz-container { max-width: 800px; width: 100%; }
        h1 { color: #333; text-align: center; margin-bottom: 30px; }
        .card { background-color: white; border-radius: 8px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); }
        .question { font-weight: bold; margin-bottom: 10px; color: #333; }
        .options { margin-top: 15px; }
        
        /* Estilos das op√ß√µes */
        .option, label.option, label, #newQuestionsContent label { display: flex; align-items: center; margin-bottom: 10px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; cursor: pointer; transition: background-color 0.2s ease; position: relative; }
        
        /* Ocultar Radio inputs */
        .option input[type="radio"], label input[type="radio"], #newQuestionsContent input[type="radio"], #newQuestionsContent label input[type="radio"] { display: none !important; visibility: hidden !important; opacity: 0 !important; position: absolute !important; left: -9999px !important; }
        
        .option:hover, label.option:hover, label:hover, #newQuestionsContent label:hover { background-color: #e9e9e9; }
        .option.selected, label.option.selected, label.selected, #newQuestionsContent label.selected { background-color: #d1e7dd; border-color: #28a745; }
        .option.correct, label.option.correct, label.correct, #newQuestionsContent label.correct { background-color: #d4edda; border-color: #28a745; }
        .option.incorrect, label.option.incorrect, label.incorrect, #newQuestionsContent label.incorrect { background-color: #f8d7da; border-color: #dc3545; }
        
        .submit-btn { display: block; width: 100%; padding: 15px; background-color: #007bff; color: white; border: none; border-radius: 5px; font-size: 18px; cursor: pointer; transition: background-color 0.3s ease; margin-top: 30px; }
        .submit-btn:hover { background-color: #0056b3; }
        
        .results { text-align: center; margin-top: 30px; font-size: 20px; font-weight: bold; color: #333; }
        .scissor-icon { margin-right: 10px; width: 20px; height: 20px; opacity: 0.5; cursor: pointer; }
        .scissor-icon.hidden { display: none; }
        .struck-through { text-decoration: line-through; color: #888; }
        
        .comment { margin-top: 10px; padding: 10px; background-color: #f0f0f0; border-left: 4px solid #007bff; font-style: italic; color: #555; display: none; }
        .comment.show { display: block; }
        
        .card-bloco { border: 1px solid #ddd; border-radius: 6px; padding: 10px; background: #fff; margin-bottom: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        
        /* Diagn√≥stico e Erros */
        .error-diagnosis-section { margin-top: 50px; padding: 30px; background-color: #ffe0b2; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.15); display: none; text-align: center; font-size: 1.1em; color: #333; }
        .error-diagnosis-section h2 { color: #e65100; margin-bottom: 20px; font-size: 1.8em; }
        .error-diagnosis-section ul { list-style: none; padding: 0; margin: 0; }
        .error-diagnosis-section li { background-color: #ff9800; color: white; padding: 8px 15px; margin: 8px 0; border-radius: 5px; display: inline-block; margin-right: 10px; font-weight: bold; }
    </style>
</head>
<body>

    <div class="quiz-container" id="quiz-container">
        <h1>Com base na transcri√ß√£o do arquivo, que √© uma aul-13</h1>
        
        <div id="quiz"></div>
        
        <button class="submit-btn" id="verifyAnswersBtn">Verificar Respostas</button>
        <button class="generate-questions-btn submit-btn" id="generateNewQuestionsBtn" style="display:none;">Gerar Novas Perguntas</button>
        
        <div class="results card-bloco" id="results"></div>
        <div id="statusMessage" style="text-align: center; margin-top: 10px; font-weight: bold; color: #007bff;"></div>
        
        <div class="error-diagnosis-section card-bloco" id="errorDiagnosis">
            <h2>Diagn√≥stico de Erros</h2>
            <p>Parece que voc√™ precisa revisar os seguintes assuntos:</p>
            <ul id="topicsToReview"></ul>
        </div>
        
        <div class="generated-questions-section card-bloco" id="generatedQuestionsSection" style="display:none;">
            <h2>Novas Perguntas Geradas</h2>
            <div id="newQuestionsContent"></div>
        </div>
    </div>

<script>
    const quizContainer = document.getElementById("quiz");
    const resultsContainer = document.getElementById("results");
    const errorDiagnosisSection = document.getElementById("errorDiagnosis");
    const topicsToReviewList = document.getElementById("topicsToReview");
    const generateNewQuestionsBtn = document.getElementById("generateNewQuestionsBtn");
    const generatedQuestionsSection = document.getElementById("generatedQuestionsSection");
    const newQuestionsContent = document.getElementById("newQuestionsContent");
    const statusMessage = document.getElementById("statusMessage");

    let wrongQuestionIndices = [];
    let errorCountByTopic = {};  // CORRIGIDO: chaves duplas para objeto JS vazio
    let totalAnsweredQuestionsByTopic = {}; // CORRIGIDO
    let currentWrongQuestionIndex = -1;
    let hasErrors = false;

    // Inicializa display
    errorDiagnosisSection.style.display = 'none';
    topicsToReviewList.innerHTML = '';
    statusMessage.textContent = '';

    // AQUI entra a vari√°vel Python, ent√£o usamos chaves simples:
    const questions = [ {
  question: "Qual dos seguintes √≥rg√£os N√ÉO faz parte da composi√ß√£o geral do sistema reprodutor masculino, conforme a introdu√ß√£o da aula?",
  options: [
    "A) Test√≠culos",
    "B) Ductos genitais",
    "C) Gl√¢ndulas acess√≥rias",
    "D) Rins"
  ],
  correctAnswer: "D) Rins",
  comment: "A aula menciona que o sistema reprodutor masculino inclui test√≠culos, ductos genitais, gl√¢ndulas acess√≥rias (pr√≥stata, ves√≠cula seminal e bulbouretrais) e o p√™nis. Os rins fazem parte do sistema urin√°rio.",
  topic: "Introdu√ß√£o ao Sistema Reprodutor Masculino"
},
{
  question: "Os test√≠culos s√£o √≥rg√£os com dupla fun√ß√£o. Quais s√£o elas?",
  options: [
    "A) Produ√ß√£o de urina e horm√¥nios",
    "B) Produ√ß√£o de gametas e horm√¥nios",
    "C) Armazenamento de gametas e elimina√ß√£o de res√≠duos",
    "D) Produ√ß√£o de s√™men e controle da temperatura"
  ],
  correctAnswer: "B) Produ√ß√£o de gametas e horm√¥nios",
  comment: "Os test√≠culos s√£o respons√°veis pela produ√ß√£o de gametas (espermatozoides) e horm√¥nios (principalmente a testosterona), conforme descrito no texto.",
  topic: "Fun√ß√£o dos Test√≠culos"
},
{
  question: "Quando se inicia a produ√ß√£o de espermatozoides e como ela se comporta ao longo da vida, em compara√ß√£o com a produ√ß√£o hormonal?",
  options: [
    "A) Inicia na inf√¢ncia e declina com a idade, assim como a hormonal.",
    "B) Inicia na puberdade e continua ao longo da vida, enquanto a produ√ß√£o hormonal declina com o envelhecimento.",
    "C) Inicia na puberdade e declina rapidamente, enquanto a hormonal se mant√©m constante.",
    "D) Inicia na vida adulta e se mant√©m constante, assim como a hormonal."
  ],
  correctAnswer: "B) Inicia na puberdade e continua ao longo da vida, enquanto a produ√ß√£o hormonal declina com o envelhecimento.",
  comment: "A produ√ß√£o de espermatozoides come√ßa na puberdade e continua ao longo da vida, embora a produ√ß√£o hormonal decline com o envelhecimento.",
  topic: "Ciclo de Produ√ß√£o de Espermatozoides e Horm√¥nios"
},
{
  question: "Qual estrutura √© descrita como um folheto peritoneal que se associa ao test√≠culo antes da puberdade e durante a descida testicular?",
  options: [
    "A) T√∫nica albug√≠nea",
    "B) T√∫nica vaginal",
    "C) L√¢mina basal",
    "D) Septos testiculares"
  ],
  correctAnswer: "B) T√∫nica vaginal",
  comment: "Antes da puberdade (e durante a descida testicular), h√° a associa√ß√£o com o perit√¥nio, formando a t√∫nica vaginal (um folheto peritoneal).",
  topic: "Histologia Testicular - T√∫nicas"
},
{
  question: "A c√°psula propriamente dita do test√≠culo, formada por tecido conjuntivo denso n√£o modelado, √© denominada:",
  options: [
    "A) T√∫nica vaginal",
    "B) T√∫nica serosa",
    "C) T√∫nica albug√≠nea",
    "D) Perit√¥nio visceral"
  ],
  correctAnswer: "C) T√∫nica albug√≠nea",
  comment: "A c√°psula propriamente dita do √≥rg√£o √© a t√∫nica albug√≠nea, formada por tecido conjuntivo denso n√£o modelado.",
  topic: "Histologia Testicular - T√∫nica Albug√≠nea"
},
{
  question: "Qual a fun√ß√£o dos septos de tecido conjuntivo emitidos pela t√∫nica albug√≠nea para o interior do test√≠culo?",
  options: [
    "A) Revestir externamente o √≥rg√£o",
    "B) Formar a barreira hematotesticular",
    "C) Dividir o √≥rg√£o em l√≥bulos testiculares",
    "D) Produzir testosterona"
  ],
  correctAnswer: "C) Dividir o √≥rg√£o em l√≥bulos testiculares",
  comment: "A t√∫nica albug√≠nea emite septos de tecido conjuntivo para o interior do √≥rg√£o, dividindo-o em compartimentos chamados l√≥bulos testiculares.",
  topic: "Organiza√ß√£o Interna do Test√≠culo"
},
{
  question: "Onde ocorre a espermatog√™nese dentro dos l√≥bulos testiculares?",
  options: [
    "A) No interst√≠cio",
    "B) Nos ductos eferentes",
    "C) Nos t√∫bulos semin√≠feros",
    "D) Na rede testicular"
  ],
  correctAnswer: "C) Nos t√∫bulos semin√≠feros",
  comment: "Dentro de cada l√≥bulo, encontram-se os t√∫bulos semin√≠feros, estruturas noveladas onde ocorre a espermatog√™nese.",
  topic: "Local da Espermatog√™nese"
},
{
  question: "No tecido intersticial entre os t√∫bulos semin√≠feros, quais c√©lulas s√£o respons√°veis pela produ√ß√£o de testosterona?",
  options: [
    "A) C√©lulas de Sertoli",
    "B) Esperm√°tides",
    "C) C√©lulas de Leydig",
    "D) Espermatog√¥nias"
  ],
  correctAnswer: "C) C√©lulas de Leydig",
  comment: "O tecido entre os t√∫bulos √© chamado de interst√≠cio, onde se localizam as c√©lulas de Leydig (ou c√©lulas intersticiais), respons√°veis pela produ√ß√£o de testosterona.",
  topic: "C√©lulas Intersticiais (Leydig)"
},
{
  question: "Qual caracter√≠stica histol√≥gica √© t√≠pica das c√©lulas de Leydig, relacionadas √† sua fun√ß√£o hormonal?",
  options: [
    "A) N√∫cleo basof√≠lico e citoplasma escuro",
    "B) N√∫cleo claro com nucl√©olo evidente",
    "C) Citoplasma p√°lido devido a got√≠culas lip√≠dicas e n√∫cleo centralizado",
    "D) Formato triangular e localiza√ß√£o pr√≥xima √† l√¢mina basal"
  ],
  correctAnswer: "C) Citoplasma p√°lido devido a got√≠culas lip√≠dicas e n√∫cleo centralizado",
  comment: "As c√©lulas de Leydig caracterizam-se por um citoplasma p√°lido (devido a got√≠culas lip√≠dicas, precursores hormonais) e n√∫cleo centralizado.",
  topic: "Morfologia das C√©lulas de Leydig"
},
{
  question: "As c√©lulas mioides (peritubulares) do t√∫bulo semin√≠fero possuem qual fun√ß√£o?",
  options: [
    "A) Produzir horm√¥nios",
    "B) Impulsionar espermatozoides e fluidos atrav√©s de contra√ß√µes",
    "C) Fagocitar restos celulares",
    "D) Formar a barreira hematotesticular"
  ],
  correctAnswer: "B) Impulsionar espermatozoides e fluidos atrav√©s de contra√ß√µes",
  comment: "As c√©lulas mioides s√£o c√©lulas achatadas, contr√°teis, que ajudam a impulsionar os espermatozoides e fluidos pelo t√∫bulo, j√° que os espermatozoides ainda n√£o possuem motilidade pr√≥pria neste est√°gio.",
  topic: "C√©lulas Mioides"
},
{
  question: "Qual a descri√ß√£o histol√≥gica correta das c√©lulas de Sertoli?",
  options: [
    "A) N√∫cleo pequeno, redondo e basof√≠lico, localizadas na periferia.",
    "B) Maiores c√©lulas do epit√©lio germinativo, com n√∫cleo grande e cromatina filamentosa.",
    "C) C√©lulas de sustenta√ß√£o grandes, n√∫cleo oval, claro (p√°lido) com nucl√©olo evidente, formato triangular ou de 'meia-lua', estendendo-se at√© o l√∫men.",
    "D) C√©lulas haploides, redondas, pr√≥ximas ao l√∫men, com n√∫cleo arredondado."
  ],
  correctAnswer: "C) C√©lulas de sustenta√ß√£o grandes, n√∫cleo oval, claro (p√°lido) com nucl√©olo evidente, formato triangular ou de 'meia-lua', estendendo-se at√© o l√∫men.",
  comment: "C√©lulas de Sertoli: C√©lulas de sustenta√ß√£o grandes, cujo n√∫cleo √© oval, claro (p√°lido), com nucl√©olo evidente, e costuma ter um formato triangular ou de 'meia-lua', localizando-se pr√≥ximo √† l√¢mina basal, mas estendendo-se at√© o l√∫men.",
  topic: "Histologia das C√©lulas de Sertoli"
},
{
  question: "Quais s√£o as tr√™s principais fun√ß√µes atribu√≠das √†s c√©lulas de Sertoli, al√©m da sustenta√ß√£o?",
  options: [
    "A) Produ√ß√£o de testosterona, forma√ß√£o do acrossoma e forma√ß√£o do flagelo.",
    "B) Organizar o epit√©lio, nutrir as c√©lulas germinativas e formar a barreira hematotesticular.",
    "C) Impulsionar espermatozoides, condensar o n√∫cleo e secretar frutose.",
    "D) Fagocitar corpos residuais, secretar muco e lubrificar a uretra."
  ],
  correctAnswer: "B) Organizar o epit√©lio, nutrir as c√©lulas germinativas e formar a barreira hematotesticular.",
  comment: "As c√©lulas de Sertoli organizam o epit√©lio, nutrem as c√©lulas germinativas e formam a barreira hematotesticular.",
  topic: "Fun√ß√µes das C√©lulas de Sertoli"
},
{
  question: "Al√©m das fun√ß√µes de sustenta√ß√£o, organiza√ß√£o e barreira, as c√©lulas de Sertoli tamb√©m desempenham um papel crucial na elimina√ß√£o de restos celulares. Qual √© este papel?",
  options: [
    "A) Produ√ß√£o de enzimas para a fertiliza√ß√£o.",
    "B) Reabsor√ß√£o de fluido testicular.",
    "C) Fagocitam restos citoplasm√°ticos (corpos residuais) durante a matura√ß√£o dos espermatozoides.",
    "D) Armazenamento de espermatozoides imaturos."
  ],
  correctAnswer: "C) Fagocitam restos citoplasm√°ticos (corpos residuais) durante a matura√ß√£o dos espermatozoides.",
  comment: "As c√©lulas de Sertoli fagocitam restos citoplasm√°ticos (corpos residuais) liberados durante a matura√ß√£o dos espermatozoides.",
  topic: "Fun√ß√£o Fagocit√°ria das C√©lulas de Sertoli"
},
{
  question: "Quais horm√¥nios estimulam as c√©lulas de Sertoli?",
  options: [
    "A) LH e testosterona",
    "B) FSH e testosterona",
    "C) Progesterona e estrog√™nio",
    "D) Prolactina e ocitocina"
  ],
  correctAnswer: "B) FSH e testosterona",
  comment: "As c√©lulas de Sertoli s√£o estimuladas pelos horm√¥nios FSH e testosterona.",
  topic: "Regula√ß√£o Hormonal das C√©lulas de Sertoli"
},
{
  question: "As espermatog√¥nias (Tipo A e B) s√£o caracterizadas histologicamente por:",
  options: [
    "A) Serem as maiores c√©lulas do epit√©lio com n√∫cleos grandes e cromatina filamentosa.",
    "B) N√∫cleos pequenos, redondos e muito basof√≠licos devido √† cromatina condensada, localizadas na periferia do t√∫bulo.",
    "C) Serem haploides, redondas, com n√∫cleo arredondado e pr√≥ximas ao l√∫men.",
    "D) Serem raramente vistas em cortes histol√≥gicos, pois entram rapidamente na Meiose II."
  ],
  correctAnswer: "B) N√∫cleos pequenos, redondos e muito basof√≠licos devido √† cromatina condensada, localizadas na periferia do t√∫bulo.",
  comment: "Espermatog√¥nias (Tipo A e B): Localizam-se na periferia do t√∫bulo, apoiadas na l√¢mina basal. Histologicamente, apresentam n√∫cleos pequenos, redondos e muito basof√≠licos (escuras) devido √† cromatina condensada, caracter√≠stica de c√©lulas com alta taxa de replica√ß√£o.",
  topic: "Espermatog√™nese - Espermatog√¥nias"
},
{
  question: "Qual est√°gio da linhagem germinativa √© descrito como as maiores c√©lulas do epit√©lio germinativo, com n√∫cleos grandes e cromatina que pode apresentar aspecto filamentoso?",
  options: [
    "A) Espermatog√¥nias",
    "B) Espermat√≥citos Prim√°rios",
    "C) Espermat√≥citos Secund√°rios",
    "D) Esperm√°tides"
  ],
  correctAnswer: "B) Espermat√≥citos Prim√°rios",
  comment: "Espermat√≥citos Prim√°rios: S√£o as maiores c√©lulas do epit√©lio germinativo, com n√∫cleos grandes e cromatina que pode apresentar aspecto filamentoso (cromossomos vis√≠veis).",
  topic: "Espermatog√™nese - Espermat√≥citos Prim√°rios"
},
{
  question: "Por que os espermat√≥citos secund√°rios s√£o raramente vistos em cortes histol√≥gicos?",
  options: [
    "A) Porque s√£o muito pequenos e dif√≠ceis de corar.",
    "B) Porque sofrem r√°pida degenera√ß√£o.",
    "C) Porque entram rapidamente na Meiose II para formar esperm√°tides.",
    "D) Porque migram para fora do t√∫bulo semin√≠fero imediatamente."
  ],
  correctAnswer: "C) Porque entram rapidamente na Meiose II para formar esperm√°tides.",
  comment: "Espermat√≥citos Secund√°rios: S√£o raramente vistos em cortes histol√≥gicos porque entram rapidamente na Meiose II para formar esperm√°tides.",
  topic: "Espermatog√™nese - Espermat√≥citos Secund√°rios"
},
{
  question: "Ap√≥s a Meiose II, quais c√©lulas haploides s√£o formadas e onde se localizam inicialmente?",
  options: [
    "A) Espermatog√¥nias, na periferia do t√∫bulo.",
    "B) Espermat√≥citos Prim√°rios, na camada intermedi√°ria.",
    "C) Esperm√°tides, pr√≥ximas ao l√∫men.",
    "D) Espermatozoides, no l√∫men."
  ],
  correctAnswer: "C) Esperm√°tides, pr√≥ximas ao l√∫men.",
  comment: "Esperm√°tides: C√©lulas haploides resultantes da Meiose II, localizadas pr√≥ximas ao l√∫men. Inicialmente s√£o redondas (esperm√°tides iniciais) com n√∫cleo arredondado.",
  topic: "Espermatog√™nese - Esperm√°tides"
},
{
  question: "O processo de diferencia√ß√£o sem divis√£o celular, que transforma a esperm√°tide em um espermatozoide, √© chamado de:",
  options: [
    "A) Espermatog√™nese",
    "B) Meiose",
    "C) Mitose",
    "D) Espermiog√™nese"
  ],
  correctAnswer: "D) Espermiog√™nese",
  comment: "Este processo de diferencia√ß√£o, sem divis√£o celular, √© chamado de Espermiog√™nese.",
  topic: "Defini√ß√£o de Espermiog√™nese"
},
{
  question: "Qual √© a primeira modifica√ß√£o que ocorre na esperm√°tide durante a espermiog√™nese, envolvendo as ves√≠culas do Golgi?",
  options: [
    "A) Condensa√ß√£o nuclear",
    "B) Forma√ß√£o do flagelo",
    "C) Forma√ß√£o do acrossoma",
    "D) Organiza√ß√£o mitocondrial"
  ],
  correctAnswer: "C) Forma√ß√£o do acrossoma",
  comment: "Durante a espermiog√™nese, a primeira modifica√ß√£o listada √© a forma√ß√£o do acrossoma: Ves√≠culas do Golgi fundem-se para formar o capuz across√¥mico sobre o n√∫cleo, contendo enzimas para a fertiliza√ß√£o.",
  topic: "Espermiog√™nese - Forma√ß√£o do Acrossoma"
},
{
  question: "Durante a espermiog√™nese, o n√∫cleo da esperm√°tide sofre qual transforma√ß√£o para se tornar parte do espermatozoide?",
  options: [
    "A) Torna-se vesicular e menos basof√≠lico.",
    "B) Torna-se alongado, compacto e muito basof√≠lico.",
    "C) Divide-se em dois n√∫cleos menores.",
    "D) Expulsa seu conte√∫do gen√©tico para o citoplasma."
  ],
  correctAnswer: "B) Torna-se alongado, compacto e muito basof√≠lico.",
  comment: "Condensa√ß√£o nuclear: O n√∫cleo torna-se alongado, compacto e muito basof√≠lico.",
  topic: "Espermiog√™nese - Condensa√ß√£o Nuclear"
},
{
  question: "Qual estrutura √© formada a partir dos centr√≠olos durante a espermiog√™nese, conferindo motilidade futura ao espermatozoide?",
  options: [
    "A) Acrossoma",
    "B) Pe√ßa intermedi√°ria",
    "C) Flagelo",
    "D) Corpos residuais"
  ],
  correctAnswer: "C) Flagelo",
  comment: "Forma√ß√£o do flagelo: Os centr√≠olos migram para o polo oposto ao acrossoma e d√£o origem ao flagelo (√∫nica c√©lula humana flagelada), permitindo a motilidade futura.",
  topic: "Espermiog√™nese - Forma√ß√£o do Flagelo"
},
{
  question: "Na espermiog√™nese, as mitoc√¥ndrias se organizam em qual regi√£o do espermatozoide, e para qual finalidade?",
  options: [
    "A) No acrossoma, para produzir enzimas.",
    "B) Na cabe√ßa, para proteger o n√∫cleo.",
    "C) Na pe√ßa intermedi√°ria, ao redor da base do flagelo, para fornecer energia (ATP).",
    "D) Na cauda, para auxiliar na locomo√ß√£o."
  ],
  correctAnswer: "C) Na pe√ßa intermedi√°ria, ao redor da base do flagelo, para fornecer energia (ATP).",
  comment: "Organiza√ß√£o mitocondrial: As mitoc√¥ndrias organizam-se na pe√ßa intermedi√°ria, ao redor da base do flagelo, para fornecer energia (ATP) para o batimento flagelar.",
  topic: "Espermiog√™nese - Organiza√ß√£o Mitocondrial"
},
{
  question: "O que acontece com o excesso de citoplasma da esperm√°tide durante a espermiog√™nese?",
  options: [
    "A) √â incorporado ao n√∫cleo para condensa√ß√£o.",
    "B) √â descartado como corpos residuais e fagocitado pelas c√©lulas de Sertoli.",
    "C) Transforma-se no acrossoma.",
    "D) Forma a c√°psula externa do espermatozoide."
  ],
  correctAnswer: "B) √â descartado como corpos residuais e fagocitado pelas c√©lulas de Sertoli.",
  comment: "Perda de citoplasma: O excesso de citoplasma √© descartado como corpos residuais, que s√£o fagocitados pelas c√©lulas de Sertoli.",
  topic: "Espermiog√™nese - Perda de Citoplasma"
},
{
  question: "Na identifica√ß√£o histol√≥gica do t√∫bulo semin√≠fero, qual a descri√ß√£o correta das c√©lulas de Sertoli e Espermatog√¥nias localizadas na l√¢mina basal?",
  options: [
    "A) C√©lulas de Sertoli: n√∫cleo redondo e escuro; Espermatog√¥nias: n√∫cleo triangular/p√°lido.",
    "B) C√©lulas de Sertoli: n√∫cleo triangular/p√°lido com nucl√©olo evidente; Espermatog√¥nias: n√∫cleo redondo e escuro.",
    "C) C√©lulas de Sertoli: c√©lulas grandes com cromatina frouxa; Espermatog√¥nias: n√∫cleos menores e alongados.",
    "D) C√©lulas de Sertoli: c√©lulas mioides achatadas; Espermatog√¥nias: citoplasma acid√≥filo."
  ],
  correctAnswer: "B) C√©lulas de Sertoli: n√∫cleo triangular/p√°lido com nucl√©olo evidente; Espermatog√¥nias: n√∫cleo redondo e escuro.",
  comment: "Na l√¢mina basal: Espermatog√¥nias (n√∫cleo redondo e escuro dentro do t√∫bulo) e C√©lulas de Sertoli (n√∫cleo triangular/p√°lido com nucl√©olo evidente).",
  topic: "Identifica√ß√£o Histol√≥gica - L√¢mina Basal"
},
{
  question: "No compartimento adluminal do t√∫bulo semin√≠fero, como s√£o descritas as c√©lulas de Espermat√≥citos e Esperm√°tides?",
  options: [
    "A) Espermat√≥citos: n√∫cleos pequenos e basof√≠licos; Esperm√°tides: c√©lulas grandes.",
    "B) Espermat√≥citos: c√©lulas grandes, n√∫cleo com cromatina frouxa/vis√≠vel; Esperm√°tides: n√∫cleos menores, podendo ser alongados.",
    "C) Espermat√≥citos: n√∫cleos p√°lidos e triangulares; Esperm√°tides: c√©lulas mioides.",
    "D) Espermat√≥citos: citoplasma p√°lido com got√≠culas lip√≠dicas; Esperm√°tides: apenas flagelos."
  ],
  correctAnswer: "B) Espermat√≥citos: c√©lulas grandes, n√∫cleo com cromatina frouxa/vis√≠vel; Esperm√°tides: n√∫cleos menores, podendo ser alongados.",
  comment: "No compartimento adluminal: Espermat√≥citos (c√©lulas grandes, n√∫cleo com cromatina frouxa/vis√≠vel) e Esperm√°tides (n√∫cleos menores, podendo ser alongados dependendo da fase).",
  topic: "Identifica√ß√£o Histol√≥gica - Compartimento Adluminal"
},
{
  question: "No interst√≠cio entre os t√∫bulos semin√≠feros, quais c√©lulas s√£o encontradas e qual sua principal caracter√≠stica histol√≥gica?",
  options: [
    "A) C√©lulas de Sertoli, com n√∫cleo triangular.",
    "B) Espermatozoides, vistos como flagelos condensados.",
    "C) C√©lulas de Leydig, com citoplasma acid√≥filo/p√°lido e agrupadas.",
    "D) Espermatog√¥nias, com n√∫cleo redondo e escuro."
  ],
  correctAnswer: "C) C√©lulas de Leydig, com citoplasma acid√≥filo/p√°lido e agrupadas.",
  comment: "No interst√≠cio: C√©lulas de Leydig (citoplasma acid√≥filo/p√°lido, agrupadas entre os t√∫bulos) e tecido conjuntivo com vasos sangu√≠neos e linf√°ticos.",
  topic: "Identifica√ß√£o Histol√≥gica - Interst√≠cio"
},
{
  question: "Qual a sequ√™ncia correta do trajeto dos espermatozoides ap√≥s a produ√ß√£o nos t√∫bulos semin√≠feros?",
  options: [
    "A) T√∫bulos Retos ‚Üí Epid√≠dimo ‚Üí Rede Testicular ‚Üí Ductos Eferentes ‚Üí Ducto Deferente",
    "B) T√∫bulos Retos ‚Üí Rede Testicular ‚Üí Ductos Eferentes ‚Üí Epid√≠dimo ‚Üí Ducto Deferente",
    "C) Rede Testicular ‚Üí T√∫bulos Retos ‚Üí Epid√≠dimo ‚Üí Ductos Eferentes ‚Üí Ducto Deferente",
    "D) Ductos Eferentes ‚Üí Rede Testicular ‚Üí T√∫bulos Retos ‚Üí Epid√≠dimo ‚Üí Ducto Deferente"
  ],
  correctAnswer: "B) T√∫bulos Retos ‚Üí Rede Testicular ‚Üí Ductos Eferentes ‚Üí Epid√≠dimo ‚Üí Ducto Deferente",
  comment: "Ap√≥s a produ√ß√£o nos t√∫bulos semin√≠feros, os espermatozoides seguem um trajeto de ductos: T√∫bulos Retos ‚Üí Rede Testicular (Rete Testis) ‚Üí Ductos Eferentes ‚Üí Epid√≠dimo ‚Üí Ducto Deferente.",
  topic: "Trajeto dos Espermatozoides"
},
{
  question: "O epid√≠dimo √© o local de:",
  options: [
    "A) Produ√ß√£o prim√°ria de espermatozoides.",
    "B) Produ√ß√£o de testosterona.",
    "C) Armazenamento e finaliza√ß√£o da matura√ß√£o bioqu√≠mica dos espermatozoides.",
    "D) Forma√ß√£o do s√™men."
  ],
  correctAnswer: "C) Armazenamento e finaliza√ß√£o da matura√ß√£o bioqu√≠mica dos espermatozoides.",
  comment: "O Epid√≠dimo √© destacado como o local de armazenamento e finaliza√ß√£o da matura√ß√£o bioqu√≠mica dos espermatozoides.",
  topic: "Fun√ß√£o do Epid√≠dimo"
},
{
  question: "O epit√©lio do epid√≠dimo √© descrito como:",
  options: [
    "A) Estratificado pavimentoso",
    "B) C√∫bico simples",
    "C) Pseudoestratificado colunar com estereoc√≠lios",
    "D) Transicional (urot√©lio)"
  ],
  correctAnswer: "C) Pseudoestratificado colunar com estereoc√≠lios",
  comment: "Epit√©lio do Epid√≠dimo: Pseudoestratificado colunar com estereoc√≠lios.",
  topic: "Histologia do Epid√≠dimo - Epit√©lio"
},
{
  question: "Qual a natureza e fun√ß√£o dos estereoc√≠lios presentes no epit√©lio do epid√≠dimo?",
  options: [
    "A) S√£o c√≠lios verdadeiros com motilidade para mover espermatozoides.",
    "B) S√£o microvilosidades longas e ramificadas que aumentam a superf√≠cie para reabsor√ß√£o de fluido e restos citoplasm√°ticos.",
    "C) S√£o extens√µes citoplasm√°ticas para secre√ß√£o hormonal.",
    "D) S√£o estruturas contr√°teis para impulsionar o fluido."
  ],
  correctAnswer: "B) S√£o microvilosidades longas e ramificadas que aumentam a superf√≠cie para reabsor√ß√£o de fluido e restos citoplasm√°ticos.",
  comment: "A professora enfatiza que estereoc√≠lios n√£o s√£o c√≠lios verdadeiros (n√£o t√™m motilidade); s√£o microvilosidades longas e ramificadas que aumentam a superf√≠cie para reabsor√ß√£o do fluido testicular e restos citoplasm√°ticos residuais.",
  topic: "Estereoc√≠lios do Epid√≠dimo"
},
{
  question: "A parede do epid√≠dimo possui uma camada de m√∫sculo liso circular. Qual a sua fun√ß√£o?",
  options: [
    "A) Produzir a secre√ß√£o seminal.",
    "B) Promover contra√ß√µes perist√°lticas para mover os espermatozoides.",
    "C) Sustentar o epit√©lio secretor.",
    "D) Regular a temperatura local."
  ],
  correctAnswer: "B) Promover contra√ß√µes perist√°lticas para mover os espermatozoides.",
  comment: "A parede do epid√≠dimo possui uma camada de m√∫sculo liso circular que realiza contra√ß√µes perist√°lticas para mover os espermatozoides.",
  topic: "Histologia do Epid√≠dimo - Parede Muscular"
},
{
  question: "Qual a diferen√ßa visual importante entre os t√∫bulos do epid√≠dimo e os t√∫bulos semin√≠feros do test√≠culo?",
  options: [
    "A) T√∫bulos do epid√≠dimo t√™m contorno irregular e l√∫men vazio; semin√≠feros t√™m epit√©lio simples.",
    "B) T√∫bulos do epid√≠dimo t√™m epit√©lio germinativo complexo; semin√≠feros t√™m l√∫men limpo.",
    "C) T√∫bulos do epid√≠dimo t√™m um contorno mais regular e l√∫men limpo (cheio de espermatozoides) comparado √† complexidade do epit√©lio germinativo do test√≠culo.",
    "D) T√∫bulos do epid√≠dimo t√™m c√©lulas de Leydig no interst√≠cio; semin√≠feros t√™m estereoc√≠lios."
  ],
  correctAnswer: "C) T√∫bulos do epid√≠dimo t√™m um contorno mais regular e l√∫men limpo (cheio de espermatozoides) comparado √† complexidade do epit√©lio germinativo do test√≠culo.",
  comment: "Diferen√ßa visual importante: Os t√∫bulos do epid√≠dimo t√™m um contorno mais regular e l√∫men limpo (cheio de espermatozoides) comparado √† complexidade do epit√©lio germinativo do test√≠culo.",
  topic: "Diferencia√ß√£o Histol√≥gica: Epid√≠dimo vs. Test√≠culo"
},
{
  question: "Qual a caracter√≠stica histol√≥gica marcante do Ducto Deferente, diferenciando-o do epid√≠dimo, e qual sua fun√ß√£o relacionada?",
  options: [
    "A) Epit√©lio estratificado pavimentoso, para prote√ß√£o.",
    "B) Camada muscular muito espessa (tr√™s subcamadas), para forte contra√ß√£o durante a ejacula√ß√£o.",
    "C) Grande quantidade de gl√¢ndulas secretoras, para produ√ß√£o de s√™men.",
    "D) Presen√ßa de muitos estereoc√≠lios com motilidade, para movimentar espermatozoides."
  ],
  correctAnswer: "B) Camada muscular muito espessa (tr√™s subcamadas), para forte contra√ß√£o durante a ejacula√ß√£o.",
  comment: "A caracter√≠stica marcante do Ducto Deferente √© a sua camada muscular muito espessa (tr√™s subcamadas: longitudinal interna, circular m√©dia, longitudinal externa), necess√°ria para a forte contra√ß√£o durante a ejacula√ß√£o, impulsionando os espermatozoides contra a gravidade at√© a uretra.",
  topic: "Histologia e Fun√ß√£o do Ducto Deferente"
},
{
  question: "A mucosa da ves√≠cula seminal √© descrita como sendo extremamente pregueada. Qual o aspecto visual resultante dessa caracter√≠stica?",
  options: [
    "A) Lisa e regular",
    "B) Aspecto de labirinto ou favo de mel",
    "C) Com proje√ß√µes tipo microvilosidades curtas",
    "D) Com invagina√ß√µes profundas e estreitas"
  ],
  correctAnswer: "B) Aspecto de labirinto ou favo de mel",
  comment: "Sua mucosa √© extremamente pregueada, formando um aspecto de labirinto ou favo de mel.",
  topic: "Histologia da Ves√≠cula Seminal - Mucosa"
},
{
  question: "A secre√ß√£o da ves√≠cula seminal contribui com cerca de 70% do volume do s√™men. Ela √© rica em quais componentes essenciais?",
  options: [
    "A) √Åcido c√≠trico e PSA",
    "B) Lisozima e anticorpos",
    "C) Frutose, citrato, inositol e prostaglandinas",
    "D) Col√°geno e elastina"
  ],
  correctAnswer: "C) Frutose, citrato, inositol e prostaglandinas",
  comment: "A secre√ß√£o √© espessa, alcalina e rica em frutose (principal fonte de energia para os espermatozoides), citrato, inositol e prostaglandinas (importantes para a motilidade e imunomodula√ß√£o no trato feminino).",
  topic: "Secre√ß√£o da Ves√≠cula Seminal"
},
{
  question: "Qual o epit√©lio caracter√≠stico da ves√≠cula seminal e o que se observa na sua l√¢mina pr√≥pria?",
  options: [
    "A) Epit√©lio pavimentoso estratificado, com l√¢mina pr√≥pria de tecido adiposo.",
    "B) Epit√©lio pseudoestratificado colunar (ou c√∫bico alto) secretor com gr√¢nulos apicais, e l√¢mina pr√≥pria rica em fibras el√°sticas.",
    "C) Epit√©lio c√∫bico simples com microvilosidades, e l√¢mina pr√≥pria com m√∫sculo liso.",
    "D) Urot√©lio, com l√¢mina pr√≥pria de tecido conjuntivo denso n√£o modelado."
  ],
  correctAnswer: "B) Epit√©lio pseudoestratificado colunar (ou c√∫bico alto) secretor com gr√¢nulos apicais, e l√¢mina pr√≥pria rica em fibras el√°sticas.",
  comment: "Histologia da Ves√≠cula Seminal: Epit√©lio pseudoestratificado colunar (ou c√∫bico alto) secretor, com gr√¢nulos de secre√ß√£o apicais. A l√¢mina pr√≥pria √© rica em fibras el√°sticas e √© envolta por m√∫sculo liso.",
  topic: "Histologia da Ves√≠cula Seminal - Epit√©lio e L√¢mina Pr√≥pria"
},
{
  question: "A pr√≥stata √© um conjunto de gl√¢ndulas tubuloalveolares ramificadas. Qual a faixa de n√∫mero dessas gl√¢ndulas?",
  options: [
    "A) 5-10 gl√¢ndulas",
    "B) 10-20 gl√¢ndulas",
    "C) 30-50 gl√¢ndulas",
    "D) Mais de 100 gl√¢ndulas"
  ],
  correctAnswer: "C) 30-50 gl√¢ndulas",
  comment: "A Pr√≥stata √© um conjunto de 30-50 gl√¢ndulas tubuloalveolares ramificadas.",
  topic: "Estrutura Geral da Pr√≥stata"
},
{
  question: "Qual a composi√ß√£o do estroma da pr√≥stata, onde as gl√¢ndulas est√£o embebidas?",
  options: [
    "A) Tecido adiposo e vasos sangu√≠neos.",
    "B) Tecido conjuntivo frouxo e nervos.",
    "C) Estroma fibromuscular (tecido conjuntivo rico em fibras musculares lisas).",
    "D) Tecido conjuntivo denso n√£o modelado e cartilagem."
  ],
  correctAnswer: "C) Estroma fibromuscular (tecido conjuntivo rico em fibras musculares lisas).",
  comment: "As gl√¢ndulas da pr√≥stata est√£o embebidas em um estroma fibromuscular (tecido conjuntivo rico em fibras musculares lisas), cuja contra√ß√£o expele a secre√ß√£o na ejacula√ß√£o.",
  topic: "Histologia da Pr√≥stata - Estroma"
},
{
  question: "Na Hiperplasia Prost√°tica Benigna (HPB), quais altera√ß√µes ocorrem e qual a consequ√™ncia principal?",
  options: [
    "A) Atrofia das c√©lulas glandulares, causando incontin√™ncia urin√°ria.",
    "B) Prolifera√ß√£o das c√©lulas glandulares e do estroma, comprimindo a uretra e dificultando a mic√ß√£o.",
    "C) Calcifica√ß√£o do tecido, levando √† impot√™ncia.",
    "D) Aumento da produ√ß√£o de espermatozoides, com dor na ejacula√ß√£o."
  ],
  correctAnswer: "B) Prolifera√ß√£o das c√©lulas glandulares e do estroma, comprimindo a uretra e dificultando a mic√ß√£o.",
  comment: "Com o envelhecimento e altera√ß√µes hormonais, ocorre prolifera√ß√£o das c√©lulas glandulares e do estroma, comprimindo a uretra e dificultando a mic√ß√£o.",
  topic: "Patologia - Hiperplasia Prost√°tica Benigna (HPB)"
},
{
  question: "O que s√£o as concre√ß√µes prost√°ticas (corpos amil√°ceos) encontradas no l√∫men das gl√¢ndulas prost√°ticas?",
  options: [
    "A) Aglomerados de espermatozoides imaturos.",
    "B) Dep√≥sitos de horm√¥nios.",
    "C) Corpos calcificados de glicoprote√≠nas, que aumentam em n√∫mero com a idade.",
    "D) C√©lulas basais em degenera√ß√£o."
  ],
  correctAnswer: "C) Corpos calcificados de glicoprote√≠nas, que aumentam em n√∫mero com a idade.",
  comment: "No l√∫men das gl√¢ndulas prost√°ticas, √© comum encontrar corpos amil√°ceos (concre√ß√µes calcificadas de glicoprote√≠nas), que aumentam em n√∫mero com a idade.",
  topic: "Histologia da Pr√≥stata - Concre√ß√µes Prost√°ticas"
} ];

    function buildQuiz() {
        const output = [];
        questions.forEach((currentQuestion, questionNumber) => {
            const options = [];
            for (let i = 0; i < currentQuestion.options.length; i++) {
                // Note o uso de ${...} para template literals do JS dentro da f-string
                options.push(
                    `<label class="option" data-question="${questionNumber}" data-value="${currentQuestion.options[i]}">
                        <img src="tesouras.png" class="scissor-icon" onclick="event.stopPropagation(); this.parentNode.classList.toggle('struck-through');">
                        ${currentQuestion.options[i]}
                    </label>`
                );
            }
            output.push(
                `<div class="card" id="question-${questionNumber}" data-topic="${currentQuestion.topic}">
                    <div class="question">${currentQuestion.question}</div>
                    <div class="options">${options.join("")}</div>
                    <div class="comment" id="comment-${questionNumber}"></div>
                </div>`
            );
        });
        quizContainer.innerHTML = output.join("");
    }

    function showResults() {
        wrongQuestionIndices = [];
        errorCountByTopic = {};
        totalAnsweredQuestionsByTopic = {};
        currentWrongQuestionIndex = -1;
        hasErrors = false;
        errorDiagnosisSection.style.display = 'none';
        topicsToReviewList.innerHTML = '';
        statusMessage.textContent = '';

        const allQuestionCards = document.querySelectorAll('.quiz-container .card, #newQuestionsContent .card');
        let correctAnswersCount = 0;
        let totalQuestionsAnswered = 0;

        allQuestionCards.forEach((card, index) => {
            const questionEl = card.querySelector('.question') || card.querySelector('p');
            if (!questionEl) return;
            
            const questionText = questionEl.textContent.trim();
            const optionsContainer = card.querySelector('.options') || card;
            const allOptions = optionsContainer.querySelectorAll('.option, label.option, label');
            const userAnswerElement = optionsContainer.querySelector('.option.selected, label.selected');
            const commentDiv = card.querySelector('.comment');
            const questionTopic = card.dataset.topic || "T√≥pico n√£o informado";

            // Limpa classes
            allOptions.forEach(option => { option.classList.remove('correct', 'incorrect', 'selected'); });
            if (commentDiv) commentDiv.classList.remove('show');

            let correctAnswerValue = null;
            let questionComment = null;

            // L√≥gica para Est√°ticas vs Din√¢micas
            const isStatic = card.id && card.id.startsWith('question-');
            if (isStatic) {
                const questionData = questions.find(q => q.question.trim() === questionText);
                if (questionData) {
                    correctAnswerValue = questionData.correctAnswer.trim();
                    questionComment = questionData.comment;
                }
            } else {
                const correctOpt = optionsContainer.querySelector('.option[data-answer="true"], label[data-answer="true"]');
                if (correctOpt) correctAnswerValue = correctOpt.dataset.value?.trim() || correctOpt.textContent.trim();
                
                const commentElement = card.querySelector('.comment');
                if (commentElement && commentElement.textContent.trim()) questionComment = commentElement.textContent.trim();
            }

            // Verifica resposta
            let userAnswer = null;
            if (userAnswerElement) {
                userAnswerElement.classList.add('selected');
                userAnswer = userAnswerElement.dataset.value?.trim() || userAnswerElement.textContent.trim();
                totalQuestionsAnswered++;
                totalAnsweredQuestionsByTopic[questionTopic] = (totalAnsweredQuestionsByTopic[questionTopic] || 0) + 1;

                if (userAnswer === correctAnswerValue) {
                    correctAnswersCount++;
                } else {
                    hasErrors = true;
                    errorCountByTopic[questionTopic] = (errorCountByTopic[questionTopic] || 0) + 1;
                }
            }

            // Pinta as op√ß√µes
            allOptions.forEach(option => {
                const optionValue = option.dataset.value?.trim() || option.textContent.trim();
                if (optionValue === correctAnswerValue) option.classList.add('correct');
                if (userAnswer && optionValue === userAnswer && userAnswer !== correctAnswerValue) option.classList.add('incorrect');
            });

            if (commentDiv && questionComment) {
                commentDiv.textContent = questionComment;
                commentDiv.classList.add('show');
            }
        });

        resultsContainer.textContent = `Voc√™ acertou ${correctAnswersCount} de ${totalQuestionsAnswered} quest√µes respondidas.`;

        // Diagn√≥stico
        if (hasErrors) {
            for (const topic in errorCountByTopic) {
                const errors = errorCountByTopic[topic];
                const total = totalAnsweredQuestionsByTopic[topic] || 0;
                if (total > 0) {
                    const percent = ((errors / total) * 100).toFixed(1);
                    const li = document.createElement('li');
                    li.textContent = `${topic}: ${percent}% de erros (${errors} de ${total} quest√µes)`;
                    topicsToReviewList.appendChild(li);
                }
            }
            errorDiagnosisSection.style.display = 'block';
            generatedQuestionsSection.style.display = 'block';
            generateNewQuestionsBtn.style.display = 'block';
            errorDiagnosisSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        } else {
            const li = document.createElement('li');
            li.textContent = "ü•≥ Parab√©ns! Voc√™ n√£o teve erros nas quest√µes respondidas.";
            topicsToReviewList.appendChild(li);
        }
    }

    // Listeners
    document.addEventListener("click", function (event) {
        const clickedElement = event.target;
        const optionElement = clickedElement.closest('.option');
        if (optionElement) {
            if (clickedElement.classList.contains("scissor-icon")) {
                event.stopPropagation();
                optionElement.classList.toggle("struck-through");
            } else {
                const parentCard = optionElement.closest('.card');
                const currentQuestionOptions = parentCard.querySelectorAll('.option');
                currentQuestionOptions.forEach(opt => opt.classList.remove("selected"));
                optionElement.classList.add("selected");
            }
        }
    });

    generateNewQuestionsBtn.addEventListener("click", async function() {
        statusMessage.textContent = '‚è≥ Gerando novas perguntas...';
        generateNewQuestionsBtn.disabled = true;
        
        const topics = Object.keys(errorCountByTopic).filter(topic => {
            const errorsInTopic = errorCountByTopic[topic] || 0;
            const totalAnsweredInTopic = totalAnsweredQuestionsByTopic[topic] || 0;
            return errorsInTopic > 0 && totalAnsweredInTopic > 0;
        });
        
        const topicsToSend = topics.length > 0 ? topics : ["fisiologia celular", "biologia"];

        try {
            const response = await fetch('https://www.quizia.xyz/quiz', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ topicos: topicsToSend }),
            });

            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
            
            const data = await response.json();
            newQuestionsContent.innerHTML = '';

            if (data && data.html) {
                newQuestionsContent.innerHTML = data.html.replace(/```html|```/g, '');
                
                newQuestionsContent.querySelectorAll('.card').forEach((card) => {
                    // L√≥gica de limpeza e adi√ß√£o de tesouras (mantida igual)
                    const questionElement = card.querySelector('p');
                    if (questionElement && !questionElement.classList.contains('question')) questionElement.classList.add('question');
                    
                    card.querySelectorAll('label').forEach((label) => {
                        const radioInput = label.querySelector('input[type="radio"]');
                        if (radioInput) {
                            if (radioInput.hasAttribute('data-answer')) label.setAttribute('data-answer', radioInput.getAttribute('data-answer'));
                            radioInput.remove();
                        }
                        if (!label.classList.contains('option')) label.classList.add('option');
                        if (!label.dataset.value) label.dataset.value = label.textContent.trim();
                        if (!label.querySelector('.scissor-icon')) {
                            const scissorIcon = document.createElement('img');
                            scissorIcon.src = 'tesouras.png';
                            scissorIcon.className = 'scissor-icon';
                            scissorIcon.onclick = function(e) { e.stopPropagation(); label.classList.toggle('struck-through'); };
                            label.insertBefore(scissorIcon, label.firstChild);
                        }
                    });
                });
            } else {
                newQuestionsContent.innerHTML = "<p>N√£o foi poss√≠vel gerar novas perguntas.</p>";
            }
            
            generatedQuestionsSection.style.display = 'block';
            generatedQuestionsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            statusMessage.textContent = '‚úÖ Perguntas geradas com sucesso!';
            setTimeout(() => { statusMessage.textContent = '' }, 3000);
            
        } catch (error) {
            console.error('Erro:', error);
            statusMessage.textContent = '‚ùå Erro: ' + error.message;
            setTimeout(() => { statusMessage.textContent = '' }, 5000);
        } finally {
            generateNewQuestionsBtn.disabled = false;
        }
    });

    buildQuiz();
    document.getElementById("verifyAnswersBtn").addEventListener("click", showResults);
</script>
</body>
</html>
