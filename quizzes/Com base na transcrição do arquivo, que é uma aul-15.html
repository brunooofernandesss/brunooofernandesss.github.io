
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Com base na transcri√ß√£o do arquivo, que √© uma aul-15</title>
    <style>
        body { font-family: sans-serif; margin: 0; padding: 20px; display: flex; justify-content: center; align-items: flex-start; min-height: 100vh; background-color: #f4f4f4; }
        .quiz-container { max-width: 800px; width: 100%; }
        h1 { color: #333; text-align: center; margin-bottom: 30px; }
        .card { background-color: white; border-radius: 8px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); }
        .question { font-weight: bold; margin-bottom: 10px; color: #333; }
        .options { margin-top: 15px; }
        
        /* Estilos das op√ß√µes */
        .option, label.option, label, #newQuestionsContent label { display: flex; align-items: center; margin-bottom: 10px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; cursor: pointer; transition: background-color 0.2s ease; position: relative; }
        
        /* Ocultar Radio inputs */
        .option input[type="radio"], label input[type="radio"], #newQuestionsContent input[type="radio"], #newQuestionsContent label input[type="radio"] { display: none !important; visibility: hidden !important; opacity: 0 !important; position: absolute !important; left: -9999px !important; }
        
        .option:hover, label.option:hover, label:hover, #newQuestionsContent label:hover { background-color: #e9e9e9; }
        .option.selected, label.option.selected, label.selected, #newQuestionsContent label.selected { background-color: #d1e7dd; border-color: #28a745; }
        .option.correct, label.option.correct, label.correct, #newQuestionsContent label.correct { background-color: #d4edda; border-color: #28a745; }
        .option.incorrect, label.option.incorrect, label.incorrect, #newQuestionsContent label.incorrect { background-color: #f8d7da; border-color: #dc3545; }
        
        .submit-btn { display: block; width: 100%; padding: 15px; background-color: #007bff; color: white; border: none; border-radius: 5px; font-size: 18px; cursor: pointer; transition: background-color 0.3s ease; margin-top: 30px; }
        .submit-btn:hover { background-color: #0056b3; }
        
        .results { text-align: center; margin-top: 30px; font-size: 20px; font-weight: bold; color: #333; }
        .scissor-icon { margin-right: 10px; width: 20px; height: 20px; opacity: 0.5; cursor: pointer; }
        .scissor-icon.hidden { display: none; }
        .struck-through { text-decoration: line-through; color: #888; }
        
        .comment { margin-top: 10px; padding: 10px; background-color: #f0f0f0; border-left: 4px solid #007bff; font-style: italic; color: #555; display: none; }
        .comment.show { display: block; }
        
        .card-bloco { border: 1px solid #ddd; border-radius: 6px; padding: 10px; background: #fff; margin-bottom: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        
        /* Diagn√≥stico e Erros */
        .error-diagnosis-section { margin-top: 50px; padding: 30px; background-color: #ffe0b2; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.15); display: none; text-align: center; font-size: 1.1em; color: #333; }
        .error-diagnosis-section h2 { color: #e65100; margin-bottom: 20px; font-size: 1.8em; }
        .error-diagnosis-section ul { list-style: none; padding: 0; margin: 0; }
        .error-diagnosis-section li { background-color: #ff9800; color: white; padding: 8px 15px; margin: 8px 0; border-radius: 5px; display: inline-block; margin-right: 10px; font-weight: bold; }
    </style>
</head>
<body>

    <div class="quiz-container" id="quiz-container">
        <h1>Com base na transcri√ß√£o do arquivo, que √© uma aul-15</h1>
        
        <div id="quiz"></div>
        
        <button class="submit-btn" id="verifyAnswersBtn">Verificar Respostas</button>
        <button class="generate-questions-btn submit-btn" id="generateNewQuestionsBtn" style="display:none;">Gerar Novas Perguntas</button>
        
        <div class="results card-bloco" id="results"></div>
        <div id="statusMessage" style="text-align: center; margin-top: 10px; font-weight: bold; color: #007bff;"></div>
        
        <div class="error-diagnosis-section card-bloco" id="errorDiagnosis">
            <h2>Diagn√≥stico de Erros</h2>
            <p>Parece que voc√™ precisa revisar os seguintes assuntos:</p>
            <ul id="topicsToReview"></ul>
        </div>
        
        <div class="generated-questions-section card-bloco" id="generatedQuestionsSection" style="display:none;">
            <h2>Novas Perguntas Geradas</h2>
            <div id="newQuestionsContent"></div>
        </div>
    </div>

<script>
    const quizContainer = document.getElementById("quiz");
    const resultsContainer = document.getElementById("results");
    const errorDiagnosisSection = document.getElementById("errorDiagnosis");
    const topicsToReviewList = document.getElementById("topicsToReview");
    const generateNewQuestionsBtn = document.getElementById("generateNewQuestionsBtn");
    const generatedQuestionsSection = document.getElementById("generatedQuestionsSection");
    const newQuestionsContent = document.getElementById("newQuestionsContent");
    const statusMessage = document.getElementById("statusMessage");

    let wrongQuestionIndices = [];
    let errorCountByTopic = {};  // CORRIGIDO: chaves duplas para objeto JS vazio
    let totalAnsweredQuestionsByTopic = {}; // CORRIGIDO
    let currentWrongQuestionIndex = -1;
    let hasErrors = false;

    // Inicializa display
    errorDiagnosisSection.style.display = 'none';
    topicsToReviewList.innerHTML = '';
    statusMessage.textContent = '';

    // AQUI entra a vari√°vel Python, ent√£o usamos chaves simples:
    const questions = [ {
  question: "Qual caracter√≠stica da libera√ß√£o de GnRH pelo hipot√°lamo √© crucial para evitar a desregula√ß√£o dos receptores?",
  options: [
    "A) Libera√ß√£o constante",
    "B) Libera√ß√£o puls√°til",
    "C) Libera√ß√£o gradual",
    "D) Libera√ß√£o ininterrupta"
  ],
  correctAnswer: "B) Libera√ß√£o puls√°til",
  comment: "A libera√ß√£o puls√°til do GnRH √© vital; a libera√ß√£o constante causaria desregula√ß√£o dos receptores na hip√≥fise.",
  topic: "Eixo Hipot√°lamo-Hip√≥fise-Ov√°rio"
},
{
  question: "Quais s√£o as duas gonadotrofinas secretadas pela hip√≥fise anterior em resposta ao est√≠mulo do GnRH?",
  options: [
    "A) Estrog√™nio e Progesterona",
    "B) FSH e LH",
    "C) Prolactina e Ocitocina",
    "D) Inibina A e Inibina B"
  ],
  correctAnswer: "B) FSH e LH",
  comment: "O GnRH estimula a hip√≥fise anterior a secretar FSH (Horm√¥nio Fol√≠culo-Estimulante) e LH (Horm√¥nio Luteinizante).",
  topic: "Eixo Hipot√°lamo-Hip√≥fise-Ov√°rio"
},
{
  question: "Na S√≠ndrome dos Ov√°rios Polic√≠sticos (SOP), qual √© a principal altera√ß√£o na pulsatilidade do GnRH e suas consequ√™ncias na produ√ß√£o de LH e FSH?",
  options: [
    "A) Frequ√™ncia diminu√≠da de pulsos de GnRH, levando a LH baixo em rela√ß√£o ao FSH",
    "B) Frequ√™ncia acelerada de pulsos de GnRH, levando a LH aumentado em rela√ß√£o ao FSH",
    "C) Libera√ß√£o constante de GnRH, resultando em FSH e LH igualmente elevados",
    "D) Bloqueio da libera√ß√£o de GnRH, causando aus√™ncia de FSH e LH"
  ],
  correctAnswer: "B) Frequ√™ncia acelerada de pulsos de GnRH, levando a LH aumentado em rela√ß√£o ao FSH",
  comment: "Na SOP, a frequ√™ncia acelerada dos pulsos de GnRH resulta em uma produ√ß√£o aumentada de LH em rela√ß√£o ao FSH.",
  topic: "S√≠ndrome dos Ov√°rios Polic√≠sticos (SOP)"
},
{
  question: "Qual √© a principal fun√ß√£o do FSH (Horm√¥nio Fol√≠culo-Estimulante) nos ov√°rios?",
  options: [
    "A) Desencadear a ovula√ß√£o",
    "B) Estimular a foliculog√™nese",
    "C) Formar e manter o corpo l√∫teo",
    "D) Preparar o √∫tero para a gravidez"
  ],
  correctAnswer: "B) Estimular a foliculog√™nese",
  comment: "O FSH atua nos ov√°rios estimulando o crescimento e a matura√ß√£o dos fol√≠culos (foliculog√™nese).",
  topic: "Fun√ß√µes Hormonais"
},
{
  question: "Qual √© a fun√ß√£o primordial do LH (Horm√¥nio Luteinizante) no ciclo menstrual fisiol√≥gico?",
  options: [
    "A) Estimular o espessamento do endom√©trio",
    "B) Induzir a matura√ß√£o folicular inicial",
    "C) Ser fundamental para a ovula√ß√£o e forma√ß√£o do corpo l√∫teo",
    "D) Produzir caracter√≠sticas sexuais secund√°rias"
  ],
  correctAnswer: "C) Ser fundamental para a ovula√ß√£o e forma√ß√£o do corpo l√∫teo",
  comment: "O LH √© crucial para a ovula√ß√£o e para a forma√ß√£o e manuten√ß√£o do corpo l√∫teo ap√≥s a libera√ß√£o do √≥vulo.",
  topic: "Fun√ß√µes Hormonais"
},
{
  question: "Quais horm√¥nios s√£o respons√°veis pelas caracter√≠sticas sexuais secund√°rias femininas e atuam na fase proliferativa do ciclo menstrual?",
  options: [
    "A) Progesterona",
    "B) Androg√™nios",
    "C) Estrog√™nios",
    "D) Relaxina"
  ],
  correctAnswer: "C) Estrog√™nios",
  comment: "Os estrog√™nios s√£o respons√°veis pelas caracter√≠sticas sexuais secund√°rias femininas e atuam na fase proliferativa do ciclo menstrual.",
  topic: "Horm√¥nios Ovarianos"
},
{
  question: "Qual horm√¥nio √© essencial para preparar o √∫tero para a gravidez, promovendo o crescimento e a vasculariza√ß√£o do endom√©trio para a nida√ß√£o?",
  options: [
    "A) Estrog√™nio",
    "B) Progesterona",
    "C) GnRH",
    "D) FSH"
  ],
  correctAnswer: "B) Progesterona",
  comment: "A progesterona √© essencial para preparar o √∫tero para a gravidez, promovendo o crescimento e a vasculariza√ß√£o do endom√©trio para a nida√ß√£o.",
  topic: "Horm√¥nios Ovarianos"
},
{
  question: "N√≠veis muito baixos do Horm√¥nio Anti-M√ºlleriano (AMH), como abaixo de 0,16 ng/ml, indicam qual condi√ß√£o?",
  options: [
    "A) S√≠ndrome dos Ov√°rios Polic√≠sticos (SOP)",
    "B) Alta reserva ovariana",
    "C) Baixa reserva ovariana",
    "D) Gravidez em est√°gio inicial"
  ],
  correctAnswer: "C) Baixa reserva ovariana",
  comment: "N√≠veis muito baixos de AMH (abaixo de 0,16 ng/ml) indicam baixa reserva ovariana, sugerindo proximidade da menopausa ou fal√™ncia ovariana prematura.",
  topic: "Horm√¥nio Anti-M√ºlleriano (AMH)"
},
{
  question: "Em rela√ß√£o ao Horm√¥nio Anti-M√ºlleriano (AMH), n√≠veis muito altos podem indicar qual condi√ß√£o e por qu√™?",
  options: [
    "A) Baixa reserva ovariana, devido ao esgotamento folicular.",
    "B) S√≠ndrome dos Ov√°rios Polic√≠sticos (SOP), devido a muitos fol√≠culos pequenos que n√£o amadurecem.",
    "C) Gravidez, pois o embri√£o produz AMH para sustentar o corpo l√∫teo.",
    "D) Menopausa, indicando a cessa√ß√£o da fun√ß√£o ovariana."
  ],
  correctAnswer: "B) S√≠ndrome dos Ov√°rios Polic√≠sticos (SOP), devido a muitos fol√≠culos pequenos que n√£o amadurecem.",
  comment: "N√≠veis muito altos de AMH podem indicar SOP, pois h√° muitos fol√≠culos pequenos que n√£o amadurecem, mas continuam produzindo AMH, bloqueando o FSH e impedindo a ovula√ß√£o.",
  topic: "Horm√¥nio Anti-M√ºlleriano (AMH)"
},
{
  question: "Qual inibina √© secretada pelos fol√≠culos em crescimento na fase folicular para sinalizar √† hip√≥fise que reduza o FSH?",
  options: [
    "A) Inibina A",
    "B) Inibina B",
    "C) Inibina C",
    "D) Inibina D"
  ],
  correctAnswer: "B) Inibina B",
  comment: "A Inibina B √© secretada pelos fol√≠culos em crescimento na fase folicular para regular o FSH via feedback negativo.",
  topic: "Inibinas"
},
{
  question: "A Inibina A √© produzida majoritariamente por qual estrutura e qual sua import√¢ncia se houver gravidez?",
  options: [
    "A) Pelo fol√≠culo em crescimento, para inibir o LH.",
    "B) Pela placenta, para manter o crescimento fetal.",
    "C) Pelo corpo l√∫teo, e sua produ√ß√£o continua para manter o corpo l√∫teo vi√°vel na gravidez.",
    "D) Pelo ov√°rio na fase proliferativa, para estimular o estrog√™nio."
  ],
  correctAnswer: "C) Pelo corpo l√∫teo, e sua produ√ß√£o continua para manter o corpo l√∫teo vi√°vel na gravidez.",
  comment: "A Inibina A √© produzida majoritariamente pelo corpo l√∫teo e, se houver gravidez, sua produ√ß√£o continua para manter o corpo l√∫teo vi√°vel.",
  topic: "Inibinas"
},
{
  question: "Durante a fase folicular (ov√°ria) / proliferativa (uterina) do ciclo menstrual, qual horm√¥nio √© produzido pelos fol√≠culos e qual seu efeito inicial sobre o endom√©trio?",
  options: [
    "A) Progesterona, causando descama√ß√£o do endom√©trio.",
    "B) Estrog√™nio (estradiol), que espessa o endom√©trio.",
    "C) LH, que atrofia o endom√©trio.",
    "D) GnRH, que causa o afinamento do endom√©trio."
  ],
  correctAnswer: "B) Estrog√™nio (estradiol), que espessa o endom√©trio.",
  comment: "Os fol√≠culos recrutados na fase folicular produzem estrog√™nio (estradiol), que come√ßa a espessar o endom√©trio na fase proliferativa.",
  topic: "Ciclo Menstrual"
},
{
  question: "O pico abrupto de LH, respons√°vel por desencadear a ovula√ß√£o, √© resultado de qual altera√ß√£o no feedback do estrog√™nio?",
  options: [
    "A) Um feedback negativo cont√≠nuo do estrog√™nio.",
    "B) Um feedback positivo do estrog√™nio quando atinge um pico sustentado pr√©-ovulat√≥rio.",
    "C) A aus√™ncia completa de estrog√™nio.",
    "D) A estimula√ß√£o direta da hip√≥fise pelo FSH."
  ],
  correctAnswer: "B) Um feedback positivo do estrog√™nio quando atinge um pico sustentado pr√©-ovulat√≥rio.",
  comment: "O aumento do estrog√™nio exerce um feedback negativo inicial, mas, quando atinge um pico sustentado pr√©-ovulat√≥rio, inverte para um feedback positivo, desencadeando o pico de LH.",
  topic: "Ciclo Menstrual"
},
{
  question: "A ovula√ß√£o ocorre aproximadamente em qual dia em ciclos de 28 dias e √© desencadeada por qual evento hormonal?",
  options: [
    "A) No 1¬∫ dia, desencadeada pelo pico de FSH.",
    "B) No 21¬∫ dia, desencadeada pelo pico de progesterona.",
    "C) No 14¬∫ dia, desencadeada pelo pico de LH.",
    "D) No 7¬∫ dia, desencadeada pelo pico de estrog√™nio."
  ],
  correctAnswer: "C) No 14¬∫ dia, desencadeada pelo pico de LH.",
  comment: "A ovula√ß√£o ocorre aproximadamente no 14¬∫ dia (em ciclos de 28 dias), desencadeada pelo pico de LH.",
  topic: "Ovula√ß√£o"
},
{
  question: "Quais s√£o dois sinais fisiol√≥gicos que podem indicar a ovula√ß√£o?",
  options: [
    "A) Diminui√ß√£o da temperatura basal e muco cervical espesso.",
    "B) Aumento da temperatura basal e muco cervical fluido e el√°stico (clara de ovo).",
    "C) Dor abdominal intensa e sangramento vaginal abundante.",
    "D) Secre√ß√£o de leite e incha√ßo das mamas."
  ],
  correctAnswer: "B) Aumento da temperatura basal e muco cervical fluido e el√°stico (clara de ovo).",
  comment: "No per√≠odo da ovula√ß√£o, a temperatura basal da mulher sobe ligeiramente e o muco cervical torna-se fluido e el√°stico (aspecto de 'clara de ovo').",
  topic: "Ovula√ß√£o"
},
{
  question: "Ap√≥s a ovula√ß√£o, o fol√≠culo rompido reorganiza-se para formar qual estrutura?",
  options: [
    "A) Corpo albicans",
    "B) Corpo l√∫teo",
    "C) Fol√≠culo primordial",
    "D) Ov√°rio polic√≠stico"
  ],
  correctAnswer: "B) Corpo l√∫teo",
  comment: "Ap√≥s a ovula√ß√£o, o fol√≠culo rompido reorganiza-se e forma o corpo l√∫teo (ou corpo amarelo).",
  topic: "Fase L√∫tea"
},
{
  question: "Quais s√£o os principais horm√¥nios produzidos pelo corpo l√∫teo?",
  options: [
    "A) GnRH e FSH",
    "B) Prolactina e Ocitocina",
    "C) Progesterona, estrog√™nio e Inibina A",
    "D) hPL e Relaxina"
  ],
  correctAnswer: "C) Progesterona, estrog√™nio e Inibina A",
  comment: "O corpo l√∫teo √© uma 'f√°brica' tempor√°ria de horm√¥nios, produzindo altas quantidades de progesterona, estrog√™nio e Inibina A.",
  topic: "Corpo L√∫teo"
},
{
  question: "Qual o papel da progesterona na fase l√∫tea do ciclo menstrual em rela√ß√£o ao endom√©trio?",
  options: [
    "A) Promover a descama√ß√£o do endom√©trio.",
    "B) Tornar o endom√©trio secretor, preparando-o para a implanta√ß√£o do embri√£o.",
    "C) Inibir o crescimento do endom√©trio.",
    "D) Espessar o endom√©trio para o pico de LH."
  ],
  correctAnswer: "B) Tornar o endom√©trio secretor, preparando-o para a implanta√ß√£o do embri√£o.",
  comment: "A progesterona torna o endom√©trio secretor (gl√¢ndulas tortuosas, rico em nutrientes e vascularizado) preparando o 'ber√ßo' para o embri√£o.",
  topic: "Fase L√∫tea"
},
{
  question: "O que acontece com o corpo l√∫teo e os n√≠veis hormonais se n√£o houver fecunda√ß√£o, resultando na menstrua√ß√£o?",
  options: [
    "A) O corpo l√∫teo aumenta, e os n√≠veis hormonais sobem.",
    "B) O corpo l√∫teo persiste, e os n√≠veis hormonais se mant√™m est√°veis.",
    "C) O corpo l√∫teo regride e se torna corpo albicans, e os n√≠veis hormonais caem drasticamente.",
    "D) O corpo l√∫teo se transforma em placenta, e os n√≠veis hormonais s√£o produzidos por ela."
  ],
  correctAnswer: "C) O corpo l√∫teo regride e se torna corpo albicans, e os n√≠veis hormonais caem drasticamente.",
  comment: "Se n√£o houver fecunda√ß√£o, o corpo l√∫teo regride ap√≥s cerca de 14 dias, tornando-se corpo albicans, e os n√≠veis hormonais caem drasticamente, causando a menstrua√ß√£o.",
  topic: "Fase L√∫tea"
},
{
  question: "Qual parte do embri√£o come√ßa a secretar hCG ap√≥s a implanta√ß√£o, e qual √© a principal fun√ß√£o inicial do hCG?",
  options: [
    "A) O zigoto; para iniciar o desenvolvimento fetal.",
    "B) O sinciciotrofoblasto; para 'salvar' o corpo l√∫teo da regress√£o.",
    "C) O blastocisto; para estimular a produ√ß√£o de estrog√™nio pelos ov√°rios.",
    "D) O embrioblasto; para preparar as mamas para a lacta√ß√£o."
  ],
  correctAnswer: "B) O sinciciotrofoblasto; para 'salvar' o corpo l√∫teo da regress√£o.",
  comment: "O sinciciotrofoblasto come√ßa a secretar hCG, que tem a fun√ß√£o de 'salvar' o corpo l√∫teo da regress√£o, mantendo a produ√ß√£o de progesterona.",
  topic: "In√≠cio da Gesta√ß√£o"
},
{
  question: "Al√©m de manter o corpo l√∫teo, qual outra fun√ß√£o importante o hCG exerce no in√≠cio da gesta√ß√£o?",
  options: [
    "A) Promover o crescimento uterino.",
    "B) Aumentar a sensibilidade materna √† insulina.",
    "C) Fun√ß√£o imunomoduladora, reduzindo a resposta imune materna.",
    "D) Estimular as contra√ß√µes uterinas."
  ],
  correctAnswer: "C) Fun√ß√£o imunomoduladora, reduzindo a resposta imune materna.",
  comment: "O hCG tamb√©m tem fun√ß√£o imunomoduladora, reduzindo a resposta imune materna para evitar a rejei√ß√£o do feto.",
  topic: "In√≠cio da Gesta√ß√£o"
},
{
  question: "Qual √≥rg√£o se torna o principal √≥rg√£o end√≥crino da gesta√ß√£o, assumindo o controle hormonal e produzindo progesterona e estrog√™nios em grandes quantidades?",
  options: [
    "A) Ov√°rios",
    "B) Hip√≥fise",
    "C) Adrenais",
    "D) Placenta"
  ],
  correctAnswer: "D) Placenta",
  comment: "A partir da forma√ß√£o completa da placenta, ela se torna o principal √≥rg√£o end√≥crino da gesta√ß√£o, assumindo o controle hormonal.",
  topic: "Fun√ß√£o Placent√°ria"
},
{
  question: "Qual horm√¥nio produzido pela placenta √© um estrog√™nio importante para o crescimento uterino e a prepara√ß√£o mam√°ria?",
  options: [
    "A) Estrona",
    "B) Estradiol",
    "C) Estriol",
    "D) Estetrol"
  ],
  correctAnswer: "C) Estriol",
  comment: "A placenta secreta o Estriol, um estrog√™nio importante para o crescimento uterino e prepara√ß√£o mam√°ria.",
  topic: "Fun√ß√£o Placent√°ria"
},
{
  question: "Qual √© a principal fun√ß√£o da progesterona durante a gesta√ß√£o em rela√ß√£o ao miom√©trio?",
  options: [
    "A) Estimular as contra√ß√µes uterinas.",
    "B) Manter o miom√©trio relaxado (quiesc√™ncia uterina).",
    "C) Promover a dilata√ß√£o do colo uterino.",
    "D) Aumentar a vasculariza√ß√£o do √∫tero para o parto."
  ],
  correctAnswer: "B) Manter o miom√©trio relaxado (quiesc√™ncia uterina).",
  comment: "A progesterona na gesta√ß√£o mant√©m o miom√©trio relaxado (quiesc√™ncia uterina), impedindo contra√ß√µes prematuras.",
  topic: "Horm√¥nios da Gesta√ß√£o"
},
{
  question: "Como a progesterona protege a cavidade uterina contra infec√ß√µes durante a gesta√ß√£o?",
  options: [
    "A) Aumentando a resposta imune materna.",
    "B) Estimulando a produ√ß√£o de anticorpos fetais.",
    "C) Tornando o muco cervical espesso, formando o 'tamp√£o mucoso'.",
    "D) Reduzindo o fluxo sangu√≠neo para o √∫tero."
  ],
  correctAnswer: "C) Tornando o muco cervical espesso, formando o 'tamp√£o mucoso'.",
  comment: "A progesterona torna o muco cervical espesso, formando o 'tamp√£o mucoso', uma barreira f√≠sica e qu√≠mica contra microrganismos.",
  topic: "Horm√¥nios da Gesta√ß√£o"
},
{
  question: "Qual √© a principal fun√ß√£o do Horm√¥nio Lactog√™nio Placent√°rio (hPL), tamb√©m conhecido como Somatomamotropina Cori√¥nica?",
  options: [
    "A) Induzir as contra√ß√µes uterinas no parto.",
    "B) Reduzir a resist√™ncia materna √† insulina para diminuir a glicose fetal.",
    "C) Aumentar a resist√™ncia materna √† insulina para garantir aporte de nutrientes para o feto.",
    "D) Estimular a produ√ß√£o de leite durante a gesta√ß√£o."
  ],
  correctAnswer: "C) Aumentar a resist√™ncia materna √† insulina para garantir aporte de nutrientes para o feto.",
  comment: "O hPL aumenta a resist√™ncia materna √† insulina, uma adapta√ß√£o fisiol√≥gica para manter n√≠veis de glicose mais altos para o feto.",
  topic: "Horm√¥nios da Gesta√ß√£o"
},
{
  question: "Qual horm√¥nio √© produzido pelo corpo l√∫teo e depois pela placenta, sendo sua principal fun√ß√£o relaxar os ligamentos p√©lvicos para facilitar o parto?",
  options: [
    "A) Estrog√™nio",
    "B) Progesterona",
    "C) Relaxina",
    "D) Ocitocina"
  ],
  correctAnswer: "C) Relaxina",
  comment: "A Relaxina √© produzida pelo corpo l√∫teo e pela placenta, e sua fun√ß√£o principal √© relaxar os ligamentos p√©lvicos e a s√≠nfise p√∫bica para facilitar o parto.",
  topic: "Horm√¥nios da Gesta√ß√£o"
},
{
  question: "Al√©m do relaxamento p√©lvico, quais outros efeitos sist√™micos a Relaxina pode causar na gestante?",
  options: [
    "A) Aumento da press√£o arterial e taquicardia.",
    "B) Aumento do p√© da gestante e incha√ßo das cartilagens nasais (nariz de coxinha).",
    "C) Ressecamento da pele e perda de cabelo.",
    "D) Diminui√ß√£o da temperatura corporal e sonol√™ncia."
  ],
  correctAnswer: "B) Aumento do p√© da gestante e incha√ßo das cartilagens nasais (nariz de coxinha).",
  comment: "A Relaxina tem a√ß√£o sist√™mica, afetando outras cartilagens, o que pode levar ao aumento do p√© e incha√ßo das cartilagens nasais.",
  topic: "Horm√¥nios da Gesta√ß√£o"
},
{
  question: "Durante a gesta√ß√£o, os n√≠veis de prolactina aumentam para preparar as gl√¢ndulas mam√°rias. No entanto, o que inibe a produ√ß√£o de leite nesse per√≠odo?",
  options: [
    "A) Baixos n√≠veis de estrog√™nio e progesterona.",
    "B) Altos n√≠veis de prolactina.",
    "C) Altos n√≠veis de progesterona e estrog√™nio.",
    "D) A aus√™ncia de suc√ß√£o no mamilo."
  ],
  correctAnswer: "C) Altos n√≠veis de progesterona e estrog√™nio.",
  comment: "A produ√ß√£o de leite √© inibida durante a gesta√ß√£o pelos altos n√≠veis de progesterona e estrog√™nio.",
  topic: "Lacta√ß√£o"
},
{
  question: "Onde a Ocitocina √© produzida e armazenada, respectivamente?",
  options: [
    "A) No c√≥rtex adrenal e armazenada no rim.",
    "B) No ov√°rio e armazenada na hip√≥fise anterior.",
    "C) No hipot√°lamo e armazenada na hip√≥fise posterior (neuroip√≥fise).",
    "D) Na placenta e armazenada no √∫tero."
  ],
  correctAnswer: "C) No hipot√°lamo e armazenada na hip√≥fise posterior (neuroip√≥fise).",
  comment: "A Ocitocina √© produzida no hipot√°lamo e armazenada na hip√≥fise posterior (neuroip√≥fise).",
  topic: "Ocitocina"
},
{
  question: "Qual horm√¥nio fetal estimula a matura√ß√£o pulmonar (produ√ß√£o de surfactante) e sinaliza o 'pronto' para respirar, desencadeando o in√≠cio do trabalho de parto?",
  options: [
    "A) Estrog√™nio fetal",
    "B) Progesterona fetal",
    "C) Cortisol fetal",
    "D) Adrenalina fetal"
  ],
  correctAnswer: "C) Cortisol fetal",
  comment: "O feto libera cortisol, que estimula a matura√ß√£o pulmonar (produ√ß√£o de surfactante), sinalizando que o pulm√£o est√° pronto para respirar e desencadeando o trabalho de parto.",
  topic: "Matura√ß√£o Fetal e In√≠cio do Parto"
},
{
  question: "A presen√ßa de surfactante no l√≠quido amni√≥tico, estimulada pelo cortisol fetal, desencadeia uma cascata que leva √† produ√ß√£o de quais subst√¢ncias e ao aumento da sensibilidade uterina a qual horm√¥nio, iniciando o trabalho de parto?",
  options: [
    "A) Estrog√™nios e aumento da sensibilidade √† progesterona.",
    "B) Prostaglandinas e aumento da sensibilidade √† ocitocina.",
    "C) Inibinas e aumento da sensibilidade ao FSH.",
    "D) HCG e aumento da sensibilidade ao LH."
  ],
  correctAnswer: "B) Prostaglandinas e aumento da sensibilidade √† ocitocina.",
  comment: "A presen√ßa de surfactante desencadeia uma cascata inflamat√≥ria e hormonal que leva √† produ√ß√£o de prostaglandinas e aumento da sensibilidade uterina √† ocitocina, iniciando o trabalho de parto.",
  topic: "Matura√ß√£o Fetal e In√≠cio do Parto"
},
{
  question: "No gatilho do parto, quais mudan√ßas hormonais maternas aumentam a contratilidade uterina e a forma√ß√£o de jun√ß√µes comunicantes entre as c√©lulas musculares?",
  options: [
    "A) Aumento da progesterona e diminui√ß√£o do estrog√™nio.",
    "B) Queda relativa da progesterona e aumento dos estrog√™nios.",
    "C) Eleva√ß√£o do FSH e LH.",
    "D) Aumento da relaxina e diminui√ß√£o da ocitocina."
  ],
  correctAnswer: "B) Queda relativa da progesterona e aumento dos estrog√™nios.",
  comment: "A queda relativa da progesterona (que mantinha o √∫tero relaxado) e o aumento dos estrog√™nios no final da gesta√ß√£o aumentam a contratilidade uterina.",
  topic: "Fisiologia do Parto"
},
{
  question: "Qual o papel das prostaglandinas no trabalho de parto?",
  options: [
    "A) Inibir as contra√ß√µes uterinas.",
    "B) Manter o colo do √∫tero fechado.",
    "C) Promover o apagamento e a dilata√ß√£o do colo do √∫tero, al√©m de induzir contra√ß√µes.",
    "D) Reduzir a dor do parto."
  ],
  correctAnswer: "C) Promover o apagamento e a dilata√ß√£o do colo do √∫tero, al√©m de induzir contra√ß√µes.",
  comment: "As prostaglandinas promovem o apagamento (afinamento) e a dilata√ß√£o do colo do √∫tero, al√©m de induzirem contra√ß√µes.",
  topic: "Fisiologia do Parto"
},
{
  question: "Descreva o mecanismo do Reflexo de Ferguson no trabalho de parto.",
  options: [
    "A) O estresse materno inibe a libera√ß√£o de ocitocina.",
    "B) A press√£o da cabe√ßa fetal no colo do √∫tero estimula a libera√ß√£o de mais ocitocina, intensificando as contra√ß√µes.",
    "C) A ocitocina liberada pela placenta causa relaxamento do √∫tero.",
    "D) O cortisol fetal bloqueia a a√ß√£o da ocitocina, prolongando o parto."
  ],
  correctAnswer: "B) A press√£o da cabe√ßa fetal no colo do √∫tero estimula a libera√ß√£o de mais ocitocina, intensificando as contra√ß√µes.",
  comment: "O Reflexo de Ferguson √© um feedback positivo onde a press√£o da cabe√ßa fetal no colo do √∫tero estimula a libera√ß√£o de mais ocitocina, aumentando as contra√ß√µes.",
  topic: "Fisiologia do Parto"
},
{
  question: "Qual o efeito das catecolaminas (adrenalina e noradrenalina) liberadas por medo e estresse excessivo durante o parto?",
  options: [
    "A) Aumentar o fluxo sangu√≠neo para o √∫tero e intensificar as contra√ß√µes.",
    "B) Desviar o sangue do √∫tero para os m√∫sculos perif√©ricos, podendo inibir as contra√ß√µes.",
    "C) Promover a dilata√ß√£o r√°pida do colo do √∫tero.",
    "D) Estimular a libera√ß√£o de endorfinas para al√≠vio da dor."
  ],
  correctAnswer: "B) Desviar o sangue do √∫tero para os m√∫sculos perif√©ricos, podendo inibir as contra√ß√µes.",
  comment: "As catecolaminas do estresse desviam o sangue do √∫tero para os m√∫sculos perif√©ricos, o que pode inibir as contra√ß√µes e prolongar o trabalho de parto.",
  topic: "Dor e Estresse no Parto"
},
{
  question: "O que as fontanelas (moleiras) do cr√¢nio do beb√™ permitem durante a passagem pelo canal vaginal?",
  options: [
    "A) Fixar firmemente os ossos para proteger o c√©rebro.",
    "B) Aumentar o tamanho da cabe√ßa para facilitar a sa√≠da.",
    "C) Que os ossos da cabe√ßa se sobreponham ('moldagem') para passar pelo canal estreito.",
    "D) Regular a temperatura do c√©rebro do beb√™."
  ],
  correctAnswer: "C) Que os ossos da cabe√ßa se sobreponham ('moldagem') para passar pelo canal estreito.",
  comment: "As fontanelas permitem que os ossos da cabe√ßa do beb√™ se sobreponham, um processo chamado 'moldagem', para facilitar a passagem pelo canal vaginal estreito.",
  topic: "Mec√¢nica do Nascimento"
},
{
  question: "Ap√≥s o nascimento do beb√™, qual √© o principal horm√¥nio respons√°vel pelas contra√ß√µes uterinas que ajudam a expulsar a placenta e prevenir hemorragias p√≥s-parto?",
  options: [
    "A) Progesterona",
    "B) Estrog√™nio",
    "C) Ocitocina",
    "D) Prolactina"
  ],
  correctAnswer: "C) Ocitocina",
  comment: "A Ocitocina √© o principal horm√¥nio respons√°vel pelas contra√ß√µes uterinas p√≥s-parto, que s√£o vitais para a dequita√ß√£o da placenta e hemostasia.",
  topic: "P√≥s-Parto Imediato"
},
{
  question: "Qual a diferen√ßa na descida do leite (apojadura) entre um parto normal e uma ces√°rea agendada, e qual horm√¥nio est√° mais envolvido?",
  options: [
    "A) No parto normal, a apojadura √© mais r√°pida devido √† cascata hormonal completa (ocitocina e prolactina); na ces√°rea, pode ser retardada.",
    "B) Na ces√°rea, a apojadura √© mais r√°pida devido √† estimula√ß√£o cir√∫rgica; no parto normal, √© mais lenta.",
    "C) A apojadura depende apenas da suc√ß√£o do beb√™, sem influ√™ncia do tipo de parto.",
    "D) A prolactina √© respons√°vel pela eje√ß√£o, e a ocitocina pela produ√ß√£o, sem rela√ß√£o com o tipo de parto."
  ],
  correctAnswer: "A) No parto normal, a apojadura √© mais r√°pida devido √† cascata hormonal completa (ocitocina e prolactina); na ces√°rea, pode ser retardada.",
  comment: "No parto normal, a cascata hormonal completa (pico de ocitocina e prolactina) facilita a apojadura mais r√°pida, o que pode ser retardado na ces√°rea agendada.",
  topic: "Lacta√ß√£o"
},
{
  question: "A suc√ß√£o do beb√™ na mama estimula a libera√ß√£o de quais horm√¥nios e quais s√£o suas respectivas fun√ß√µes na amamenta√ß√£o e recupera√ß√£o materna?",
  options: [
    "A) FSH (produ√ß√£o de leite) e LH (eje√ß√£o de leite).",
    "B) Prolactina (produ√ß√£o de leite) e Ocitocina (eje√ß√£o de leite e c√≥licas uterinas).",
    "C) Estrog√™nio (produ√ß√£o de leite) e Progesterona (eje√ß√£o de leite).",
    "D) GnRH (produ√ß√£o de leite) e hPL (eje√ß√£o de leite)."
  ],
  correctAnswer: "B) Prolactina (produ√ß√£o de leite) e Ocitocina (eje√ß√£o de leite e c√≥licas uterinas).",
  comment: "A suc√ß√£o estimula a prolactina para produ√ß√£o de leite e ocitocina para eje√ß√£o do leite, al√©m de causar c√≥licas uterinas que ajudam na involu√ß√£o uterina.",
  topic: "Amamenta√ß√£o e V√≠nculo"
},
{
  question: "A pr√°tica de estimular e 'calejar' os mamilos durante a gesta√ß√£o √© mencionada com qual objetivo, apesar de controversa?",
  options: [
    "A) Aumentar a produ√ß√£o de leite antes do parto.",
    "B) Reduzir a dor e as fissuras no in√≠cio da amamenta√ß√£o.",
    "C) Diminuir a sensibilidade dos mamilos para evitar a eje√ß√£o precoce do leite.",
    "D) Promover o v√≠nculo com o beb√™ antes do nascimento."
  ],
  correctAnswer: "B) Reduzir a dor e as fissuras no in√≠cio da amamenta√ß√£o.",
  comment: "A pr√°tica de estimular e 'calejar' os mamilos √© citada como experi√™ncia cl√≠nica para reduzir a dor e as fissuras no in√≠cio da amamenta√ß√£o, embora seja controversa.",
  topic: "Amamenta√ß√£o e V√≠nculo"
},
{
  question: "De acordo com o resumo, qual √© a principal fun√ß√£o do CRH (Horm√¥nio Liberador de Corticotrofina) na gravidez?",
  options: [
    "A) Produ√ß√£o de leite.",
    "B) Relaxamento p√©lvico.",
    "C) Atua como 'rel√≥gio biol√≥gico' do parto.",
    "D) Manuten√ß√£o do corpo l√∫teo."
  ],
  correctAnswer: "C) Atua como 'rel√≥gio biol√≥gico' do parto.",
  comment: "O CRH √© descrito como o 'rel√≥gio biol√≥gico' do parto, indicando seu papel no tempo do in√≠cio do trabalho de parto.",
  topic: "Resumo Hormonal"
} ];

    function buildQuiz() {
        const output = [];
        questions.forEach((currentQuestion, questionNumber) => {
            const options = [];
            for (let i = 0; i < currentQuestion.options.length; i++) {
                // Note o uso de ${...} para template literals do JS dentro da f-string
                options.push(
                    `<label class="option" data-question="${questionNumber}" data-value="${currentQuestion.options[i]}">
                        <img src="tesouras.png" class="scissor-icon" onclick="event.stopPropagation(); this.parentNode.classList.toggle('struck-through');">
                        ${currentQuestion.options[i]}
                    </label>`
                );
            }
            output.push(
                `<div class="card" id="question-${questionNumber}" data-topic="${currentQuestion.topic}">
                    <div class="question">${currentQuestion.question}</div>
                    <div class="options">${options.join("")}</div>
                    <div class="comment" id="comment-${questionNumber}"></div>
                </div>`
            );
        });
        quizContainer.innerHTML = output.join("");
    }

    function showResults() {
        wrongQuestionIndices = [];
        errorCountByTopic = {};
        totalAnsweredQuestionsByTopic = {};
        currentWrongQuestionIndex = -1;
        hasErrors = false;
        errorDiagnosisSection.style.display = 'none';
        topicsToReviewList.innerHTML = '';
        statusMessage.textContent = '';

        const allQuestionCards = document.querySelectorAll('.quiz-container .card, #newQuestionsContent .card');
        let correctAnswersCount = 0;
        let totalQuestionsAnswered = 0;

        allQuestionCards.forEach((card, index) => {
            const questionEl = card.querySelector('.question') || card.querySelector('p');
            if (!questionEl) return;
            
            const questionText = questionEl.textContent.trim();
            const optionsContainer = card.querySelector('.options') || card;
            const allOptions = optionsContainer.querySelectorAll('.option, label.option, label');
            const userAnswerElement = optionsContainer.querySelector('.option.selected, label.selected');
            const commentDiv = card.querySelector('.comment');
            const questionTopic = card.dataset.topic || "T√≥pico n√£o informado";

            // Limpa classes
            allOptions.forEach(option => { option.classList.remove('correct', 'incorrect', 'selected'); });
            if (commentDiv) commentDiv.classList.remove('show');

            let correctAnswerValue = null;
            let questionComment = null;

            // L√≥gica para Est√°ticas vs Din√¢micas
            const isStatic = card.id && card.id.startsWith('question-');
            if (isStatic) {
                const questionData = questions.find(q => q.question.trim() === questionText);
                if (questionData) {
                    correctAnswerValue = questionData.correctAnswer.trim();
                    questionComment = questionData.comment;
                }
            } else {
                const correctOpt = optionsContainer.querySelector('.option[data-answer="true"], label[data-answer="true"]');
                if (correctOpt) correctAnswerValue = correctOpt.dataset.value?.trim() || correctOpt.textContent.trim();
                
                const commentElement = card.querySelector('.comment');
                if (commentElement && commentElement.textContent.trim()) questionComment = commentElement.textContent.trim();
            }

            // Verifica resposta
            let userAnswer = null;
            if (userAnswerElement) {
                userAnswerElement.classList.add('selected');
                userAnswer = userAnswerElement.dataset.value?.trim() || userAnswerElement.textContent.trim();
                totalQuestionsAnswered++;
                totalAnsweredQuestionsByTopic[questionTopic] = (totalAnsweredQuestionsByTopic[questionTopic] || 0) + 1;

                if (userAnswer === correctAnswerValue) {
                    correctAnswersCount++;
                } else {
                    hasErrors = true;
                    errorCountByTopic[questionTopic] = (errorCountByTopic[questionTopic] || 0) + 1;
                }
            }

            // Pinta as op√ß√µes
            allOptions.forEach(option => {
                const optionValue = option.dataset.value?.trim() || option.textContent.trim();
                if (optionValue === correctAnswerValue) option.classList.add('correct');
                if (userAnswer && optionValue === userAnswer && userAnswer !== correctAnswerValue) option.classList.add('incorrect');
            });

            if (commentDiv && questionComment) {
                commentDiv.textContent = questionComment;
                commentDiv.classList.add('show');
            }
        });

        resultsContainer.textContent = `Voc√™ acertou ${correctAnswersCount} de ${totalQuestionsAnswered} quest√µes respondidas.`;

        // Diagn√≥stico
        if (hasErrors) {
            for (const topic in errorCountByTopic) {
                const errors = errorCountByTopic[topic];
                const total = totalAnsweredQuestionsByTopic[topic] || 0;
                if (total > 0) {
                    const percent = ((errors / total) * 100).toFixed(1);
                    const li = document.createElement('li');
                    li.textContent = `${topic}: ${percent}% de erros (${errors} de ${total} quest√µes)`;
                    topicsToReviewList.appendChild(li);
                }
            }
            errorDiagnosisSection.style.display = 'block';
            generatedQuestionsSection.style.display = 'block';
            generateNewQuestionsBtn.style.display = 'block';
            errorDiagnosisSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        } else {
            const li = document.createElement('li');
            li.textContent = "ü•≥ Parab√©ns! Voc√™ n√£o teve erros nas quest√µes respondidas.";
            topicsToReviewList.appendChild(li);
        }
    }

    // Listeners
    document.addEventListener("click", function (event) {
        const clickedElement = event.target;
        const optionElement = clickedElement.closest('.option');
        if (optionElement) {
            if (clickedElement.classList.contains("scissor-icon")) {
                event.stopPropagation();
                optionElement.classList.toggle("struck-through");
            } else {
                const parentCard = optionElement.closest('.card');
                const currentQuestionOptions = parentCard.querySelectorAll('.option');
                currentQuestionOptions.forEach(opt => opt.classList.remove("selected"));
                optionElement.classList.add("selected");
            }
        }
    });

    generateNewQuestionsBtn.addEventListener("click", async function() {
        statusMessage.textContent = '‚è≥ Gerando novas perguntas...';
        generateNewQuestionsBtn.disabled = true;
        
        const topics = Object.keys(errorCountByTopic).filter(topic => {
            const errorsInTopic = errorCountByTopic[topic] || 0;
            const totalAnsweredInTopic = totalAnsweredQuestionsByTopic[topic] || 0;
            return errorsInTopic > 0 && totalAnsweredInTopic > 0;
        });
        
        const topicsToSend = topics.length > 0 ? topics : ["fisiologia celular", "biologia"];

        try {
            const response = await fetch('https://www.quizia.xyz/quiz', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ topicos: topicsToSend }),
            });

            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
            
            const data = await response.json();
            newQuestionsContent.innerHTML = '';

            if (data && data.html) {
                newQuestionsContent.innerHTML = data.html.replace(/```html|```/g, '');
                
                newQuestionsContent.querySelectorAll('.card').forEach((card) => {
                    // L√≥gica de limpeza e adi√ß√£o de tesouras (mantida igual)
                    const questionElement = card.querySelector('p');
                    if (questionElement && !questionElement.classList.contains('question')) questionElement.classList.add('question');
                    
                    card.querySelectorAll('label').forEach((label) => {
                        const radioInput = label.querySelector('input[type="radio"]');
                        if (radioInput) {
                            if (radioInput.hasAttribute('data-answer')) label.setAttribute('data-answer', radioInput.getAttribute('data-answer'));
                            radioInput.remove();
                        }
                        if (!label.classList.contains('option')) label.classList.add('option');
                        if (!label.dataset.value) label.dataset.value = label.textContent.trim();
                        if (!label.querySelector('.scissor-icon')) {
                            const scissorIcon = document.createElement('img');
                            scissorIcon.src = 'tesouras.png';
                            scissorIcon.className = 'scissor-icon';
                            scissorIcon.onclick = function(e) { e.stopPropagation(); label.classList.toggle('struck-through'); };
                            label.insertBefore(scissorIcon, label.firstChild);
                        }
                    });
                });
            } else {
                newQuestionsContent.innerHTML = "<p>N√£o foi poss√≠vel gerar novas perguntas.</p>";
            }
            
            generatedQuestionsSection.style.display = 'block';
            generatedQuestionsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            statusMessage.textContent = '‚úÖ Perguntas geradas com sucesso!';
            setTimeout(() => { statusMessage.textContent = '' }, 3000);
            
        } catch (error) {
            console.error('Erro:', error);
            statusMessage.textContent = '‚ùå Erro: ' + error.message;
            setTimeout(() => { statusMessage.textContent = '' }, 5000);
        } finally {
            generateNewQuestionsBtn.disabled = false;
        }
    });

    buildQuiz();
    document.getElementById("verifyAnswersBtn").addEventListener("click", showResults);
</script>
</body>
</html>
