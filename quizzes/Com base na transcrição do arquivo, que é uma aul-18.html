
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Com base na transcri√ß√£o do arquivo, que √© uma aul-18</title>
    <style>
        body { font-family: sans-serif; margin: 0; padding: 20px; display: flex; justify-content: center; align-items: flex-start; min-height: 100vh; background-color: #f4f4f4; }
        .quiz-container { max-width: 800px; width: 100%; }
        h1 { color: #333; text-align: center; margin-bottom: 30px; }
        .card { background-color: white; border-radius: 8px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); }
        .question { font-weight: bold; margin-bottom: 10px; color: #333; }
        .options { margin-top: 15px; }
        
        /* Estilos das op√ß√µes */
        .option, label.option, label, #newQuestionsContent label { display: flex; align-items: center; margin-bottom: 10px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; cursor: pointer; transition: background-color 0.2s ease; position: relative; }
        
        /* Ocultar Radio inputs */
        .option input[type="radio"], label input[type="radio"], #newQuestionsContent input[type="radio"], #newQuestionsContent label input[type="radio"] { display: none !important; visibility: hidden !important; opacity: 0 !important; position: absolute !important; left: -9999px !important; }
        
        .option:hover, label.option:hover, label:hover, #newQuestionsContent label:hover { background-color: #e9e9e9; }
        .option.selected, label.option.selected, label.selected, #newQuestionsContent label.selected { background-color: #d1e7dd; border-color: #28a745; }
        .option.correct, label.option.correct, label.correct, #newQuestionsContent label.correct { background-color: #d4edda; border-color: #28a745; }
        .option.incorrect, label.option.incorrect, label.incorrect, #newQuestionsContent label.incorrect { background-color: #f8d7da; border-color: #dc3545; }
        
        .submit-btn { display: block; width: 100%; padding: 15px; background-color: #007bff; color: white; border: none; border-radius: 5px; font-size: 18px; cursor: pointer; transition: background-color 0.3s ease; margin-top: 30px; }
        .submit-btn:hover { background-color: #0056b3; }
        
        .results { text-align: center; margin-top: 30px; font-size: 20px; font-weight: bold; color: #333; }
        .scissor-icon { margin-right: 10px; width: 20px; height: 20px; opacity: 0.5; cursor: pointer; }
        .scissor-icon.hidden { display: none; }
        .struck-through { text-decoration: line-through; color: #888; }
        
        .comment { margin-top: 10px; padding: 10px; background-color: #f0f0f0; border-left: 4px solid #007bff; font-style: italic; color: #555; display: none; }
        .comment.show { display: block; }
        
        .card-bloco { border: 1px solid #ddd; border-radius: 6px; padding: 10px; background: #fff; margin-bottom: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        
        /* Diagn√≥stico e Erros */
        .error-diagnosis-section { margin-top: 50px; padding: 30px; background-color: #ffe0b2; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.15); display: none; text-align: center; font-size: 1.1em; color: #333; }
        .error-diagnosis-section h2 { color: #e65100; margin-bottom: 20px; font-size: 1.8em; }
        .error-diagnosis-section ul { list-style: none; padding: 0; margin: 0; }
        .error-diagnosis-section li { background-color: #ff9800; color: white; padding: 8px 15px; margin: 8px 0; border-radius: 5px; display: inline-block; margin-right: 10px; font-weight: bold; }
    </style>
</head>
<body>

    <div class="quiz-container" id="quiz-container">
        <h1>Com base na transcri√ß√£o do arquivo, que √© uma aul-18</h1>
        
        <div id="quiz"></div>
        
        <button class="submit-btn" id="verifyAnswersBtn">Verificar Respostas</button>
        <button class="generate-questions-btn submit-btn" id="generateNewQuestionsBtn" style="display:none;">Gerar Novas Perguntas</button>
        
        <div class="results card-bloco" id="results"></div>
        <div id="statusMessage" style="text-align: center; margin-top: 10px; font-weight: bold; color: #007bff;"></div>
        
        <div class="error-diagnosis-section card-bloco" id="errorDiagnosis">
            <h2>Diagn√≥stico de Erros</h2>
            <p>Parece que voc√™ precisa revisar os seguintes assuntos:</p>
            <ul id="topicsToReview"></ul>
        </div>
        
        <div class="generated-questions-section card-bloco" id="generatedQuestionsSection" style="display:none;">
            <h2>Novas Perguntas Geradas</h2>
            <div id="newQuestionsContent"></div>
        </div>
    </div>

<script>
    const quizContainer = document.getElementById("quiz");
    const resultsContainer = document.getElementById("results");
    const errorDiagnosisSection = document.getElementById("errorDiagnosis");
    const topicsToReviewList = document.getElementById("topicsToReview");
    const generateNewQuestionsBtn = document.getElementById("generateNewQuestionsBtn");
    const generatedQuestionsSection = document.getElementById("generatedQuestionsSection");
    const newQuestionsContent = document.getElementById("newQuestionsContent");
    const statusMessage = document.getElementById("statusMessage");

    let wrongQuestionIndices = [];
    let errorCountByTopic = {};  // CORRIGIDO: chaves duplas para objeto JS vazio
    let totalAnsweredQuestionsByTopic = {}; // CORRIGIDO
    let currentWrongQuestionIndex = -1;
    let hasErrors = false;

    // Inicializa display
    errorDiagnosisSection.style.display = 'none';
    topicsToReviewList.innerHTML = '';
    statusMessage.textContent = '';

    // AQUI entra a vari√°vel Python, ent√£o usamos chaves simples:
    const questions = [ {
  question: "Durante a gesta√ß√£o, a baixa imunidade fisiol√≥gica da m√£e √© um mecanismo importante para qual finalidade?",
  options: [
    "A) Proteger o feto contra infec√ß√µes maternas.",
    "B) Facilitar a implanta√ß√£o do embri√£o no √∫tero.",
    "C) Evitar a rejei√ß√£o imunol√≥gica do feto, que √© geneticamente distinto.",
    "D) Aumentar a circula√ß√£o sangu√≠nea placent√°ria para o feto."
  ],
  correctAnswer: "C) Evitar a rejei√ß√£o imunol√≥gica do feto, que √© geneticamente distinto.",
  comment: "A baixa imunidade fisiol√≥gica da m√£e √© crucial para prevenir que o sistema imunol√≥gico materno ataque o feto, que √© reconhecido como semi-alog√™nico.",
  topic: "Imunologia na Gesta√ß√£o"
},
{
  question: "Os erros no desenvolvimento embrion√°rio podem ser causados por quais categorias principais de fatores?",
  options: [
    "A) Apenas fatores intr√≠nsecos (gen√©ticos).",
    "B) Apenas fatores extr√≠nsecos (ambientais).",
    "C) Fatores intr√≠nsecos (gen√©ticos) e extr√≠nsecos (v√≠rus, bact√©rias, parasitas, inflama√ß√µes).",
    "D) Exclusivamente defici√™ncias nutricionais maternas."
  ],
  correctAnswer: "C) Fatores intr√≠nsecos (gen√©ticos) e extr√≠nsecos (v√≠rus, bact√©rias, parasitas, inflama√ß√µes).",
  comment: "O texto menciona que os erros podem ser tanto de origem gen√©tica quanto ambiental ou infecciosa.",
  topic: "Erros do Desenvolvimento Embrion√°rio"
},
{
  question: "No per√≠odo de suscetibilidade conhecido como 'Tudo ou Nada' (0 a 2/3 semanas), qual √© o desfecho comum se um erro grave ocorrer?",
  options: [
    "A) O embri√£o geralmente n√£o sobrevive (aborto espont√¢neo) ou o reparo √© total, sem sequelas.",
    "B) Ocorre sempre uma malforma√ß√£o cong√™nita grave e irrevers√≠vel.",
    "C) Apenas defeitos funcionais menores s√£o observados, sem aborto.",
    "D) O per√≠odo √© imune a quaisquer erros de desenvolvimento, garantindo a sobreviv√™ncia."
  ],
  correctAnswer: "A) O embri√£o geralmente n√£o sobrevive (aborto espont√¢neo) ou o reparo √© total, sem sequelas.",
  comment: "Este per√≠odo √© caracterizado por uma resposta bin√°ria: ou o embri√£o √© perdido, ou ele se recupera completamente se o dano n√£o for fatal.",
  topic: "Per√≠odos de Suscetibilidade Embrion√°ria"
},
{
  question: "Qual per√≠odo do desenvolvimento embrion√°rio √© mais associado √†s malforma√ß√µes cong√™nitas mais graves e estruturais, devido √† organog√™nese?",
  options: [
    "A) Per√≠odo de fecunda√ß√£o at√© a nida√ß√£o.",
    "B) Per√≠odo embrion√°rio (3¬™ a 8¬™ semana).",
    "C) Per√≠odo fetal (9¬™ semana at√© o nascimento).",
    "D) Per√≠odo neonatal imediato."
  ],
  correctAnswer: "B) Per√≠odo embrion√°rio (3¬™ a 8¬™ semana).",
  comment: "A organog√™nese, fase de forma√ß√£o dos √≥rg√£os, ocorre predominantemente no per√≠odo embrion√°rio, tornando-o o mais cr√≠tico para o desenvolvimento de malforma√ß√µes estruturais.",
  topic: "Organog√™nese e Malforma√ß√µes"
},
{
  question: "Durante o per√≠odo fetal (9¬™ semana at√© o nascimento), quais tipos de defeitos s√£o mais prov√°veis de ocorrer, em contraste com o per√≠odo embrion√°rio?",
  options: [
    "A) Malforma√ß√µes estruturais maiores e graves.",
    "B) Defeitos funcionais e altera√ß√µes menores.",
    "C) Abortos espont√¢neos impercept√≠veis.",
    "D) Problemas relacionados exclusivamente √† nida√ß√£o."
  ],
  correctAnswer: "B) Defeitos funcionais e altera√ß√µes menores.",
  comment: "No per√≠odo fetal, a maioria dos √≥rg√£os j√° est√° formada, diminuindo o risco de grandes malforma√ß√µes estruturais, mas ainda h√° risco de defeitos funcionais e altera√ß√µes de menor magnitude.",
  topic: "Desenvolvimento Fetal"
},
{
  question: "Qual √© a principal causa dos Defeitos do Tubo Neural (DTN), que ocorrem aproximadamente entre a 3¬™ e 4¬™ semana de gesta√ß√£o?",
  options: [
    "A) Falha no retorno das al√ßas intestinais para a cavidade abdominal.",
    "B) Falha no fechamento do tubo neural durante a neurula√ß√£o.",
    "C) Falha na forma√ß√£o do diafragma.",
    "D) Defeitos nos coxins endoc√°rdicos."
  ],
  correctAnswer: "B) Falha no fechamento do tubo neural durante a neurula√ß√£o.",
  comment: "Os DTN s√£o diretamente causados pela incapacidade do tubo neural de se fechar adequadamente durante as primeiras semanas de desenvolvimento.",
  topic: "Defeitos do Tubo Neural"
},
{
  question: "Qual o papel essencial do √°cido f√≥lico no desenvolvimento do tubo neural?",
  options: [
    "A) Aumentar a imunidade fisiol√≥gica da m√£e.",
    "B) Atuar como um 'cimento' para as c√©lulas do tubo neural, auxiliando no seu fechamento.",
    "C) Prevenir a n√£o-disjun√ß√£o mei√≥tica dos cromossomos.",
    "D) Proteger o feto contra infec√ß√µes virais."
  ],
  correctAnswer: "B) Atuar como um 'cimento' para as c√©lulas do tubo neural, auxiliando no seu fechamento.",
  comment: "O √°cido f√≥lico √© vital para o processo de neurula√ß√£o, ajudando na coes√£o e fechamento do tubo neural.",
  topic: "Nutri√ß√£o e Desenvolvimento Embrion√°rio"
},
{
  question: "A anencefalia √© um Defeito do Tubo Neural caracterizado pela falha no fechamento de qual por√ß√£o do tubo neural?",
  options: [
    "A) Por√ß√£o caudal (posterior).",
    "B) Por√ß√£o medial.",
    "C) Por√ß√£o cranial (anterior).",
    "D) Por√ß√£o lateral."
  ],
  correctAnswer: "C) Por√ß√£o cranial (anterior).",
  comment: "A anencefalia resulta da falha no fechamento da extremidade cranial do tubo neural, levando √† aus√™ncia ou desenvolvimento inadequado do enc√©falo e da calota craniana.",
  topic: "Anencefalia"
},
{
  question: "Qual √© o progn√≥stico t√≠pico para um feto diagnosticado com anencefalia?",
  options: [
    "A) Vida extrauterina longa com necessidade de cirurgias complexas.",
    "B) Desenvolvimento neurol√≥gico normal ap√≥s interven√ß√£o precoce.",
    "C) Incompatibilidade com a vida extrauterina a longo prazo ou morte neonatal precoce.",
    "D) Apenas defeitos funcionais leves que n√£o afetam a sobrevida."
  ],
  correctAnswer: "C) Incompatibilidade com a vida extrauterina a longo prazo ou morte neonatal precoce.",
  comment: "A anencefalia, por envolver a aus√™ncia de forma√ß√£o adequada do enc√©falo, √© considerada uma condi√ß√£o incompat√≠vel com a vida extrauterina prolongada.",
  topic: "Progn√≥stico de Malforma√ß√µes"
},
{
  question: "Qual √© a forma mais grave de Espinha B√≠fida, caracterizada pela hernia√ß√£o das meninges e da medula espinhal, podendo causar paralisia e problemas esfincterianos?",
  options: [
    "A) Espinha B√≠fida Oculta.",
    "B) Meningocele.",
    "C) Mielomeningocele.",
    "D) Encefalocele."
  ],
  correctAnswer: "C) Mielomeningocele.",
  comment: "A mielomeningocele √© a forma mais grave, com envolvimento direto do tecido neural, resultando em d√©ficits neurol√≥gicos significativos.",
  topic: "Espinha B√≠fida"
},
{
  question: "Na Espinha B√≠fida, qual condi√ß√£o se manifesta pela hernia√ß√£o das meninges (membranas) atrav√©s de uma falha √≥ssea, formando um cisto cheio de l√≠quido, mas sem o envolvimento da medula espinhal?",
  options: [
    "A) Espinha B√≠fida Oculta.",
    "B) Meningocele.",
    "C) Mielomeningocele.",
    "D) Holoprosencefalia."
  ],
  correctAnswer: "B) Meningocele.",
  comment: "A meningocele diferencia-se da mielomeningocele por n√£o incluir tecido neural no saco herniado, resultando em menor gravidade neurol√≥gica.",
  topic: "Classifica√ß√£o da Espinha B√≠fida"
},
{
  question: "Quais s√£o as sequelas neurol√≥gicas comuns da mielomeningocele, mesmo ap√≥s cirurgia corretiva?",
  options: [
    "A) Aumento da sensibilidade e hiperatividade muscular.",
    "B) Paralisia (paraplegia), perda de sensibilidade e problemas esfincterianos.",
    "C) Desenvolvimento neurol√≥gico normal e aus√™ncia de sequelas.",
    "D) Apenas dificuldades de fala e audi√ß√£o."
  ],
  correctAnswer: "B) Paralisia (paraplegia), perda de sensibilidade e problemas esfincterianos.",
  comment: "O envolvimento da medula espinhal na mielomeningocele leva a danos neurol√≥gicos permanentes que afetam a motricidade, sensibilidade e controle de esf√≠ncteres.",
  topic: "Manifesta√ß√µes Cl√≠nicas de DTN"
},
{
  question: "Qual condi√ß√£o se caracteriza pela hernia√ß√£o de tecido cerebral e meninges atrav√©s de um defeito no cr√¢nio?",
  options: [
    "A) Anencefalia.",
    "B) Mielomeningocele.",
    "C) Encefalocele.",
    "D) Hidrocefalia."
  ],
  correctAnswer: "C) Encefalocele.",
  comment: "A encefalocele √© um defeito na calota craniana que permite a protrus√£o de partes do c√©rebro e/ou meninges.",
  topic: "Defeitos Cranianos"
},
{
  question: "Qual a principal diferen√ßa entre Onfalocele e Gastrosquise em rela√ß√£o √† cobertura dos √≥rg√£os expostos?",
  options: [
    "A) Na onfalocele, os √≥rg√£os s√£o cobertos por pele; na gastrosquise, por uma membrana.",
    "B) Na onfalocele, os √≥rg√£os s√£o cobertos por uma membrana; na gastrosquise, ficam em contato direto com o l√≠quido amni√≥tico.",
    "C) Ambas as condi√ß√µes apresentam os √≥rg√£os diretamente expostos ao ambiente.",
    "D) Ambas as condi√ß√µes apresentam os √≥rg√£os cobertos por uma camada de pele intacta."
  ],
  correctAnswer: "B) Na onfalocele, os √≥rg√£os s√£o cobertos por uma membrana; na gastrosquise, ficam em contato direto com o l√≠quido amni√≥tico.",
  comment: "Essa √© a distin√ß√£o crucial entre as duas condi√ß√µes de defeito da parede abdominal, afetando o progn√≥stico e o tratamento.",
  topic: "Defeitos da Parede Abdominal"
},
{
  question: "A onfalocele est√° frequentemente associada a quais tipos de s√≠ndromes cromoss√¥micas?",
  options: [
    "A) S√≠ndrome de Turner e S√≠ndrome de Klinefelter.",
    "B) S√≠ndrome de Down e S√≠ndrome de Patau.",
    "C) Fibrose C√≠stica e Fenilceton√∫ria.",
    "D) S√≠ndrome de Cri-du-Chat e S√≠ndrome de Edwards."
  ],
  correctAnswer: "B) S√≠ndrome de Down e S√≠ndrome de Patau.",
  comment: "A onfalocele √© um marcador de risco para aneuploidias, sendo frequentemente observada em fetos com trissomias do 21 e 13.",
  topic: "Onfalocele e Aneuploidias"
},
{
  question: "Qual defeito da parede abdominal se caracteriza pela exposi√ß√£o das al√ßas intestinais ao l√≠quido amni√≥tico sem nenhuma membrana protetora, geralmente √† direita do umbigo?",
  options: [
    "A) Onfalocele.",
    "B) H√©rnia Umbilical.",
    "C) Gastrosquise.",
    "D) Ectopia Cordis."
  ],
  correctAnswer: "C) Gastrosquise.",
  comment: "A gastrosquise √© um defeito localizado na parede abdominal que permite a hernia√ß√£o das v√≠sceras sem cobertura peritoneal ou amni√≥tica.",
  topic: "Gastrosquise"
},
{
  question: "Devido ao contato direto das al√ßas intestinais com o l√≠quido amni√≥tico na gastrosquise, qual altera√ß√£o caracter√≠stica pode ser observada nos √≥rg√£os expostos?",
  options: [
    "A) As al√ßas intestinais permanecem inalteradas.",
    "B) As al√ßas intestinais apresentam inflama√ß√£o e espessamento.",
    "C) As al√ßas intestinais ficam cobertas por uma membrana grossa.",
    "D) As al√ßas intestinais s√£o reabsorvidas espontaneamente."
  ],
  correctAnswer: "B) As al√ßas intestinais apresentam inflama√ß√£o e espessamento.",
  comment: "A exposi√ß√£o prolongada ao l√≠quido amni√≥tico causa uma serosite qu√≠mica, resultando em inflama√ß√£o e espessamento das al√ßas intestinais, o que pode dificultar o tratamento cir√∫rgico.",
  topic: "Consequ√™ncias da Gastrosquise"
},
{
  question: "Qual √© uma caracter√≠stica comum da H√©rnia Umbilical em beb√™s, conforme descrito no texto?",
  options: [
    "A) √â sempre uma emerg√™ncia cir√∫rgica que exige interven√ß√£o imediata.",
    "B) √â coberta por pele e pode regredir espontaneamente conforme a musculatura abdominal se fortalece.",
    "C) Geralmente indica uma malforma√ß√£o cromoss√¥mica grave subjacente.",
    "D) Envolve a exposi√ß√£o direta das v√≠sceras abdominais."
  ],
  correctAnswer: "B) √â coberta por pele e pode regredir espontaneamente conforme a musculatura abdominal se fortalece.",
  comment: "A h√©rnia umbilical √© frequentemente fisiol√≥gica em beb√™s e tende a fechar-se sem interven√ß√£o na maioria dos casos.",
  topic: "H√©rnia Umbilical"
},
{
  question: "O que caracteriza a Ectopia Cordis?",
  options: [
    "A) Um defeito no cora√ß√£o que causa insufici√™ncia card√≠aca.",
    "B) O desenvolvimento do cora√ß√£o fora da cavidade tor√°cica, devido a falha no fechamento da parede tor√°cica.",
    "C) Um tumor card√≠aco cong√™nito.",
    "D) A presen√ßa de um cora√ß√£o extra no abd√¥men."
  ],
  correctAnswer: "B) O desenvolvimento do cora√ß√£o fora da cavidade tor√°cica, devido a falha no fechamento da parede tor√°cica.",
  comment: "A ectopia cordis √© uma malforma√ß√£o rara e grav√≠ssima onde o cora√ß√£o se desenvolve externamente ao corpo.",
  topic: "Malforma√ß√µes Card√≠acas Cong√™nitas"
},
{
  question: "Qual malforma√ß√£o cong√™nita se manifesta pela bexiga exposta e aberta para fora do corpo, devido a uma falha no fechamento da parede p√©lvica/abdominal inferior?",
  options: [
    "A) Onfalocele.",
    "B) Gastrosquise.",
    "C) H√©rnia Diafragm√°tica Cong√™nita.",
    "D) Extrofia de Bexiga."
  ],
  correctAnswer: "D) Extrofia de Bexiga.",
  comment: "A extrofia de bexiga √© um defeito complexo que exp√µe o √≥rg√£o urin√°rio ao exterior, muitas vezes associado a malforma√ß√µes genitais e p√©lvicas.",
  topic: "Defeitos da Parede P√©lvica"
},
{
  question: "Qual √© a principal consequ√™ncia da H√©rnia Diafragm√°tica Cong√™nita para o desenvolvimento pulmonar do feto?",
  options: [
    "A) Hiperplasia pulmonar.",
    "B) Obstru√ß√£o br√¥nquica.",
    "C) Hipoplasia pulmonar devido √† compress√£o dos pulm√µes pelo intestino.",
    "D) Ac√∫mulo de l√≠quido nos pulm√µes."
  ],
  correctAnswer: "C) Hipoplasia pulmonar devido √† compress√£o dos pulm√µes pelo intestino.",
  comment: "A presen√ßa de √≥rg√£os abdominais na cavidade tor√°cica impede o desenvolvimento normal dos pulm√µes, levando √† hipoplasia pulmonar e dificuldade respirat√≥ria grave ao nascimento.",
  topic: "H√©rnia Diafragm√°tica Cong√™nita"
},
{
  question: "De acordo com a Dra. Fl√°via, como o tempo em que um erro ocorre no desenvolvimento embrion√°rio se relaciona com a gravidade da malforma√ß√£o?",
  options: [
    "A) Quanto mais tarde o erro ocorre, mais severa e difusa ser√° a malforma√ß√£o.",
    "B) O tempo do erro n√£o tem influ√™ncia na gravidade da malforma√ß√£o.",
    "C) Quanto mais cedo o erro ocorre, mais severa e difusa ser√° a malforma√ß√£o, afetando m√∫ltiplos sistemas.",
    "D) Apenas erros no per√≠odo fetal causam malforma√ß√µes sist√™micas."
  ],
  correctAnswer: "C) Quanto mais cedo o erro ocorre, mais severa e difusa ser√° a malforma√ß√£o, afetando m√∫ltiplos sistemas.",
  comment: "Erros precoces, especialmente durante a organog√™nese, t√™m um impacto mais amplo no desenvolvimento, levando a malforma√ß√µes mais complexas e que afetam m√∫ltiplos sistemas.",
  topic: "Tempo e Gravidade das Malforma√ß√µes"
},
{
  question: "Qual √© a altera√ß√£o cromoss√¥mica espec√≠fica que causa a S√≠ndrome de Down?",
  options: [
    "A) Monossomia do cromossomo X.",
    "B) Trissomia do cromossomo 18.",
    "C) Trissomia do cromossomo 21.",
    "D) Dele√ß√£o do bra√ßo curto do cromossomo 5."
  ],
  correctAnswer: "C) Trissomia do cromossomo 21.",
  comment: "A S√≠ndrome de Down √© classicamente causada pela presen√ßa de uma c√≥pia extra do cromossomo 21.",
  topic: "Aneuploidias Autoss√¥micas"
},
{
  question: "Quais cardiopatias cong√™nitas s√£o frequentemente observadas em beb√™s com S√≠ndrome de Down?",
  options: [
    "A) Estenose a√≥rtica.",
    "B) Defeitos nos coxins endoc√°rdicos (como defeito do septo atrioventricular).",
    "C) Transposi√ß√£o das grandes art√©rias.",
    "D) Tetralogia de Fallot isolada."
  ],
  correctAnswer: "B) Defeitos nos coxins endoc√°rdicos (como defeito do septo atrioventricular).",
  comment: "Defeitos do septo atrioventricular e outros relacionados aos coxins endoc√°rdicos s√£o as anomalias card√≠acas mais comuns na S√≠ndrome de Down.",
  topic: "S√≠ndrome de Down e Cardiopatias"
},
{
  question: "Al√©m das caracter√≠sticas faciais, qual √© uma anomalia caracter√≠stica da m√£o em indiv√≠duos com S√≠ndrome de Down?",
  options: [
    "A) Polidactilia (dedos extras).",
    "B) M√£os em 'cadeira de balan√ßo'.",
    "C) Prega simiesca (prega palmar √∫nica).",
    "D) Dedos sobrepostos."
  ],
  correctAnswer: "C) Prega simiesca (prega palmar √∫nica).",
  comment: "A prega simiesca, ou prega palmar transversa √∫nica, √© um achado comum e caracter√≠stico na S√≠ndrome de Down.",
  topic: "S√≠ndrome de Down (Caracter√≠sticas F√≠sicas)"
},
{
  question: "Qual √© uma caracter√≠stica distintiva das m√£os em lactentes com S√≠ndrome de Edwards (Trissomia do 18)?",
  options: [
    "A) M√£os abertas com dedos longos e finos.",
    "B) M√£os fechadas com dedos sobrepostos (indicador sobre o m√©dio, m√≠nimo sobre o anelar).",
    "C) M√£os com prega simiesca.",
    "D) Aus√™ncia cong√™nita de um ou mais dedos."
  ],
  correctAnswer: "B) M√£os fechadas com dedos sobrepostos (indicador sobre o m√©dio, m√≠nimo sobre o anelar).",
  comment: "Esta posi√ß√£o peculiar dos dedos √© um sinal cl√≠nico importante da S√≠ndrome de Edwards.",
  topic: "S√≠ndrome de Edwards (Caracter√≠sticas F√≠sicas)"
},
{
  question: "Qual grave malforma√ß√£o cerebral, na qual o c√©rebro n√£o se divide em hemisf√©rios, √© caracter√≠stica da S√≠ndrome de Patau (Trissomia do 13)?",
  options: [
    "A) Microcefalia isolada.",
    "B) Anencefalia.",
    "C) Holoprosencefalia.",
    "D) Hidrocefalia."
  ],
  correctAnswer: "C) Holoprosencefalia.",
  comment: "A holoprosencefalia, um defeito grave na separa√ß√£o dos hemisf√©rios cerebrais, √© um achado comum e grave na S√≠ndrome de Patau.",
  topic: "S√≠ndrome de Patau (Malforma√ß√µes Neurol√≥gicas)"
},
{
  question: "Qual malforma√ß√£o facial √© frequentemente observada em casos de S√≠ndrome de Patau (Trissomia do 13)?",
  options: [
    "A) Micrognatia (queixo pequeno).",
    "B) Fenda labiopalatina bilateral grave.",
    "C) Filtro nasal plano.",
    "D) Olhos amendoados com prega epic√¢ntica."
  ],
  correctAnswer: "B) Fenda labiopalatina bilateral grave.",
  comment: "Defeitos na linha m√©dia, como fenda labiopalatina grave, s√£o caracter√≠sticos da S√≠ndrome de Patau.",
  topic: "S√≠ndrome de Patau (Caracter√≠sticas F√≠sicas)"
},
{
  question: "Qual √© a configura√ß√£o cromoss√¥mica da S√≠ndrome de Turner?",
  options: [
    "A) 47, XXY.",
    "B) 47, XXX.",
    "C) 45, X0.",
    "D) 46, XY."
  ],
  correctAnswer: "C) 45, X0.",
  comment: "A S√≠ndrome de Turner √© uma monossomia do cromossomo X, afetando apenas mulheres.",
  topic: "Aneuploidias dos Cromossomos Sexuais"
},
{
  question: "Qual caracter√≠stica end√≥crina √© comum em mulheres com S√≠ndrome de Turner, impactando a fertilidade?",
  options: [
    "A) Hipergonadismo e puberdade precoce.",
    "B) Fertilidade normal e ov√°rios funcionantes.",
    "C) Disgenesia gonadal (g√¥nadas em fita), levando √† infertilidade.",
    "D) Baixa estatura e ginecomastia."
  ],
  correctAnswer: "C) Disgenesia gonadal (g√¥nadas em fita), levando √† infertilidade.",
  comment: "A disgenesia gonadal resulta no desenvolvimento inadequado dos ov√°rios, causando infertilidade e falha da puberdade.",
  topic: "S√≠ndrome de Turner (Caracter√≠sticas Endocrinol√≥gicas)"
},
{
  question: "Qual √© um sintoma end√≥crino comum em homens com S√≠ndrome de Klinefelter?",
  options: [
    "A) Testosterona alta e hipertrofia testicular.",
    "B) Hipogonadismo (test√≠culos pequenos) e ginecomastia (desenvolvimento de mamas).",
    "C) Puberdade precoce e hiperfertilidade.",
    "D) Baixa estatura e aus√™ncia de ginecomastia."
  ],
  correctAnswer: "B) Hipogonadismo (test√≠culos pequenos) e ginecomastia (desenvolvimento de mamas).",
  comment: "A presen√ßa de um cromossomo X extra leva a um desequil√≠brio hormonal que resulta em hipogonadismo e, frequentemente, ginecomastia.",
  topic: "S√≠ndrome de Klinefelter (Caracter√≠sticas Endocrinol√≥gicas)"
},
{
  question: "A S√≠ndrome de Cri-du-Chat (Miado do Gato) √© causada por qual altera√ß√£o gen√©tica?",
  options: [
    "A) Trissomia do cromossomo 21.",
    "B) Monossomia do cromossomo X.",
    "C) Dele√ß√£o do bra√ßo curto do cromossomo 5.",
    "D) Transloca√ß√£o cromoss√¥mica envolvendo o cromossomo 13."
  ],
  correctAnswer: "C) Dele√ß√£o do bra√ßo curto do cromossomo 5.",
  comment: "Essa dele√ß√£o espec√≠fica √© respons√°vel pelas caracter√≠sticas cl√≠nicas da s√≠ndrome, incluindo o choro agudo caracter√≠stico.",
  topic: "Altera√ß√µes Cromoss√¥micas Estruturais"
},
{
  question: "Qual √© o principal problema fisiol√≥gico na Fibrose C√≠stica?",
  options: [
    "A) Ac√∫mulo do amino√°cido fenilalanina no corpo.",
    "B) Muta√ß√£o que afeta o transporte de √≠ons, gerando muco espesso nos pulm√µes e p√¢ncreas.",
    "C) Defeito na forma√ß√£o dos coxins endoc√°rdicos.",
    "D) Falha no fechamento do tubo neural."
  ],
  correctAnswer: "B) Muta√ß√£o que afeta o transporte de √≠ons, gerando muco espesso nos pulm√µes e p√¢ncreas.",
  comment: "A Fibrose C√≠stica √© uma doen√ßa monog√™nica que afeta as gl√¢ndulas ex√≥crinas, resultando na produ√ß√£o de muco anormalmente espesso.",
  topic: "Doen√ßas Monog√™nicas"
},
{
  question: "Como a Fenilceton√∫ria (PKU) √© tipicamente gerenciada para prevenir a defici√™ncia intelectual, de acordo com o texto?",
  options: [
    "A) Com cirurgia corretiva intrauterina.",
    "B) Atrav√©s da administra√ß√£o de altas doses de fenilalanina.",
    "C) Pela triagem no Teste do Pezinho e uma dieta restritiva em fenilalanina.",
    "D) Com terapia hormonal ao nascimento."
  ],
  correctAnswer: "C) Pela triagem no Teste do Pezinho e uma dieta restritiva em fenilalanina.",
  comment: "A detec√ß√£o precoce e a restri√ß√£o diet√©tica s√£o essenciais para evitar o ac√∫mulo t√≥xico de fenilalanina no sistema nervoso central.",
  topic: "Erros Inatos do Metabolismo"
},
{
  question: "De acordo com os princ√≠pios da Teratologia, quais s√£o os fatores-chave que determinam a gravidade de um defeito cong√™nito causado por um agente teratog√™nico?",
  options: [
    "A) Apenas a dose do agente e a idade da m√£e.",
    "B) Somente o gen√≥tipo materno.",
    "C) O gen√≥tipo (da m√£e e do feto), a dose do agente e o est√°gio do desenvolvimento no momento da exposi√ß√£o.",
    "D) Apenas o est√°gio de desenvolvimento no terceiro trimestre."
  ],
  correctAnswer: "C) O gen√≥tipo (da m√£e e do feto), a dose do agente e o est√°gio do desenvolvimento no momento da exposi√ß√£o.",
  comment: "A intera√ß√£o desses tr√™s fatores √© fundamental para determinar o impacto de um terat√≥geno no desenvolvimento fetal.",
  topic: "Princ√≠pios da Teratologia"
},
{
  question: "Qual caracter√≠stica facial √© tipicamente associada √† S√≠ndrome Alco√≥lica Fetal (SAF)?",
  options: [
    "A) Olhos amendoados e prega epic√¢ntica.",
    "B) Filtro nasal plano/apagado e l√°bio superior fino.",
    "C) Micrognatia severa e orelhas em formato de interroga√ß√£o.",
    "D) Fenda labiopalatina bilateral grave."
  ],
  correctAnswer: "B) Filtro nasal plano/apagado e l√°bio superior fino.",
  comment: "Estas s√£o caracter√≠sticas dism√≥rficas faciais cl√°ssicas observadas em crian√ßas com SAF, resultantes da exposi√ß√£o pr√©-natal ao √°lcool.",
  topic: "S√≠ndrome Alco√≥lica Fetal"
},
{
  question: "Qual malforma√ß√£o grave dos membros √© classicamente associada √† exposi√ß√£o √† Talidomida durante a gesta√ß√£o?",
  options: [
    "A) Polidactilia (dedos extras).",
    "B) Focomelia (m√£os/p√©s ligados diretamente ao tronco ou encurtamento severo).",
    "C) Artrogripose (contraturas articulares).",
    "D) P√©s em 'cadeira de balan√ßo'."
  ],
  correctAnswer: "B) Focomelia (m√£os/p√©s ligados diretamente ao tronco ou encurtamento severo).",
  comment: "A Talidomida √© um exemplo not√≥rio de terat√≥geno que causou defeitos de membros severos, como a focomelia.",
  topic: "Agentes Teratog√™nicos (Talidomida)"
},
{
  question: "Por que o uso de Isotretino√≠na (Roacutan) exige contracep√ß√£o rigorosa para mulheres em idade f√©rtil?",
  options: [
    "A) Para evitar efeitos colaterais leves do medicamento.",
    "B) Porque √© altamente teratog√™nico, causando defeitos graves craniofaciais, card√≠acos e no SNC.",
    "C) Para otimizar a absor√ß√£o e efic√°cia do tratamento da acne.",
    "D) Para prevenir o desenvolvimento de resist√™ncia bacteriana."
  ],
  correctAnswer: "B) Porque √© altamente teratog√™nico, causando defeitos graves craniofaciais, card√≠acos e no SNC.",
  comment: "A isotretino√≠na √© um terat√≥geno potente e seu uso √© contraindicado na gravidez devido ao alto risco de malforma√ß√µes cong√™nitas severas.",
  topic: "Teratog√™nese Medicamentosa"
},
{
  question: "Qual √© a tr√≠ade cl√°ssica de sintomas associada √† Toxoplasmose Cong√™nita?",
  options: [
    "A) Catarata, surdez e cardiopatia.",
    "B) Coriorretinite, hidrocefalia/microcefalia e calcifica√ß√µes intracranianas difusas.",
    "C) Dentes de Hutchinson, nariz em sela e t√≠bia em sabre.",
    "D) Microcefalia severa, artrogripose e danos oculares."
  ],
  correctAnswer: "B) Coriorretinite, hidrocefalia/microcefalia e calcifica√ß√µes intracranianas difusas.",
  comment: "Esta tr√≠ade representa os achados mais comuns e graves da infec√ß√£o cong√™nita por Toxoplasma gondii.",
  topic: "Infec√ß√µes TORCH (Toxoplasmose)"
},
{
  question: "Quais os tr√™s principais defeitos cong√™nitos que formam a tr√≠ade da Rub√©ola Cong√™nita?",
  options: [
    "A) Coriorretinite, hidrocefalia e calcifica√ß√µes intracranianas.",
    "B) Microcefalia, artrogripose e les√µes oculares (pelo Zika V√≠rus).",
    "C) Catarata/Glaucoma, surdez neurossensorial e cardiopatia (persist√™ncia do canal arterial).",
    "D) Dentes de Hutchinson, nariz em sela e hepatomegalia."
  ],
  correctAnswer: "C) Catarata/Glaucoma, surdez neurossensorial e cardiopatia (persist√™ncia do canal arterial).",
  comment: "A infec√ß√£o por Rub√©ola no in√≠cio da gesta√ß√£o pode levar a um conjunto espec√≠fico de malforma√ß√µes graves, conhecidas como a tr√≠ade da rub√©ola cong√™nita.",
  topic: "Infec√ß√µes TORCH (Rub√©ola)"
} ];

    function buildQuiz() {
        const output = [];
        questions.forEach((currentQuestion, questionNumber) => {
            const options = [];
            for (let i = 0; i < currentQuestion.options.length; i++) {
                // Note o uso de ${...} para template literals do JS dentro da f-string
                options.push(
                    `<label class="option" data-question="${questionNumber}" data-value="${currentQuestion.options[i]}">
                        <img src="tesouras.png" class="scissor-icon" onclick="event.stopPropagation(); this.parentNode.classList.toggle('struck-through');">
                        ${currentQuestion.options[i]}
                    </label>`
                );
            }
            output.push(
                `<div class="card" id="question-${questionNumber}" data-topic="${currentQuestion.topic}">
                    <div class="question">${currentQuestion.question}</div>
                    <div class="options">${options.join("")}</div>
                    <div class="comment" id="comment-${questionNumber}"></div>
                </div>`
            );
        });
        quizContainer.innerHTML = output.join("");
    }

    function showResults() {
        wrongQuestionIndices = [];
        errorCountByTopic = {};
        totalAnsweredQuestionsByTopic = {};
        currentWrongQuestionIndex = -1;
        hasErrors = false;
        errorDiagnosisSection.style.display = 'none';
        topicsToReviewList.innerHTML = '';
        statusMessage.textContent = '';

        const allQuestionCards = document.querySelectorAll('.quiz-container .card, #newQuestionsContent .card');
        let correctAnswersCount = 0;
        let totalQuestionsAnswered = 0;

        allQuestionCards.forEach((card, index) => {
            const questionEl = card.querySelector('.question') || card.querySelector('p');
            if (!questionEl) return;
            
            const questionText = questionEl.textContent.trim();
            const optionsContainer = card.querySelector('.options') || card;
            const allOptions = optionsContainer.querySelectorAll('.option, label.option, label');
            const userAnswerElement = optionsContainer.querySelector('.option.selected, label.selected');
            const commentDiv = card.querySelector('.comment');
            const questionTopic = card.dataset.topic || "T√≥pico n√£o informado";

            // Limpa classes
            allOptions.forEach(option => { option.classList.remove('correct', 'incorrect', 'selected'); });
            if (commentDiv) commentDiv.classList.remove('show');

            let correctAnswerValue = null;
            let questionComment = null;

            // L√≥gica para Est√°ticas vs Din√¢micas
            const isStatic = card.id && card.id.startsWith('question-');
            if (isStatic) {
                const questionData = questions.find(q => q.question.trim() === questionText);
                if (questionData) {
                    correctAnswerValue = questionData.correctAnswer.trim();
                    questionComment = questionData.comment;
                }
            } else {
                const correctOpt = optionsContainer.querySelector('.option[data-answer="true"], label[data-answer="true"]');
                if (correctOpt) correctAnswerValue = correctOpt.dataset.value?.trim() || correctOpt.textContent.trim();
                
                const commentElement = card.querySelector('.comment');
                if (commentElement && commentElement.textContent.trim()) questionComment = commentElement.textContent.trim();
            }

            // Verifica resposta
            let userAnswer = null;
            if (userAnswerElement) {
                userAnswerElement.classList.add('selected');
                userAnswer = userAnswerElement.dataset.value?.trim() || userAnswerElement.textContent.trim();
                totalQuestionsAnswered++;
                totalAnsweredQuestionsByTopic[questionTopic] = (totalAnsweredQuestionsByTopic[questionTopic] || 0) + 1;

                if (userAnswer === correctAnswerValue) {
                    correctAnswersCount++;
                } else {
                    hasErrors = true;
                    errorCountByTopic[questionTopic] = (errorCountByTopic[questionTopic] || 0) + 1;
                }
            }

            // Pinta as op√ß√µes
            allOptions.forEach(option => {
                const optionValue = option.dataset.value?.trim() || option.textContent.trim();
                if (optionValue === correctAnswerValue) option.classList.add('correct');
                if (userAnswer && optionValue === userAnswer && userAnswer !== correctAnswerValue) option.classList.add('incorrect');
            });

            if (commentDiv && questionComment) {
                commentDiv.textContent = questionComment;
                commentDiv.classList.add('show');
            }
        });

        resultsContainer.textContent = `Voc√™ acertou ${correctAnswersCount} de ${totalQuestionsAnswered} quest√µes respondidas.`;

        // Diagn√≥stico
        if (hasErrors) {
            for (const topic in errorCountByTopic) {
                const errors = errorCountByTopic[topic];
                const total = totalAnsweredQuestionsByTopic[topic] || 0;
                if (total > 0) {
                    const percent = ((errors / total) * 100).toFixed(1);
                    const li = document.createElement('li');
                    li.textContent = `${topic}: ${percent}% de erros (${errors} de ${total} quest√µes)`;
                    topicsToReviewList.appendChild(li);
                }
            }
            errorDiagnosisSection.style.display = 'block';
            generatedQuestionsSection.style.display = 'block';
            generateNewQuestionsBtn.style.display = 'block';
            errorDiagnosisSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        } else {
            const li = document.createElement('li');
            li.textContent = "ü•≥ Parab√©ns! Voc√™ n√£o teve erros nas quest√µes respondidas.";
            topicsToReviewList.appendChild(li);
        }
    }

    // Listeners
    document.addEventListener("click", function (event) {
        const clickedElement = event.target;
        const optionElement = clickedElement.closest('.option');
        if (optionElement) {
            if (clickedElement.classList.contains("scissor-icon")) {
                event.stopPropagation();
                optionElement.classList.toggle("struck-through");
            } else {
                const parentCard = optionElement.closest('.card');
                const currentQuestionOptions = parentCard.querySelectorAll('.option');
                currentQuestionOptions.forEach(opt => opt.classList.remove("selected"));
                optionElement.classList.add("selected");
            }
        }
    });

    generateNewQuestionsBtn.addEventListener("click", async function() {
        statusMessage.textContent = '‚è≥ Gerando novas perguntas...';
        generateNewQuestionsBtn.disabled = true;
        
        const topics = Object.keys(errorCountByTopic).filter(topic => {
            const errorsInTopic = errorCountByTopic[topic] || 0;
            const totalAnsweredInTopic = totalAnsweredQuestionsByTopic[topic] || 0;
            return errorsInTopic > 0 && totalAnsweredInTopic > 0;
        });
        
        const topicsToSend = topics.length > 0 ? topics : ["fisiologia celular", "biologia"];

        try {
            const response = await fetch('https://www.quizia.xyz/quiz', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ topicos: topicsToSend }),
            });

            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
            
            const data = await response.json();
            newQuestionsContent.innerHTML = '';

            if (data && data.html) {
                newQuestionsContent.innerHTML = data.html.replace(/```html|```/g, '');
                
                newQuestionsContent.querySelectorAll('.card').forEach((card) => {
                    // L√≥gica de limpeza e adi√ß√£o de tesouras (mantida igual)
                    const questionElement = card.querySelector('p');
                    if (questionElement && !questionElement.classList.contains('question')) questionElement.classList.add('question');
                    
                    card.querySelectorAll('label').forEach((label) => {
                        const radioInput = label.querySelector('input[type="radio"]');
                        if (radioInput) {
                            if (radioInput.hasAttribute('data-answer')) label.setAttribute('data-answer', radioInput.getAttribute('data-answer'));
                            radioInput.remove();
                        }
                        if (!label.classList.contains('option')) label.classList.add('option');
                        if (!label.dataset.value) label.dataset.value = label.textContent.trim();
                        if (!label.querySelector('.scissor-icon')) {
                            const scissorIcon = document.createElement('img');
                            scissorIcon.src = 'tesouras.png';
                            scissorIcon.className = 'scissor-icon';
                            scissorIcon.onclick = function(e) { e.stopPropagation(); label.classList.toggle('struck-through'); };
                            label.insertBefore(scissorIcon, label.firstChild);
                        }
                    });
                });
            } else {
                newQuestionsContent.innerHTML = "<p>N√£o foi poss√≠vel gerar novas perguntas.</p>";
            }
            
            generatedQuestionsSection.style.display = 'block';
            generatedQuestionsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            statusMessage.textContent = '‚úÖ Perguntas geradas com sucesso!';
            setTimeout(() => { statusMessage.textContent = '' }, 3000);
            
        } catch (error) {
            console.error('Erro:', error);
            statusMessage.textContent = '‚ùå Erro: ' + error.message;
            setTimeout(() => { statusMessage.textContent = '' }, 5000);
        } finally {
            generateNewQuestionsBtn.disabled = false;
        }
    });

    buildQuiz();
    document.getElementById("verifyAnswersBtn").addEventListener("click", showResults);
</script>
</body>
</html>
