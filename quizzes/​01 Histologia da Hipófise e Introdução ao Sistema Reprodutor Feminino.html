
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚Äã01 Histologia da Hip√≥fise e Introdu√ß√£o ao Sistema Reprodutor Feminino</title>
    <style>
        body { font-family: sans-serif; margin: 0; padding: 20px; display: flex; justify-content: center; align-items: flex-start; min-height: 100vh; background-color: #f4f4f4; }
        .quiz-container { max-width: 800px; width: 100%; }
        h1 { color: #333; text-align: center; margin-bottom: 30px; }
        .card { background-color: white; border-radius: 8px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); }
        .question { font-weight: bold; margin-bottom: 10px; color: #333; }
        .options { margin-top: 15px; }
        
        /* Estilos das op√ß√µes */
        .option, label.option, label, #newQuestionsContent label { display: flex; align-items: center; margin-bottom: 10px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; cursor: pointer; transition: background-color 0.2s ease; position: relative; }
        
        /* Ocultar Radio inputs */
        .option input[type="radio"], label input[type="radio"], #newQuestionsContent input[type="radio"], #newQuestionsContent label input[type="radio"] { display: none !important; visibility: hidden !important; opacity: 0 !important; position: absolute !important; left: -9999px !important; }
        
        .option:hover, label.option:hover, label:hover, #newQuestionsContent label:hover { background-color: #e9e9e9; }
        .option.selected, label.option.selected, label.selected, #newQuestionsContent label.selected { background-color: #d1e7dd; border-color: #28a745; }
        .option.correct, label.option.correct, label.correct, #newQuestionsContent label.correct { background-color: #d4edda; border-color: #28a745; }
        .option.incorrect, label.option.incorrect, label.incorrect, #newQuestionsContent label.incorrect { background-color: #f8d7da; border-color: #dc3545; }
        
        .submit-btn { display: block; width: 100%; padding: 15px; background-color: #007bff; color: white; border: none; border-radius: 5px; font-size: 18px; cursor: pointer; transition: background-color 0.3s ease; margin-top: 30px; }
        .submit-btn:hover { background-color: #0056b3; }
        
        .results { text-align: center; margin-top: 30px; font-size: 20px; font-weight: bold; color: #333; }
        .scissor-icon { margin-right: 10px; width: 20px; height: 20px; opacity: 0.5; cursor: pointer; }
        .scissor-icon.hidden { display: none; }
        .struck-through { text-decoration: line-through; color: #888; }
        
        .comment { margin-top: 10px; padding: 10px; background-color: #f0f0f0; border-left: 4px solid #007bff; font-style: italic; color: #555; display: none; }
        .comment.show { display: block; }
        
        .card-bloco { border: 1px solid #ddd; border-radius: 6px; padding: 10px; background: #fff; margin-bottom: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        
        /* Diagn√≥stico e Erros */
        .error-diagnosis-section { margin-top: 50px; padding: 30px; background-color: #ffe0b2; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.15); display: none; text-align: center; font-size: 1.1em; color: #333; }
        .error-diagnosis-section h2 { color: #e65100; margin-bottom: 20px; font-size: 1.8em; }
        .error-diagnosis-section ul { list-style: none; padding: 0; margin: 0; }
        .error-diagnosis-section li { background-color: #ff9800; color: white; padding: 8px 15px; margin: 8px 0; border-radius: 5px; display: inline-block; margin-right: 10px; font-weight: bold; }
    </style>
</head>
<body>

    <div class="quiz-container" id="quiz-container">
        <h1>‚Äã01 Histologia da Hip√≥fise e Introdu√ß√£o ao Sistema Reprodutor Feminino</h1>
        
        <div id="quiz"></div>
        
        <button class="submit-btn" id="verifyAnswersBtn">Verificar Respostas</button>
        <button class="generate-questions-btn submit-btn" id="generateNewQuestionsBtn" style="display:none;">Gerar Novas Perguntas</button>
        
        <div class="results card-bloco" id="results"></div>
        <div id="statusMessage" style="text-align: center; margin-top: 10px; font-weight: bold; color: #007bff;"></div>
        
        <div class="error-diagnosis-section card-bloco" id="errorDiagnosis">
            <h2>Diagn√≥stico de Erros</h2>
            <p>Parece que voc√™ precisa revisar os seguintes assuntos:</p>
            <ul id="topicsToReview"></ul>
        </div>
        
        <div class="generated-questions-section card-bloco" id="generatedQuestionsSection" style="display:none;">
            <h2>Novas Perguntas Geradas</h2>
            <div id="newQuestionsContent"></div>
        </div>
    </div>

<script>
    const quizContainer = document.getElementById("quiz");
    const resultsContainer = document.getElementById("results");
    const errorDiagnosisSection = document.getElementById("errorDiagnosis");
    const topicsToReviewList = document.getElementById("topicsToReview");
    const generateNewQuestionsBtn = document.getElementById("generateNewQuestionsBtn");
    const generatedQuestionsSection = document.getElementById("generatedQuestionsSection");
    const newQuestionsContent = document.getElementById("newQuestionsContent");
    const statusMessage = document.getElementById("statusMessage");

    let wrongQuestionIndices = [];
    let errorCountByTopic = {};  // CORRIGIDO: chaves duplas para objeto JS vazio
    let totalAnsweredQuestionsByTopic = {}; // CORRIGIDO
    let currentWrongQuestionIndex = -1;
    let hasErrors = false;

    // Inicializa display
    errorDiagnosisSection.style.display = 'none';
    topicsToReviewList.innerHTML = '';
    statusMessage.textContent = '';

    // AQUI entra a vari√°vel Python, ent√£o usamos chaves simples:
    const questions = [ {
  question: "Qual o outro nome da hip√≥fise e sua localiza√ß√£o principal?",
  options: [
    "A) Gl√¢ndula pineal, no cerebelo",
    "B) Gl√¢ndula pituit√°ria, na sela turca do osso esfenoide",
    "C) Gl√¢ndula tireoide, no pesco√ßo",
    "D) Gl√¢ndula adrenal, sobre os rins"
  ],
  correctAnswer: "B) Gl√¢ndula pituit√°ria, na sela turca do osso esfenoide",
  comment: "A hip√≥fise √© tamb√©m conhecida como gl√¢ndula pituit√°ria e est√° localizada na sela turca do osso esfenoide.",
  topic: "Anatomia e Introdu√ß√£o √† Hip√≥fise"
},
{
  question: "Por que a hip√≥fise √© conhecida como a 'gl√¢ndula mestra'?",
  options: [
    "A) Por ser a maior gl√¢ndula do corpo humano.",
    "B) Por produzir horm√¥nios que controlam a secre√ß√£o de outras gl√¢ndulas end√≥crinas.",
    "C) Por ser a primeira gl√¢ndula a se desenvolver no embri√£o.",
    "D) Por sua localiza√ß√£o central no sistema nervoso."
  ],
  correctAnswer: "B) Por produzir horm√¥nios que controlam a secre√ß√£o de outras gl√¢ndulas end√≥crinas.",
  comment: "A hip√≥fise recebe o t√≠tulo de 'gl√¢ndula mestra' porque produz horm√¥nios que regulam a fun√ß√£o de outras gl√¢ndulas end√≥crinas, como tireoide e adrenais.",
  topic: "Fun√ß√£o Geral da Hip√≥fise"
},
{
  question: "A adenohip√≥fise (lobo anterior) tem origem embrion√°ria a partir de qual estrutura?",
  options: [
    "A) Neuroectoderma",
    "B) Mesoderma",
    "C) Ectoderma oral (Bolsa de Rathke)",
    "D) Endoderma"
  ],
  correctAnswer: "C) Ectoderma oral (Bolsa de Rathke)",
  comment: "A adenohip√≥fise, ou lobo anterior da hip√≥fise, origina-se do ectoderma oral, especificamente da Bolsa de Rathke.",
  topic: "Embriologia da Hip√≥fise"
},
{
  question: "Qual a origem embrion√°ria da neurohip√≥fise (lobo posterior)?",
  options: [
    "A) Ectoderma oral",
    "B) Neuroectoderma",
    "C) Mesoderma",
    "D) Endoderma"
  ],
  correctAnswer: "B) Neuroectoderma",
  comment: "A neurohip√≥fise tem origem no neuroectoderma, fazendo parte do sistema nervoso.",
  topic: "Embriologia da Hip√≥fise"
},
{
  question: "Qual o tipo de tecido que comp√µe a adenohip√≥fise?",
  options: [
    "A) Tecido nervoso secretor",
    "B) Tecido muscular liso",
    "C) Tecido epitelial glandular",
    "D) Tecido conjuntivo denso"
  ],
  correctAnswer: "C) Tecido epitelial glandular",
  comment: "A adenohip√≥fise √© composta por tecido epitelial glandular, respons√°vel pela produ√ß√£o, armazenamento e libera√ß√£o de horm√¥nios.",
  topic: "Histologia da Adenohip√≥fise"
},
{
  question: "A neurohip√≥fise √© composta por qual tipo de tecido?",
  options: [
    "A) Tecido epitelial estratificado",
    "B) Tecido muscular estriado",
    "C) Tecido nervoso secretor",
    "D) Tecido conjuntivo frouxo"
  ],
  correctAnswer: "C) Tecido nervoso secretor",
  comment: "A neurohip√≥fise √© composta por tecido nervoso secretor, uma extens√£o do sistema nervoso.",
  topic: "Histologia da Neurohip√≥fise"
},
{
  question: "Qual a principal fun√ß√£o da adenohip√≥fise em rela√ß√£o aos horm√¥nios?",
  options: [
    "A) Apenas armazenar horm√¥nios produzidos pelo hipot√°lamo.",
    "B) Produzir, armazenar e liberar seus pr√≥prios horm√¥nios.",
    "C) Produzir horm√¥nios apenas para o sistema nervoso.",
    "D) Regular a press√£o arterial diretamente."
  ],
  correctAnswer: "B) Produzir, armazenar e liberar seus pr√≥prios horm√¥nios.",
  comment: "A adenohip√≥fise tem a capacidade de produzir, armazenar e liberar seus pr√≥prios horm√¥nios na corrente sangu√≠nea mediante est√≠mulo.",
  topic: "Fun√ß√£o da Adenohip√≥fise"
},
{
  question: "De que forma a neurohip√≥fise se diferencia da adenohip√≥fise quanto √† produ√ß√£o hormonal?",
  options: [
    "A) A neurohip√≥fise sintetiza a maioria dos horm√¥nios do corpo.",
    "B) A neurohip√≥fise n√£o sintetiza horm√¥nios pr√≥prios; armazena e libera subst√¢ncias do hipot√°lamo.",
    "C) A neurohip√≥fise apenas produz horm√¥nios sexuais.",
    "D) A neurohip√≥fise produz horm√¥nios que controlam a tireoide."
  ],
  correctAnswer: "B) A neurohip√≥fise n√£o sintetiza horm√¥nios pr√≥prios; armazena e libera subst√¢ncias do hipot√°lamo.",
  comment: "Diferente da adenohip√≥fise, a neurohip√≥fise n√£o sintetiza horm√¥nios pr√≥prios, mas armazena e libera horm√¥nios produzidos por neur√¥nios do hipot√°lamo.",
  topic: "Fun√ß√£o da Neurohip√≥fise"
},
{
  question: "Qual √© a maior parte da adenohip√≥fise e a principal respons√°vel pela produ√ß√£o hormonal?",
  options: [
    "A) Pars Intermedia",
    "B) Pars Tuberalis",
    "C) Pars Nervosa",
    "D) Pars Distalis"
  ],
  correctAnswer: "D) Pars Distalis",
  comment: "A Pars Distalis √© a maior parte da adenohip√≥fise e a principal respons√°vel pela produ√ß√£o hormonal.",
  topic: "Anatomia da Adenohip√≥fise"
},
{
  question: "Qual estrutura conecta a hip√≥fise ao hipot√°lamo?",
  options: [
    "A) Sela turca",
    "B) C√°psula de tecido conjuntivo",
    "C) Haste infundibular",
    "D) Pars Intermedia"
  ],
  correctAnswer: "C) Haste infundibular",
  comment: "O infund√≠bulo, ou haste infundibular, √© a estrutura que conecta a gl√¢ndula hip√≥fise ao hipot√°lamo.",
  topic: "Anatomia da Hip√≥fise"
},
{
  question: "O sistema porta-hipofis√°rio √© crucial para a hip√≥fise por qual raz√£o?",
  options: [
    "A) Transportar oxig√™nio para a gl√¢ndula.",
    "B) Conectar o hipot√°lamo √† adenohip√≥fise, permitindo controle hormonal direto.",
    "C) Drenar res√≠duos metab√≥licos da neurohip√≥fise.",
    "D) Isolar a hip√≥fise do restante do sistema circulat√≥rio."
  ],
  correctAnswer: "B) Conectar o hipot√°lamo √† adenohip√≥fise, permitindo controle hormonal direto.",
  comment: "O sistema porta-hipofis√°rio √© uma rede de capilares que conecta o hipot√°lamo √† adenohip√≥fise, permitindo que horm√¥nios hipotal√¢micos cheguem diretamente √†s c√©lulas secretoras.",
  topic: "Vasculariza√ß√£o da Hip√≥fise"
},
{
  question: "Como o hipot√°lamo controla a adenohip√≥fise?",
  options: [
    "A) Atrav√©s de impulsos nervosos diretos para as c√©lulas glandulares.",
    "B) Liberando horm√¥nios (liberadores ou inibidores) no sistema porta que atingem a Pars Distalis.",
    "C) Produzindo horm√¥nios dentro da pr√≥pria adenohip√≥fise.",
    "D) Estimulando a neurohip√≥fise a liberar seus horm√¥nios."
  ],
  correctAnswer: "B) Liberando horm√¥nios (liberadores ou inibidores) no sistema porta que atingem a Pars Distalis.",
  comment: "Neur√¥nios hipotal√¢micos liberam neurotransmissores (atuando como horm√¥nios liberadores ou inibidores) no sistema porta, que atingem a Pars Distalis da adenohip√≥fise.",
  topic: "Controle Hipotal√¢mico"
},
{
  question: "Qual a diferen√ßa no mecanismo de controle hipotal√¢mico entre a adenohip√≥fise e a neurohip√≥fise?",
  options: [
    "A) Ambos s√£o controlados da mesma forma por horm√¥nios liberadores.",
    "B) Na neurohip√≥fise, os corpos celulares dos neur√¥nios est√£o no hipot√°lamo, mas seus ax√¥nios liberam horm√¥nios diretamente na neurohip√≥fise.",
    "C) A adenohip√≥fise recebe ax√¥nios diretamente do hipot√°lamo, enquanto a neurohip√≥fise recebe horm√¥nios via sistema porta.",
    "D) A adenohip√≥fise √© controlada por feedback positivo, e a neurohip√≥fise por feedback negativo."
  ],
  correctAnswer: "B) Na neurohip√≥fise, os corpos celulares dos neur√¥nios est√£o no hipot√°lamo, mas seus ax√¥nios liberam horm√¥nios diretamente na neurohip√≥fise.",
  comment: "Na neurohip√≥fise, os corpos celulares dos neur√¥nios est√£o no hipot√°lamo, mas seus ax√¥nios descem at√© a neurohip√≥fise, onde liberam os horm√¥nios diretamente nos capilares.",
  topic: "Controle Hipotal√¢mico"
},
{
  question: "O que √© o feedback negativo no controle hormonal da hip√≥fise?",
  options: [
    "A) A inibi√ß√£o da secre√ß√£o hipofis√°ria quando os horm√¥nios da gl√¢ndula-alvo est√£o baixos.",
    "B) A estimula√ß√£o da secre√ß√£o hipofis√°ria por altos n√≠veis de horm√¥nios da gl√¢ndula-alvo.",
    "C) A inibi√ß√£o da secre√ß√£o hipofis√°ria quando os horm√¥nios da gl√¢ndula-alvo est√£o altos, mantendo a homeostase.",
    "D) O processo onde o hipot√°lamo sempre estimula a hip√≥fise independentemente dos n√≠veis hormonais."
  ],
  correctAnswer: "C) A inibi√ß√£o da secre√ß√£o hipofis√°ria quando os horm√¥nios da gl√¢ndula-alvo est√£o altos, mantendo a homeostase.",
  comment: "O feedback negativo ocorre quando o aumento dos horm√¥nios das gl√¢ndulas-alvo no sangue inibe a secre√ß√£o hipofis√°ria para manter o equil√≠brio (homeostase).",
  topic: "Regula√ß√£o Hormonal"
},
{
  question: "Como as c√©lulas da Pars Distalis da adenohip√≥fise se organizam histologicamente?",
  options: [
    "A) Em camadas conc√™ntricas com uma cavidade central.",
    "B) Em cord√µes celulares rodeados por capilares fenestrados.",
    "C) Como um epit√©lio pavimentoso estratificado.",
    "D) Em t√∫bulos com l√∫men amplo."
  ],
  correctAnswer: "B) Em cord√µes celulares rodeados por capilares fenestrados.",
  comment: "Ao microsc√≥pio, as c√©lulas da Pars Distalis se organizam em cord√µes celulares rodeados por capilares fenestrados.",
  topic: "Histologia da Pars Distalis"
},
{
  question: "As c√©lulas crom√≥fobas da Pars Distalis s√£o caracterizadas por:",
  options: [
    "A) Citoplasma rosa e afinidade pela eosina.",
    "B) Citoplasma p√°lido/claro e poucos gr√¢nulos, com pouca afinidade por corantes.",
    "C) Citoplasma roxo/azulado e afinidade pela hematoxilina.",
    "D) Alta concentra√ß√£o de gr√¢nulos basof√≠licos."
  ],
  correctAnswer: "B) Citoplasma p√°lido/claro e poucos gr√°nulos, com pouca afinidade por corantes.",
  comment: "Crom√≥fobas t√™m 'fobia' a cor, possuem citoplasma p√°lido/claro e poucos gr√¢nulos, sendo consideradas c√©lulas que j√° liberaram sua secre√ß√£o ou c√©lulas-tronco.",
  topic: "Classifica√ß√£o Histol√≥gica da Adenohip√≥fise"
},
{
  question: "Quais s√£o as caracter√≠sticas das c√©lulas crom√≥filas acid√≥filas da Pars Distalis?",
  options: [
    "A) Citoplasma roxo/azulado e afinidade pela hematoxilina.",
    "B) Citoplasma p√°lido e poucos gr√¢nulos.",
    "C) Citoplasma rosa e afinidade pela eosina, geralmente secretam prote√≠nas.",
    "D) Aus√™ncia de gr√¢nulos secretores."
  ],
  correctAnswer: "C) Citoplasma rosa e afinidade pela eosina, geralmente secretam prote√≠nas.",
  comment: "As crom√≥filas acid√≥filas t√™m afinidade pela eosina (corante √°cido), apresentando citoplasma rosa e geralmente secretam prote√≠nas.",
  topic: "Classifica√ß√£o Histol√≥gica da Adenohip√≥fise"
},
{
  question: "As c√©lulas crom√≥filas bas√≥filas da Pars Distalis geralmente secretam qual tipo de subst√¢ncia?",
  options: [
    "A) Lip√≠dios",
    "B) Prote√≠nas",
    "C) Glicoprote√≠nas",
    "D) √çons de c√°lcio"
  ],
  correctAnswer: "C) Glicoprote√≠nas",
  comment: "As crom√≥filas bas√≥filas t√™m afinidade pela hematoxilina (corante b√°sico), apresentando citoplasma roxo/azulado e geralmente secretam glicoprote√≠nas.",
  topic: "Classifica√ß√£o Histol√≥gica da Adenohip√≥fise"
},
{
  question: "Qual tipo de c√©lula secretora na Pars Distalis produz o Horm√¥nio do Crescimento (GH)?",
  options: [
    "A) Lactotr√≥ficas",
    "B) Corticotr√≥ficas",
    "C) Somatotr√≥ficas",
    "D) Gonadotr√≥ficas"
  ],
  correctAnswer: "C) Somatotr√≥ficas",
  comment: "As c√©lulas somatotr√≥ficas s√£o respons√°veis pela produ√ß√£o do Horm√¥nio do Crescimento (GH).",
  topic: "Tipos Celulares da Adenohip√≥fise"
},
{
  question: "As c√©lulas lactotr√≥ficas da Pars Distalis produzem qual horm√¥nio?",
  options: [
    "A) TSH",
    "B) ACTH",
    "C) Prolactina",
    "D) FSH"
  ],
  correctAnswer: "C) Prolactina",
  comment: "As c√©lulas lactotr√≥ficas produzem Prolactina, essencial para a produ√ß√£o de leite.",
  topic: "Tipos Celulares da Adenohip√≥fise"
},
{
  question: "Qual tipo celular da Pars Distalis √© respons√°vel pela produ√ß√£o de ACTH?",
  options: [
    "A) Tireotr√≥ficas",
    "B) Corticotr√≥ficas",
    "C) Somatotr√≥ficas",
    "D) Gonadotr√≥ficas"
  ],
  correctAnswer: "B) Corticotr√≥ficas",
  comment: "As c√©lulas corticotr√≥ficas produzem ACTH (Horm√¥nio Adrenocorticotr√≥fico), que estimula o c√≥rtex da adrenal a liberar cortisol.",
  topic: "Tipos Celulares da Adenohip√≥fise"
},
{
  question: "Os horm√¥nios FSH e LH, essenciais para o ciclo reprodutivo, s√£o produzidos por quais c√©lulas da Pars Distalis?",
  options: [
    "A) Lactotr√≥ficas",
    "B) Tireotr√≥ficas",
    "C) Corticotr√≥ficas",
    "D) Gonadotr√≥ficas"
  ],
  correctAnswer: "D) Gonadotr√≥ficas",
  comment: "As c√©lulas gonadotr√≥ficas produzem FSH (Fol√≠culo Estimulante) e LH (Luteinizante), horm√¥nios cruciais para o ciclo reprodutivo.",
  topic: "Tipos Celulares da Adenohip√≥fise"
},
{
  question: "Qual horm√¥nio √© produzido pelas c√©lulas tireotr√≥ficas da Pars Distalis?",
  options: [
    "A) GH",
    "B) Prolactina",
    "C) TSH",
    "D) ACTH"
  ],
  correctAnswer: "C) TSH",
  comment: "As c√©lulas tireotr√≥ficas produzem TSH (Horm√¥nio Estimulante da Tireoide).",
  topic: "Tipos Celulares da Adenohip√≥fise"
},
{
  question: "Qual subst√¢ncia atua como um inibidor da prolactina?",
  options: [
    "A) Serotonina",
    "B) Adrenalina",
    "C) Dopamina",
    "D) Acetilcolina"
  ],
  correctAnswer: "C) Dopamina",
  comment: "A dopamina atua como um inibidor da prolactina, regulando sua secre√ß√£o.",
  topic: "Regula√ß√£o da Prolactina"
},
{
  question: "O que pode ocorrer se houver um bloqueio da dopamina no organismo, em rela√ß√£o √† prolactina?",
  options: [
    "A) Diminui√ß√£o da produ√ß√£o de leite.",
    "B) Aumento da secre√ß√£o de prolactina, levando √† galactorreia ou ginecomastia.",
    "C) Redu√ß√£o do crescimento.",
    "D) Hipotireoidismo."
  ],
  correctAnswer: "B) Aumento da secre√ß√£o de prolactina, levando √† galactorreia ou ginecomastia.",
  comment: "Medicamentos ou condi√ß√µes que bloqueiam a dopamina podem levar √† galactorreia (produ√ß√£o indevida de leite) ou ginecomastia, pois o 'freio' da prolactina √© removido.",
  topic: "Regula√ß√£o da Prolactina"
},
{
  question: "Como √© o padr√£o de secre√ß√£o hormonal da hip√≥fise?",
  options: [
    "A) Constante ao longo do dia.",
    "B) Puls√°til e obedecendo ao ritmo circadiano.",
    "C) Apenas estimulada por estresse.",
    "D) Inconstante e sem padr√£o definido."
  ],
  correctAnswer: "B) Puls√°til e obedecendo ao ritmo circadiano.",
  comment: "A secre√ß√£o hormonal n√£o √© constante, mas sim puls√°til e obedece ao ritmo circadiano (sono/vig√≠lia).",
  topic: "Padr√£o de Secre√ß√£o Hormonal"
},
{
  question: "Qual √© a caracter√≠stica histol√≥gica marcante da Pars Intermedia da hip√≥fise?",
  options: [
    "A) Alta densidade de c√©lulas acid√≥filas.",
    "B) Presen√ßa de fol√≠culos contendo coloide (subst√¢ncia eosinof√≠lica gelatinosa).",
    "C) Predomin√¢ncia de ax√¥nios amiel√≠nicos.",
    "D) Aus√™ncia total de c√©lulas secretoras."
  ],
  correctAnswer: "B) Presen√ßa de fol√≠culos contendo coloide (subst√¢ncia eosinof√≠lica gelatinosa).",
  comment: "A Pars Intermedia √© caracterizada pela presen√ßa de fol√≠culos contendo coloide (subst√¢ncia eosinof√≠lica gelatinosa).",
  topic: "Histologia da Pars Intermedia"
},
{
  question: "Em humanos adultos, a Pars Intermedia √© uma regi√£o pouco desenvolvida e produz qual horm√¥nio?",
  options: [
    "A) GH",
    "B) ACTH",
    "C) MSH (Horm√¥nio Estimulante de Melan√≥citos)",
    "D) Prolactina"
  ],
  correctAnswer: "C) MSH (Horm√¥nio Estimulante de Melan√≥citos)",
  comment: "A Pars Intermedia, embora pouco desenvolvida em humanos adultos, produz o horm√¥nio estimulante de melan√≥citos (MSH).",
  topic: "Fun√ß√£o da Pars Intermedia"
},
{
  question: "O coloide encontrado na Pars Intermedia √© um resqu√≠cio embrion√°rio de qual estrutura?",
  options: [
    "A) Neuroectoderma",
    "B) Placa neural",
    "C) Bolsa de Rathke",
    "D) Crista neural"
  ],
  correctAnswer: "C) Bolsa de Rathke",
  comment: "O coloide na Pars Intermedia √© um resqu√≠cio embrion√°rio da Bolsa de Rathke, de onde a adenohip√≥fise se origina.",
  topic: "Embriologia da Pars Intermedia"
},
{
  question: "Quais s√£o os principais componentes celulares da neurohip√≥fise?",
  options: [
    "A) C√©lulas epiteliais glandulares e crom√≥filas.",
    "B) Ax√¥nios amiel√≠nicos e pitu√≠citos.",
    "C) C√©lulas somatotr√≥ficas e lactotr√≥ficas.",
    "D) Fol√≠culos com coloide e c√©lulas bas√≥filas."
  ],
  correctAnswer: "B) Ax√¥nios amiel√≠nicos e pitu√≠citos.",
  comment: "A neurohip√≥fise √© composta por ax√¥nios amiel√≠nicos (provenientes do hipot√°lamo) e pitu√≠citos (c√©lulas da glia que d√£o sustenta√ß√£o).",
  topic: "Histologia da Neurohip√≥fise"
},
{
  question: "Qual a fun√ß√£o dos pitu√≠citos na neurohip√≥fise?",
  options: [
    "A) Produzir horm√¥nios ADH e Ocitocina.",
    "B) Dar sustenta√ß√£o aos ax√¥nios e s√£o c√©lulas da glia.",
    "C) Secretar melan√≥citos.",
    "D) Conectar a neurohip√≥fise ao sistema porta."
  ],
  correctAnswer: "B) Dar sustenta√ß√£o aos ax√¥nios e s√£o c√©lulas da glia.",
  comment: "Pitu√≠citos s√£o c√©lulas da glia, semelhantes aos astr√≥citos, que d√£o sustenta√ß√£o aos ax√¥nios na neurohip√≥fise.",
  topic: "Histologia da Neurohip√≥fise"
},
{
  question: "Onde os horm√¥nios ADH e Ocitocina s√£o acumulados antes de serem liberados na neurohip√≥fise?",
  options: [
    "A) No citoplasma dos pitu√≠citos.",
    "B) Nos corpos de Herring.",
    "C) Nos capilares fenestrados.",
    "D) Na Pars Intermedia."
  ],
  correctAnswer: "B) Nos corpos de Herring.",
  comment: "Os Corpos de Herring s√£o dilata√ß√µes nos terminais dos ax√¥nios onde os horm√¥nios (ADH e Ocitocina) ficam acumulados antes de serem liberados.",
  topic: "Histologia da Neurohip√≥fise"
},
{
  question: "Qual horm√¥nio da neurohip√≥fise atua no controle da press√£o arterial e na reten√ß√£o de √°gua pelos rins?",
  options: [
    "A) Ocitocina",
    "B) Prolactina",
    "C) ADH (Horm√¥nio Antidiur√©tico)",
    "D) TSH"
  ],
  correctAnswer: "C) ADH (Horm√¥nio Antidiur√©tico)",
  comment: "O ADH (Horm√¥nio Antidiur√©tico ou Vasopressina) atua no controle da press√£o arterial e na reten√ß√£o de √°gua pelos rins.",
  topic: "Horm√¥nios da Neurohip√≥fise"
},
{
  question: "Qual √© a fun√ß√£o da ocitocina na amamenta√ß√£o?",
  options: [
    "A) Produzir o leite nas gl√¢ndulas mam√°rias.",
    "B) Promover a eje√ß√£o do leite ao contrair as c√©lulas mioepiteliais da gl√¢ndula mam√°ria.",
    "C) Inibir a produ√ß√£o de prolactina.",
    "D) Regular a temperatura do leite materno."
  ],
  correctAnswer: "B) Promover a eje√ß√£o do leite ao contrair as c√©lulas mioepiteliais da gl√¢ndula mam√°ria.",
  comment: "Na amamenta√ß√£o, a ocitocina promove a eje√ß√£o do leite ao contrair as c√©lulas mioepiteliais da gl√¢ndula mam√°ria.",
  topic: "Horm√¥nios da Neurohip√≥fise"
},
{
  question: "Al√©m da amamenta√ß√£o, quais outras fun√ß√µes importantes a ocitocina desempenha no √∫tero?",
  options: [
    "A) Inibi√ß√£o das contra√ß√µes uterinas.",
    "B) Est√≠mulo da contra√ß√£o da musculatura lisa uterina (miom√©trio), fundamental no trabalho de parto, menstrua√ß√£o e orgasmo.",
    "C) Diminui√ß√£o da sensibilidade uterina a est√≠mulos.",
    "D) Produ√ß√£o de horm√¥nios estrog√™nicos."
  ],
  correctAnswer: "B) Est√≠mulo da contra√ß√£o da musculatura lisa uterina (miom√©trio), fundamental no trabalho de parto, menstrua√ß√£o e orgasmo.",
  comment: "No √∫tero, a ocitocina estimula a contra√ß√£o da musculatura lisa uterina (miom√©trio), sendo fundamental no trabalho de parto, na menstrua√ß√£o e no orgasmo.",
  topic: "Horm√¥nios da Neurohip√≥fise"
},
{
  question: "Ao microsc√≥pio, como se pode diferenciar a Pars Distalis da neurohip√≥fise?",
  options: [
    "A) A Pars Distalis apresenta aspecto fibroso e p√°lido, enquanto a neurohip√≥fise tem alta densidade celular.",
    "B) A Pars Distalis possui alta densidade celular com c√©lulas coradas em cord√µes, enquanto a neurohip√≥fise tem pitu√≠citos e corpos de Herring.",
    "C) A Pars Distalis cont√©m cistos com coloide, e a neurohip√≥fise tem c√©lulas acid√≥filas.",
    "D) Ambas as partes possuem os mesmos elementos celulares, sendo indistingu√≠veis."
  ],
  correctAnswer: "B) A Pars Distalis possui alta densidade celular com c√©lulas coradas em cord√µes, enquanto a neurohip√≥fise tem pitu√≠citos e corpos de Herring.",
  comment: "A Pars Distalis (Adeno) mostra alta densidade celular, c√©lulas coradas (acid√≥filas/bas√≥filas) e organiza√ß√£o em cord√µes. A Pars Nervosa (Neuro) tem aspecto mais fibroso e p√°lido, pitu√≠citos e corpos de Herring, sem c√©lulas glandulares t√≠picas.",
  topic: "Identifica√ß√£o Histol√≥gica da Hip√≥fise"
},
{
  question: "Quais s√£o os principais √≥rg√£os do sistema reprodutor feminino a serem estudados histologicamente?",
  options: [
    "A) Test√≠culos, epid√≠dimo, ducto deferente.",
    "B) Ov√°rios, tubas uterinas, √∫tero e vagina.",
    "C) Gl√¢ndulas suprarrenais e p√¢ncreas.",
    "D) F√≠gado e ves√≠cula biliar."
  ],
  correctAnswer: "B) Ov√°rios, tubas uterinas, √∫tero e vagina.",
  comment: "Os √≥rg√£os a serem estudados histologicamente no sistema reprodutor feminino incluem ov√°rios, tubas uterinas, √∫tero e vagina.",
  topic: "Introdu√ß√£o ao Sistema Reprodutor Feminino"
},
{
  question: "Qual caracter√≠stica principal torna a histologia do sistema reprodutor feminino complexa?",
  options: [
    "A) Sua composi√ß√£o exclusivamente por tecido nervoso.",
    "B) O fato de ser um sistema c√≠clico, com altera√ß√µes constantes na histologia dos √≥rg√£os, especialmente ov√°rio e endom√©trio.",
    "C) Sua localiza√ß√£o profunda no abd√¥men.",
    "D) A aus√™ncia de controle hormonal."
  ],
  correctAnswer: "B) O fato de ser um sistema c√≠clico, com altera√ß√µes constantes na histologia dos √≥rg√£os, especialmente ov√°rio e endom√©trio.",
  comment: "A complexidade deste sistema reside no fato de ser c√≠clico (ciclo menstrual), o que gera altera√ß√µes constantes na histologia dos √≥rg√£os, especialmente no ov√°rio e no endom√©trio.",
  topic: "Caracter√≠sticas do Sistema Reprodutor Feminino"
},
{
  question: "Em rela√ß√£o √† reserva ovariana, qual a principal diferen√ßa das mulheres em compara√ß√£o aos homens?",
  options: [
    "A) Mulheres produzem novos √≥vulos constantemente ap√≥s o nascimento.",
    "B) Homens nascem com um n√∫mero definido de espermatozoides.",
    "C) Mulheres nascem com um n√∫mero definido de c√©lulas germinativas (fol√≠culos) e n√£o produzem novos √≥vulos ap√≥s o nascimento.",
    "D) Mulheres n√£o possuem c√©lulas germinativas ao nascimento."
  ],
  correctAnswer: "C) Mulheres nascem com um n√∫mero definido de c√©lulas germinativas (fol√≠culos) e n√£o produzem novos √≥vulos ap√≥s o nascimento.",
  comment: "Uma diferen√ßa crucial em rela√ß√£o aos homens √© que as mulheres nascem com um n√∫mero definido de c√©lulas germinativas (fol√≠culos). N√£o h√° produ√ß√£o de novos √≥vulos ap√≥s o nascimento.",
  topic: "Reserva Ovariana e Foliculog√™nese"
},
{
  question: "O que √© atresia folicular e qual sua import√¢ncia na reserva ovariana?",
  options: [
    "A) √â a produ√ß√£o cont√≠nua de novos fol√≠culos ao longo da vida.",
    "B) √â a perda cont√≠nua de fol√≠culos ovarianos, onde apenas um geralmente ovula, e os demais sofrem morte celular.",
    "C) √â o processo de matura√ß√£o de todos os fol√≠culos a cada ciclo menstrual.",
    "D) √â a manuten√ß√£o constante do n√∫mero de fol√≠culos ovarianos."
  ],
  correctAnswer: "B) √â a perda cont√≠nua de fol√≠culos ovarianos, onde apenas um geralmente ovula, e os demais sofrem morte celular.",
  comment: "Atresia √© a perda cont√≠nua desses fol√≠culos ao longo da vida. Estima-se que, a cada ciclo, um grupo de fol√≠culos √© recrutado, mas apenas um geralmente ovula, enquanto os outros sofrem atresia (morte celular).",
  topic: "Reserva Ovariana e Foliculog√™nese"
} ];

    function buildQuiz() {
        const output = [];
        questions.forEach((currentQuestion, questionNumber) => {
            const options = [];
            for (let i = 0; i < currentQuestion.options.length; i++) {
                // Note o uso de ${...} para template literals do JS dentro da f-string
                options.push(
                    `<label class="option" data-question="${questionNumber}" data-value="${currentQuestion.options[i]}">
                        <img src="tesouras.png" class="scissor-icon" onclick="event.stopPropagation(); this.parentNode.classList.toggle('struck-through');">
                        ${currentQuestion.options[i]}
                    </label>`
                );
            }
            output.push(
                `<div class="card" id="question-${questionNumber}" data-topic="${currentQuestion.topic}">
                    <div class="question">${currentQuestion.question}</div>
                    <div class="options">${options.join("")}</div>
                    <div class="comment" id="comment-${questionNumber}"></div>
                </div>`
            );
        });
        quizContainer.innerHTML = output.join("");
    }

    function showResults() {
        wrongQuestionIndices = [];
        errorCountByTopic = {};
        totalAnsweredQuestionsByTopic = {};
        currentWrongQuestionIndex = -1;
        hasErrors = false;
        errorDiagnosisSection.style.display = 'none';
        topicsToReviewList.innerHTML = '';
        statusMessage.textContent = '';

        const allQuestionCards = document.querySelectorAll('.quiz-container .card, #newQuestionsContent .card');
        let correctAnswersCount = 0;
        let totalQuestionsAnswered = 0;

        allQuestionCards.forEach((card, index) => {
            const questionEl = card.querySelector('.question') || card.querySelector('p');
            if (!questionEl) return;
            
            const questionText = questionEl.textContent.trim();
            const optionsContainer = card.querySelector('.options') || card;
            const allOptions = optionsContainer.querySelectorAll('.option, label.option, label');
            const userAnswerElement = optionsContainer.querySelector('.option.selected, label.selected');
            const commentDiv = card.querySelector('.comment');
            const questionTopic = card.dataset.topic || "T√≥pico n√£o informado";

            // Limpa classes
            allOptions.forEach(option => { option.classList.remove('correct', 'incorrect', 'selected'); });
            if (commentDiv) commentDiv.classList.remove('show');

            let correctAnswerValue = null;
            let questionComment = null;

            // L√≥gica para Est√°ticas vs Din√¢micas
            const isStatic = card.id && card.id.startsWith('question-');
            if (isStatic) {
                const questionData = questions.find(q => q.question.trim() === questionText);
                if (questionData) {
                    correctAnswerValue = questionData.correctAnswer.trim();
                    questionComment = questionData.comment;
                }
            } else {
                const correctOpt = optionsContainer.querySelector('.option[data-answer="true"], label[data-answer="true"]');
                if (correctOpt) correctAnswerValue = correctOpt.dataset.value?.trim() || correctOpt.textContent.trim();
                
                const commentElement = card.querySelector('.comment');
                if (commentElement && commentElement.textContent.trim()) questionComment = commentElement.textContent.trim();
            }

            // Verifica resposta
            let userAnswer = null;
            if (userAnswerElement) {
                userAnswerElement.classList.add('selected');
                userAnswer = userAnswerElement.dataset.value?.trim() || userAnswerElement.textContent.trim();
                totalQuestionsAnswered++;
                totalAnsweredQuestionsByTopic[questionTopic] = (totalAnsweredQuestionsByTopic[questionTopic] || 0) + 1;

                if (userAnswer === correctAnswerValue) {
                    correctAnswersCount++;
                } else {
                    hasErrors = true;
                    errorCountByTopic[questionTopic] = (errorCountByTopic[questionTopic] || 0) + 1;
                }
            }

            // Pinta as op√ß√µes
            allOptions.forEach(option => {
                const optionValue = option.dataset.value?.trim() || option.textContent.trim();
                if (optionValue === correctAnswerValue) option.classList.add('correct');
                if (userAnswer && optionValue === userAnswer && userAnswer !== correctAnswerValue) option.classList.add('incorrect');
            });

            if (commentDiv && questionComment) {
                commentDiv.textContent = questionComment;
                commentDiv.classList.add('show');
            }
        });

        resultsContainer.textContent = `Voc√™ acertou ${correctAnswersCount} de ${totalQuestionsAnswered} quest√µes respondidas.`;

        // Diagn√≥stico
        if (hasErrors) {
            for (const topic in errorCountByTopic) {
                const errors = errorCountByTopic[topic];
                const total = totalAnsweredQuestionsByTopic[topic] || 0;
                if (total > 0) {
                    const percent = ((errors / total) * 100).toFixed(1);
                    const li = document.createElement('li');
                    li.textContent = `${topic}: ${percent}% de erros (${errors} de ${total} quest√µes)`;
                    topicsToReviewList.appendChild(li);
                }
            }
            errorDiagnosisSection.style.display = 'block';
            generatedQuestionsSection.style.display = 'block';
            generateNewQuestionsBtn.style.display = 'block';
            errorDiagnosisSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        } else {
            const li = document.createElement('li');
            li.textContent = "ü•≥ Parab√©ns! Voc√™ n√£o teve erros nas quest√µes respondidas.";
            topicsToReviewList.appendChild(li);
        }
    }

    // Listeners
    document.addEventListener("click", function (event) {
        const clickedElement = event.target;
        const optionElement = clickedElement.closest('.option');
        if (optionElement) {
            if (clickedElement.classList.contains("scissor-icon")) {
                event.stopPropagation();
                optionElement.classList.toggle("struck-through");
            } else {
                const parentCard = optionElement.closest('.card');
                const currentQuestionOptions = parentCard.querySelectorAll('.option');
                currentQuestionOptions.forEach(opt => opt.classList.remove("selected"));
                optionElement.classList.add("selected");
            }
        }
    });

    generateNewQuestionsBtn.addEventListener("click", async function() {
        statusMessage.textContent = '‚è≥ Gerando novas perguntas...';
        generateNewQuestionsBtn.disabled = true;
        
        const topics = Object.keys(errorCountByTopic).filter(topic => {
            const errorsInTopic = errorCountByTopic[topic] || 0;
            const totalAnsweredInTopic = totalAnsweredQuestionsByTopic[topic] || 0;
            return errorsInTopic > 0 && totalAnsweredInTopic > 0;
        });
        
        const topicsToSend = topics.length > 0 ? topics : ["fisiologia celular", "biologia"];

        try {
            const response = await fetch('https://www.quizia.xyz/quiz', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ topicos: topicsToSend }),
            });

            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
            
            const data = await response.json();
            newQuestionsContent.innerHTML = '';

            if (data && data.html) {
                newQuestionsContent.innerHTML = data.html.replace(/```html|```/g, '');
                
                newQuestionsContent.querySelectorAll('.card').forEach((card) => {
                    // L√≥gica de limpeza e adi√ß√£o de tesouras (mantida igual)
                    const questionElement = card.querySelector('p');
                    if (questionElement && !questionElement.classList.contains('question')) questionElement.classList.add('question');
                    
                    card.querySelectorAll('label').forEach((label) => {
                        const radioInput = label.querySelector('input[type="radio"]');
                        if (radioInput) {
                            if (radioInput.hasAttribute('data-answer')) label.setAttribute('data-answer', radioInput.getAttribute('data-answer'));
                            radioInput.remove();
                        }
                        if (!label.classList.contains('option')) label.classList.add('option');
                        if (!label.dataset.value) label.dataset.value = label.textContent.trim();
                        if (!label.querySelector('.scissor-icon')) {
                            const scissorIcon = document.createElement('img');
                            scissorIcon.src = 'tesouras.png';
                            scissorIcon.className = 'scissor-icon';
                            scissorIcon.onclick = function(e) { e.stopPropagation(); label.classList.toggle('struck-through'); };
                            label.insertBefore(scissorIcon, label.firstChild);
                        }
                    });
                });
            } else {
                newQuestionsContent.innerHTML = "<p>N√£o foi poss√≠vel gerar novas perguntas.</p>";
            }
            
            generatedQuestionsSection.style.display = 'block';
            generatedQuestionsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            statusMessage.textContent = '‚úÖ Perguntas geradas com sucesso!';
            setTimeout(() => { statusMessage.textContent = '' }, 3000);
            
        } catch (error) {
            console.error('Erro:', error);
            statusMessage.textContent = '‚ùå Erro: ' + error.message;
            setTimeout(() => { statusMessage.textContent = '' }, 5000);
        } finally {
            generateNewQuestionsBtn.disabled = false;
        }
    });

    buildQuiz();
    document.getElementById("verifyAnswersBtn").addEventListener("click", showResults);
</script>
<script src="conexao_firebase.js"></script><script src="navegacao.js"></script><script type="module" src="padrao_simulado.js"></script>
</body>
</html>
